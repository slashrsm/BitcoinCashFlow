"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t=e(require("lodash")),r=e(require("elliptic")),i=e(require("bn.js")),a=e(require("bs58")),o=e(require("cashaddrjs")),n=e(require("hash.js")),s=e(require("assert")),u=e(require("randombytes")),c=e(require("buffer-compare")),l=e(require("unorm")),h=e(require("url")),f=[{name:"InvalidB58Char",message:"Invalid Base58 character: {0} in {1}"},{name:"InvalidB58Checksum",message:"Invalid Base58 checksum for {0}"},{name:"InvalidNetwork",message:"Invalid version for network: got {0}"},{name:"InvalidState",message:"Invalid state: {0}"},{name:"NotImplemented",message:"Function {0} was not implemented yet"},{name:"InvalidNetworkArgument",message:'Invalid network: must be "livenet" or "testnet", got {0}'},{name:"InvalidArgument",message(){return"Invalid Argument".concat((0>=arguments.length?void 0:arguments[0])?": ".concat(0>=arguments.length?void 0:arguments[0]):"").concat((1>=arguments.length?void 0:arguments[1])?" Documentation: ".concat("http://bitcore.io/").concat(1>=arguments.length?void 0:arguments[1]):"")}},{name:"AbstractMethodInvoked",message:"Abstract Method Invocation: {0}"},{name:"InvalidArgumentType",message(){return"Invalid Argument for ".concat(2>=arguments.length?void 0:arguments[2],", expected ").concat(1>=arguments.length?void 0:arguments[1]," but got ").concat(typeof(0>=arguments.length?void 0:arguments[0]))}},{name:"Unit",message:"Internal Error on Unit {0}",errors:[{name:"UnknownCode",message:"Unrecognized unit code: {0}"},{name:"InvalidRate",message:"Invalid exchange rate: {0}"}]},{name:"Transaction",message:"Internal Error on Transaction {0}",errors:[{name:"Input",message:"Internal Error on Input {0}",errors:[{name:"MissingScript",message:"Need a script to create an input"},{name:"UnsupportedScript",message:"Unsupported input script type: {0}"},{name:"MissingPreviousOutput",message:"No previous output information."}]},{name:"NeedMoreInfo",message:"{0}"},{name:"InvalidSorting",message:"The sorting function provided did not return the change output as one of the array elements"},{name:"InvalidOutputAmountSum",message:"{0}"},{name:"MissingSignatures",message:"Some inputs have not been fully signed"},{name:"InvalidIndex",message:"Invalid index: {0} is not between 0, {1}"},{name:"UnableToVerifySignature",message:"Unable to verify signature: {0}"},{name:"DustOutputs",message:"Dust amount detected in one output"},{name:"InvalidSatoshis",message:"Output satoshis are invalid"},{name:"FeeError",message:"Internal Error on Fee {0}",errors:[{name:"TooSmall",message:"Fee is too small: {0}"},{name:"TooLarge",message:"Fee is too large: {0}"},{name:"Different",message:"Unspent value is different from specified fee: {0}"}]},{name:"ChangeAddressMissing",message:"Change address is missing"},{name:"BlockHeightTooHigh",message:"Block Height can be at most 2^32 -1"},{name:"NLockTimeOutOfRange",message:"Block Height can only be between 0 and 499 999 999"},{name:"LockTimeTooEarly",message:"Lock Time can't be earlier than UNIX date 500 000 000"}]},{name:"Script",message:"Internal Error on Script {0}",errors:[{name:"UnrecognizedAddress",message:"Expected argument {0} to be an address"},{name:"CantDeriveAddress",message:"Can't derive address associated with script {0}, needs to be p2pkh in, p2pkh out, p2sh in, or p2sh out."},{name:"InvalidBuffer",message:"Invalid script buffer: can't parse valid script from given buffer {0}"}]},{name:"HDPrivateKey",message:"Internal Error on HDPrivateKey {0}",errors:[{name:"InvalidDerivationArgument",message:"Invalid derivation argument {0}, expected string, or number and boolean"},{name:"InvalidEntropyArgument",message:"Invalid entropy: must be an hexa string or binary buffer, got {0}",errors:[{name:"TooMuchEntropy",message:'Invalid entropy: more than 512 bits is non standard, got "{0}"'},{name:"NotEnoughEntropy",message:'Invalid entropy: at least 128 bits needed, got "{0}"'}]},{name:"InvalidLength",message:"Invalid length for xprivkey string in {0}"},{name:"InvalidPath",message:"Invalid derivation path: {0}"},{name:"UnrecognizedArgument",message:'Invalid argument: creating a HDPrivateKey requires a string, buffer, json or object, got "{0}"'}]},{name:"HDPublicKey",message:"Internal Error on HDPublicKey {0}",errors:[{name:"ArgumentIsPrivateExtended",message:"Argument is an extended private key: {0}"},{name:"InvalidDerivationArgument",message:"Invalid derivation argument: got {0}"},{name:"InvalidLength",message:'Invalid length for xpubkey: got "{0}"'},{name:"InvalidPath",message:'Invalid derivation path, it should look like: "m/1/100", got "{0}"'},{name:"InvalidIndexCantDeriveHardened",message:"Invalid argument: creating a hardened path requires an HDPrivateKey"},{name:"MustSupplyArgument",message:"Must supply an argument to create a HDPublicKey"},{name:"UnrecognizedArgument",message:"Invalid argument for creation, must be string, json, buffer, or object"}]},{name:"Mnemonic",message:"Internal Error on bitcore-mnemonic module {0}",errors:[{name:"InvalidEntropy",message:"Entropy length must be an even multiple of 11 bits: {0}"},{name:"UnknownWordlist",message:"Could not detect the used word list: {0}"},{name:"InvalidMnemonic",message:"Mnemonic string is invalid: {0}"}]}];function p(e,t){return e.replace("{0}",t[0]).replace("{1}",t[1]).replace("{2}",t[2])}var d,m=function(e,r){var i=function(){for(var e=arguments.length,i=Array(e),a=0;a<e;a++)i[a]=arguments[a];if(t.isString(r.message))this.message=p(r.message,i);else{if(!t.isFunction(r.message))throw new Error("Invalid error definition for ".concat(r.name));this.message=r.message.apply(null,i)}this.stack="".concat(this.message,"\n").concat((new Error).stack)};return(i.prototype=Object.create(e.prototype)).name=e.prototype.name+r.name,e[r.name]=i,r.errors&&g(i,r.errors),i},g=function(e,r){t.each(r,t=>m(e,t))},b={};b.Error=function(){this.message="Internal error",this.stack="".concat(this.message,"\n").concat((new Error).stack)},b.Error.prototype=Object.create(Error.prototype),b.Error.prototype.name="bitcore.Error",d=b.Error,g(d,f),b.Error.extend=function(e){return m(b.Error,e)};var v=b.Error,y={checkState(e,t){if(!e)throw new v.InvalidState(t)},checkArgument(e,t,r,i){if(!e)throw new v.InvalidArgument(t,r,i)},checkArgumentType(e,r,i){if(i=i||"(unknown name)",t.isString(r)){if("Buffer"===r){if(!Buffer.isBuffer(e))throw new v.InvalidArgumentType(e,r,i)}else if(typeof e!==r)throw new v.InvalidArgumentType(e,r,i)}else if(!(e instanceof r))throw new v.InvalidArgumentType(e,r.name,i)}},_=["1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","J","K","L","M","N","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],S=function e(t){if(!(this instanceof e))return new e(t);Buffer.isBuffer(t)?this.fromBuffer(t):"string"==typeof t?this.fromString(t):t&&this.set(t)};S.validCharacters=function(e){return Buffer.isBuffer(e)&&(e=e.toString()),t.every(t.map(e,e=>t.includes(_,e)))},S.prototype.set=function(e){return this.buf=e.buf||this.buf||void 0,this},S.encode=function(e){if(!Buffer.isBuffer(e))throw new Error("Input should be a buffer");return a.encode(e)},S.decode=function(e){if("string"!=typeof e)throw new Error("Input should be a string");return Buffer.from(a.decode(e))},S.prototype.fromBuffer=function(e){return this.buf=e,this},S.prototype.fromString=function(e){var t=S.decode(e);return this.buf=t,this},S.prototype.toBuffer=function(){return this.buf},S.prototype.toString=function(){return S.encode(this.buf)};var I=function(e){return!!t.isString(e)&&/^[0-9a-fA-F]+$/.test(e)},k={isValidJSON:function(e){var r;if(!t.isString(e))return!1;try{r=JSON.parse(e)}catch(e){return!1}return!("object"!=typeof r)},isHexa:I,isHexaString:I,cloneArray:e=>[].concat(e),defineImmutable:function(e,t){return Object.keys(t).forEach(r=>{Object.defineProperty(e,r,{configurable:!1,enumerable:!0,value:t[r]})}),e},isNaturalNumber:function(e){return"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e&&0<=e}};function w(e,t){if(e.length!==t.length)return!1;for(var{length:r}=e,i=0;i<r;i+=1)if(e[i]!==t[i])return!1;return!0}var O={fill:function(e,t){y.checkArgumentType(e,"Buffer","buffer"),y.checkArgumentType(t,"number","value");for(var{length:r}=e,i=0;i<r;i+=1)e[i]=t;return e},copy(e){var t=Buffer.alloc(e.length);return e.copy(t),t},isBuffer:function(e){return Buffer.isBuffer(e)||e instanceof Uint8Array},emptyBuffer:function(e){y.checkArgumentType(e,"number","bytes");for(var t=Buffer.alloc(e),r=0;r<e;r+=1)t.write("\0",r);return t},concat:Buffer.concat,equals:w,equal:w,integerAsSingleByteBuffer:function(e){return y.checkArgumentType(e,"number","integer"),Buffer.from([255&e])},integerAsBuffer:function(e){return y.checkArgumentType(e,"number","integer"),Buffer.from([255&e>>24,255&e>>16,255&e>>8,255&e])},integerFromBuffer:function(e){return y.checkArgumentType(e,"Buffer","buffer"),e[0]<<24|e[1]<<16|e[2]<<8|e[3]},integerFromSingleByteBuffer:function(e){return y.checkArgumentType(e,"Buffer","buffer"),e[0]},bufferToHex:function(e){return y.checkArgumentType(e,"Buffer","buffer"),e.toString("hex")},reverse:function(e){for(var t=Buffer.alloc(e.length),r=0;r<e.length;r+=1)t[r]=e[e.length-r-1];return t},hexToBuffer:function(e){return s(k.isHexa(e)),Buffer.from(e,"hex")}};O.NULL_HASH=O.fill(Buffer.alloc(32),0),O.EMPTY_BUFFER=Buffer.alloc(0);var P={sha1:function(e){y.checkArgument(O.isBuffer(e));var t=n.sha1().update(e).digest("hex");return Buffer.from(t,"hex")}};P.sha1.blocksize=512,P.sha256=function(e){y.checkArgument(O.isBuffer(e));var t=n.sha256().update(e).digest("hex");return Buffer.from(t,"hex")},P.sha256.blocksize=512,P.sha256sha256=function(e){return y.checkArgument(O.isBuffer(e)),P.sha256(P.sha256(e))},P.ripemd160=function(e){y.checkArgument(O.isBuffer(e));var t=n.ripemd160().update(e).digest("hex");return Buffer.from(t,"hex")},P.sha256ripemd160=function(e){return y.checkArgument(O.isBuffer(e)),P.ripemd160(P.sha256(e))},P.sha512=function(e){y.checkArgument(O.isBuffer(e));var t=n.sha512().update(e).digest("hex");return Buffer.from(t,"hex")},P.sha512.blocksize=1024,P.hmac=function(e,t,r){y.checkArgument(O.isBuffer(t)),y.checkArgument(O.isBuffer(r)),y.checkArgument(e.blocksize);var i=e.blocksize/8;if(r.length>i)r=e(r);else if(r<i){var a=Buffer.alloc(i);a.fill(0),r.copy(a),r=a}var o=Buffer.alloc(i);o.fill(92);var n=Buffer.alloc(i);n.fill(54);for(var s=Buffer.alloc(i),u=Buffer.alloc(i),c=0;c<i;c+=1)s[c]=o[c]^r[c],u[c]=n[c]^r[c];return e(Buffer.concat([s,e(Buffer.concat([u,t]))]))},P.sha256hmac=function(e,t){return P.hmac(P.sha256,e,t)},P.sha512hmac=function(e,t){return P.hmac(P.sha512,e,t)};var E=function e(t){if(!(this instanceof e))return new e(t);Buffer.isBuffer(t)?this.fromBuffer(t):"string"==typeof t?this.fromString(t):t&&this.set(t)};E.prototype.set=function(e){return this.buf=e.buf||this.buf||void 0,this},E.validChecksum=function(e,r){return t.isString(e)&&(e=Buffer.from(S.decode(e))),t.isString(r)&&(r=Buffer.from(S.decode(r))),r||(r=e.slice(-4),e=e.slice(0,-4)),E.checksum(e).toString("hex")===r.toString("hex")},E.decode=function(e){if("string"!=typeof e)throw new Error("Input must be a string");var t=Buffer.from(S.decode(e));if(4>t.length)throw new Error("Input string too short");var r=t.slice(0,-4),i=t.slice(-4),a=P.sha256sha256(r).slice(0,4);if(i.toString("hex")!==a.toString("hex"))throw new Error("Checksum mismatch");return r},E.checksum=function(e){return P.sha256sha256(e).slice(0,4)},E.encode=function(e){if(!Buffer.isBuffer(e))throw new Error("Input must be a buffer");var t=Buffer.alloc(e.length+4),r=E.checksum(e);return e.copy(t),r.copy(t,e.length),S.encode(t)},E.prototype.fromBuffer=function(e){return this.buf=e,this},E.prototype.fromString=function(e){var t=E.decode(e);return this.buf=t,this},E.prototype.toBuffer=function(){return this.buf},E.prototype.toString=function(){return E.encode(this.buf)};var B=[],A={};function T(){}function x(e,r){if(~B.indexOf(e))return e;if(r){t.isArray(r)||(r=[r]);var i=B.findIndex(i=>t.some(r,t=>i[t]===e));return-1===i?void 0:B[i]}return A[e]}function N(e){var r=new T;return k.defineImmutable(r,{name:e.name,alias:e.alias,pubkeyhash:e.pubkeyhash,privatekey:e.privatekey,scripthash:e.scripthash,xpubkey:e.xpubkey,xprivkey:e.xprivkey}),e.networkMagic&&k.defineImmutable(r,{networkMagic:O.integerAsBuffer(e.networkMagic)}),e.port&&k.defineImmutable(r,{port:e.port}),e.dnsSeeds&&k.defineImmutable(r,{dnsSeeds:e.dnsSeeds}),t.each(r,e=>{t.isUndefined(e)||t.isObject(e)||(A[e]=r)}),B.push(r),r}T.prototype.toString=function(){return this.name},N({name:"livenet",alias:"mainnet",pubkeyhash:0,privatekey:128,scripthash:5,xpubkey:76067358,xprivkey:76066276,networkMagic:4190024921,port:8333,dnsSeeds:["seed.bitcoin.sipa.be","dnsseed.bluematt.me","dnsseed.bitcoin.dashjr.org","seed.bitcoinstats.com","seed.bitnodes.io","bitseed.xf2.org"]});var R=x("livenet");N({name:"testnet",alias:"regtest",pubkeyhash:111,privatekey:239,scripthash:196,xpubkey:70617039,xprivkey:70615956});var C=x("testnet"),z={PORT:18333,NETWORK_MAGIC:O.integerAsBuffer(185665799),DNS_SEEDS:["testnet-seed.bitcoin.petertodd.org","testnet-seed.bluematt.me","testnet-seed.alexykot.me","testnet-seed.bitcoin.schildbach.de"]};Object.keys(z).forEach(e=>{t.isObject(z[e])||(A[z[e]]=C)});var U={PORT:18444,NETWORK_MAGIC:O.integerAsBuffer(4206867930),DNS_SEEDS:[]};Object.keys(U).forEach(e=>{t.isObject(U[e])||(A[U[e]]=C)}),Object.defineProperty(C,"port",{enumerable:!0,configurable:!1,get(){return this.regtestEnabled?U.PORT:z.PORT}}),Object.defineProperty(C,"networkMagic",{enumerable:!0,configurable:!1,get(){return this.regtestEnabled?U.NETWORK_MAGIC:z.NETWORK_MAGIC}}),Object.defineProperty(C,"dnsSeeds",{enumerable:!0,configurable:!1,get(){return this.regtestEnabled?U.DNS_SEEDS:z.DNS_SEEDS}});var H={add:N,remove:function(e){for(var t=0;t<B.length;t+=1)B[t]===e&&B.splice(t,1);Object.keys(A).forEach(t=>{A[t]===e&&delete A[t]})},defaultNetwork:R,livenet:R,mainnet:R,testnet:C,get:x,enableRegtest:function(){C.regtestEnabled=!0},disableRegtest:function(){C.regtestEnabled=!1}},K=function(e){for(var t=Buffer.alloc(e.length),r=0;r<e.length;r+=1)t[r]=e[e.length-1-r];return t};i.Zero=new i(0),i.One=new i(1),i.Minus1=new i(-1),i.fromNumber=function(e){return y.checkArgument(t.isNumber(e)),new i(e)},i.fromString=function(e,r){return y.checkArgument(t.isString(e)),new i(e,r)},i.fromBuffer=function(e,t){void 0!==t&&"little"===t.endian&&(e=K(e));var r=e.toString("hex");return new i(r,16)},i.fromSM=function(e,t){var r;if(0===e.length)return i.fromBuffer(Buffer.from([0]));var a="big";return t&&({endian:a}=t),"little"===a&&(e=K(e)),128&e[0]?(e[0]&=127,(r=i.fromBuffer(e)).neg().copy(r)):r=i.fromBuffer(e),r},i.prototype.toNumber=function(){return parseInt(this.toString(10),10)},i.prototype.toBuffer=function(e){var t,r;if(e&&e.size){var a=(r=this.toString(16,2)).length/2;t=Buffer.from(r,"hex"),a>e.size?t=i.trim(t,a):a<e.size&&(t=i.pad(t,a,e.size))}else r=this.toString(16,2),t=Buffer.from(r,"hex");return void 0!==e&&"little"===e.endian&&(t=K(t)),t},i.prototype.toSMBigEndian=function(){var e;return-1===this.cmp(i.Zero)?128&(e=this.neg().toBuffer())[0]?e=Buffer.concat([Buffer.from([128]),e]):e[0]|=128:128&(e=this.toBuffer())[0]&&(e=Buffer.concat([Buffer.from([0]),e])),1===e.length&0===e[0]&&(e=Buffer.from([])),e},i.prototype.toSM=function(e){var t=e?e.endian:"big",r=this.toSMBigEndian();return"little"===t&&(r=K(r)),r},i.fromScriptNumBuffer=function(e,t,r){if(y.checkArgument(e.length<=(r||4),new Error("script number overflow")),t&&0<e.length&&0==(127&e[e.length-1])&&(1>=e.length||0==(128&e[e.length-2])))throw new Error("non-minimally encoded script number");return i.fromSM(e,{endian:"little"})},i.prototype.toScriptNumBuffer=function(){return this.toSM({endian:"little"})},i.trim=function(e,t){return e.slice(t-e.length,e.length)},i.pad=function(e,t,r){for(var i=Buffer.alloc(r),a=0;a<e.length;a+=1)i[i.length-1-a]=e[e.length-1-a];for(var o=0;o<r-t;o+=1)i[o]=0;return i};var F=r.curves.secp256k1,L=F.curve.point.bind(F.curve),D=F.curve.pointFromX.bind(F.curve),j=function(e,t,r){var i;try{i=L(e,t,r)}catch(e){throw new Error("Invalid point on curve")}return i.validate(),i};j.prototype=Object.getPrototypeOf(F.curve.point()),j.fromX=function(e,t){var r;try{r=D(t,e)}catch(e){throw new Error("Invalid x value for curve.")}return r.validate(),r},j.getG=function(){return F.curve.g},j.getN=function(){return new i(F.curve.n.toArray())},j.prototype._getX=j.prototype.getX,j.prototype.getX=function(){return new i(this._getX().toArray())},j.prototype._getY=j.prototype.getY,j.prototype.getY=function(){return new i(this._getY().toArray())},j.prototype.validate=function(){if(this.isInfinity())throw new Error("Point cannot be equal to Infinity");var e;try{e=D(this.getX(),this.getY().isOdd())}catch(e){throw new Error("Point does not lie on the curve.")}if(0!==e.y.cmp(this.y))throw new Error("Invalid y value for curve.");if(!this.mul(j.getN()).isInfinity())throw new Error("Point times N must be infinity");return this},j.pointToCompressed=function(e){var t,r=e.getX().toBuffer({size:32}),i=e.getY().toBuffer({size:32});return t=i[i.length-1]%2?Buffer.from([3]):Buffer.from([2]),O.concat([t,r])};var M={};function V(e,t){if(!(this instanceof V))return new V(e,t);if(e instanceof V)return e;var r=this._classifyArguments(e,t);if(!r.bn||0===r.bn.cmp(new i(0)))throw new TypeError("Number can not be equal to zero, undefined, null or false");if(!r.bn.lt(j.getN()))throw new TypeError("Number must be less than N");if(void 0===r.network)throw new TypeError('Must specify the network ("livenet" or "testnet")');return k.defineImmutable(this,{bn:r.bn,compressed:r.compressed,network:r.network}),Object.defineProperty(this,"publicKey",{configurable:!1,enumerable:!0,get:this.toPublicKey.bind(this)}),this}function q(e,t){if(!(this instanceof q))return new q(e,t);if(y.checkArgument(e,"First argument is required, please include public key data."),e instanceof q)return e;t=t||{};var r=this._classifyArgs(e,t);return r.point.validate(),k.defineImmutable(this,{point:r.point,compressed:r.compressed,network:r.network||H.defaultNetwork}),this}M.getRandomBufferNode=function(e){return u(e)},M.getRandomBufferBrowser=function(e){var t;if(window.crypto&&window.crypto.getRandomValues)t=window.crypto;else{if(!window.msCrypto||!window.msCrypto.getRandomValues)throw new Error("window crypto.getRandomValues not available");t=window.msCrypto}var r=new Uint8Array(e);return t.getRandomValues(r),Buffer.from(r)},M.getRandomBuffer=function(e){return"undefined"==typeof window||void 0===window.crypto&&void 0===window.msCrypto?M.getRandomBufferNode(e):M.getRandomBufferBrowser(e)},M.getPseudoRandomBuffer=function(e){for(var t=Buffer.alloc(e),r=0,i=0;i<=e;i+=1){0===i-4*Math.floor(i/4)?(r=4294967296*Math.random(),t[i]=255&r):t[i]=255&(r>>>=8)}return t},V.prototype._classifyArguments=function(e,r){var a={compressed:!0,network:r?H.get(r):H.defaultNetwork};if(t.isUndefined(e)||t.isNull(e))a.bn=V._getRandomBN();else if(e instanceof i)a.bn=e;else if(e instanceof Buffer||e instanceof Uint8Array)a=V._transformBuffer(e,r);else if(e.bn&&e.network)a=V._transformObject(e);else if(!r&&H.get(e))a.bn=V._getRandomBN(),a.network=H.get(e);else{if("string"!=typeof e)throw new TypeError("First argument is an unrecognized data type.");k.isHexa(e)?a.bn=new i(Buffer.from(e,"hex")):a=V._transformWIF(e,r)}return a},V._getRandomBN=function(){var e,t;do{var r=M.getRandomBuffer(32);e=(t=i.fromBuffer(r)).lt(j.getN())}while(!e);return t},V._transformBuffer=function(e,t){var r={};if(32===e.length)return V._transformBNBuffer(e,t);if(r.network=H.get(e[0],"privatekey"),!r.network)throw new Error("Invalid network");if(t&&r.network!==H.get(t))throw new TypeError("Private key network mismatch");if(34===e.length&&1===e[33])r.compressed=!0;else{if(33!==e.length)throw new Error("Length of buffer must be 33 (uncompressed) or 34 (compressed)");r.compressed=!1}return r.bn=i.fromBuffer(e.slice(1,33)),r},V._transformBNBuffer=function(e,t){return{network:H.get(t)||H.defaultNetwork,bn:i.fromBuffer(e),compressed:!1}},V._transformWIF=function(e,t){return V._transformBuffer(E.decode(e),t)},V.fromBuffer=function(e,t){return new V(e,t)},V._transformObject=function(e){return{bn:new i(e.bn,"hex"),network:H.get(e.network),compressed:e.compressed}},V.fromWIF=function(e){return y.checkArgument(t.isString(e),"First argument is expected to be a string."),new V(e)},V.fromString=V.fromWIF,V.fromObject=function(e){return y.checkArgument(t.isObject(e),"First argument is expected to be an object."),new V(e)},V.fromRandom=function(e){var t=V._getRandomBN();return new V(t,e)},V.getValidationError=function(e,t){var r;try{new V(e,t)}catch(e){r=e}return r},V.isValid=function(e,t){return!!e&&!V.getValidationError(e,t)},V.prototype.toString=function(){return this.toBuffer().toString("hex")},V.prototype.toWIF=function(){var e;return e=this.compressed?Buffer.concat([Buffer.from([this.network.privatekey]),this.bn.toBuffer({size:32}),Buffer.from([1])]):Buffer.concat([Buffer.from([this.network.privatekey]),this.bn.toBuffer({size:32})]),E.encode(e)},V.prototype.toBigNumber=function(){return this.bn},V.prototype.toBuffer=function(){return this.bn.toBuffer()},V.prototype.toBufferNoPadding=function(){return this.bn.toBuffer()},V.prototype.toPublicKey=function(){return this._pubkey||(this._pubkey=q.fromPrivateKey(this)),this._pubkey},V.prototype.toAddress=function(e){var t=this.toPublicKey();return J.fromPublicKey(t,e||this.network)},V.prototype.toJSON=function(){return{bn:this.bn.toString("hex"),compressed:this.compressed,network:this.network.toString()}},V.prototype.toObject=V.prototype.toJSON,V.prototype.inspect=function(){var e=this.compressed?"":", uncompressed";return"<PrivateKey: ".concat(this.toString(),", network: ").concat(this.network).concat(e,">")},q.prototype._classifyArgs=function(e,r){var i={compressed:t.isUndefined(r.compressed)||r.compressed};if(e instanceof j)i.point=e;else if(e.x&&e.y)i=q._transformObject(e);else if("string"==typeof e)i=q._transformDER(Buffer.from(e,"hex"));else if(q._isBuffer(e))i=q._transformDER(e);else{if(!q._isPrivateKey(e))throw new TypeError("First argument is an unrecognized data format.");i=q._transformPrivateKey(e)}return i.network||(i.network=t.isUndefined(r.network)?void 0:H.get(r.network)),i},q._isPrivateKey=function(e){return e instanceof V},q._isBuffer=function(e){return e instanceof Buffer||e instanceof Uint8Array},q._transformPrivateKey=function(e){return y.checkArgument(q._isPrivateKey(e),"Must be an instance of PrivateKey"),{point:j.getG().mul(e.bn),compressed:e.compressed,network:e.network}},q._transformDER=function(e,r){y.checkArgument(q._isBuffer(e),"Must be a hex buffer of DER encoded public key");var a,o,n,s,u={};if(r=!!t.isUndefined(r)||r,4!==e[0]&&(r||6!==e[0]&&7!==e[0]))if(3===e[0])n=e.slice(1),a=new i(n),(u=q._transformX(!0,a)).compressed=!0;else{if(2!==e[0])throw new TypeError("Invalid DER format public key");n=e.slice(1),a=new i(n),(u=q._transformX(!1,a)).compressed=!0}else{if(n=e.slice(1,33),s=e.slice(33,65),32!==n.length||32!==s.length||65!==e.length)throw new TypeError("Length of x and y must be 32 bytes");a=new i(n),o=new i(s),u.point=new j(a,o),u.compressed=!1}return u},q._transformX=function(e,t){return y.checkArgument("boolean"==typeof e,"Must specify whether y is odd or not (true or false)"),{point:j.fromX(e,t)}},q._transformObject=function(e){var t=new i(e.x,"hex"),r=new i(e.y,"hex");return new q(new j(t,r),{compressed:e.compressed})},q.fromPrivateKey=function(e){y.checkArgument(q._isPrivateKey(e),"Must be an instance of PrivateKey");var t=q._transformPrivateKey(e);return new q(t.point,{compressed:t.compressed,network:t.network})},q.fromBuffer=function(e,t){y.checkArgument(q._isBuffer(e),"Must be a hex buffer of DER encoded public key");var r=q._transformDER(e,t);return new q(r.point,{compressed:r.compressed})},q.fromDER=q.fromBuffer,q.fromPoint=function(e,t){return y.checkArgument(e instanceof j,"First argument must be an instance of Point."),new q(e,{compressed:t})},q.fromString=function(e,t){var r=Buffer.from(e,t||"hex"),i=q._transformDER(r);return new q(i.point,{compressed:i.compressed})},q.fromX=function(e,t){var r=q._transformX(e,t);return new q(r.point,{compressed:r.compressed})},q.getValidationError=function(e){var t;try{new q(e)}catch(e){t=e}return t},q.isValid=function(e){return!q.getValidationError(e)},q.prototype.toJSON=function(){return{x:this.point.getX().toString("hex",2),y:this.point.getY().toString("hex",2),compressed:this.compressed}},q.prototype.toObject=q.prototype.toJSON,q.prototype.toDER=function(){var e,t=this.point.getX(),r=this.point.getY(),i=t.toBuffer({size:32}),a=r.toBuffer({size:32});return this.compressed?(e=a[a.length-1]%2?Buffer.from([3]):Buffer.from([2]),Buffer.concat([e,i])):(e=Buffer.from([4]),Buffer.concat([e,i,a]))},q.prototype.toBuffer=q.prototype.toDER,q.prototype._getID=function(){return P.sha256ripemd160(this.toBuffer())},q.prototype.toAddress=function(e){return J.fromPublicKey(this,e||this.network)},q.prototype.toString=function(){return this.toDER().toString("hex")},q.prototype.inspect=function(){return"<PublicKey: ".concat(this.toString()).concat(this.compressed?"":", uncompressed",">")};var G=function e(r){if(!(this instanceof e))return new e(r);if(!t.isUndefined(r))if(Buffer.isBuffer(r))this.set({buf:r});else if(t.isString(r)){var i=Buffer.from(r,"hex");if(2*i.length!==r.length)throw new TypeError("Invalid hex string");this.set({buf:i})}else{if(!t.isObject(r))throw new TypeError("Unrecognized argument for BufferReader");this.set(r)}};G.prototype.set=function(e){return this.buf=e.buf||this.buf||void 0,this.pos=e.pos||this.pos||0,this},G.prototype.eof=function(){return this.pos>=this.buf.length},G.prototype.finished=G.prototype.eof,G.prototype.read=function(e){y.checkArgument(!t.isUndefined(e),"Must specify a length");var r=this.buf.slice(this.pos,this.pos+e);return this.pos+=e,r},G.prototype.readAll=function(){var e=this.buf.slice(this.pos,this.buf.length);return this.pos=this.buf.length,e},G.prototype.readUInt8=function(){var e=this.buf.readUInt8(this.pos);return this.pos+=1,e},G.prototype.readUInt16BE=function(){var e=this.buf.readUInt16BE(this.pos);return this.pos+=2,e},G.prototype.readUInt16LE=function(){var e=this.buf.readUInt16LE(this.pos);return this.pos+=2,e},G.prototype.readUInt32BE=function(){var e=this.buf.readUInt32BE(this.pos);return this.pos+=4,e},G.prototype.readUInt32LE=function(){var e=this.buf.readUInt32LE(this.pos);return this.pos+=4,e},G.prototype.readInt32LE=function(){var e=this.buf.readInt32LE(this.pos);return this.pos+=4,e},G.prototype.readUInt64BEBN=function(){var e=this.buf.slice(this.pos,this.pos+8),t=i.fromBuffer(e);return this.pos+=8,t},G.prototype.readUInt64LEBN=function(){var e,t=this.buf.readUInt32LE(this.pos),r=4294967296*this.buf.readUInt32LE(this.pos+4)+t;if(9007199254740991>=r)e=new i(r);else{var a=Array.prototype.slice.call(this.buf,this.pos,this.pos+8);e=new i(a,10,"le")}return this.pos+=8,e},G.prototype.readVarintNum=function(){var e=this.readUInt8();switch(e){case 253:return this.readUInt16LE();case 254:return this.readUInt32LE();case 255:var t=this.readUInt64LEBN().toNumber();if(t<=9007199254740992)return t;throw new Error("number too large to retain precision - use readVarintBN");default:return e}},G.prototype.readVarLengthBuffer=function(){var e=this.readVarintNum(),t=this.read(e);return y.checkState(t.length===e,"Invalid length while reading varlength buffer. Expected: ".concat(e,", Received: ").concat(t.length)),t},G.prototype.readVarintBuf=function(){var e=this.buf.readUInt8(this.pos);return 253===e?this.read(3):254===e?this.read(5):255===e?this.read(9):this.read(1)},G.prototype.readVarintBN=function(){var e=this.readUInt8();return 253===e?new i(this.readUInt16LE()):254===e?new i(this.readUInt32LE()):255===e?this.readUInt64LEBN():new i(e)},G.prototype.reverse=function(){for(var e=Buffer.alloc(this.buf.length),t=0;t<e.length;t+=1)e[t]=this.buf[this.buf.length-1-t];return this.buf=e,this},G.prototype.readReverse=function(e){t.isUndefined(e)&&(e=this.buf.length);var r=this.buf.slice(this.pos,this.pos+e);return this.pos+=e,O.reverse(r)};var Y=function e(t){return this instanceof e?void(t?this.set(t):this.bufs=[]):new e(t)};function W(e){if(!(this instanceof W))return new W(e);var r;if(t.isNumber(e))r=e;else{if(!t.isString(e))throw new TypeError('Unrecognized num type: "'.concat(typeof e,'" for Opcode'));r=W.map[e]}return k.defineImmutable(this,{num:r}),this}Y.prototype.set=function(e){return this.bufs=e.bufs||this.bufs||[],this},Y.prototype.toBuffer=function(){return this.concat()},Y.prototype.concat=function(){return Buffer.concat(this.bufs)},Y.prototype.write=function(e){return s(O.isBuffer(e)),this.bufs.push(e),this},Y.prototype.writeReverse=function(e){return s(O.isBuffer(e)),this.bufs.push(O.reverse(e)),this},Y.prototype.writeUInt8=function(e){var t=Buffer.alloc(1);return t.writeUInt8(e,0),this.write(t),this},Y.prototype.writeUInt16BE=function(e){var t=Buffer.alloc(2);return t.writeUInt16BE(e,0),this.write(t),this},Y.prototype.writeUInt16LE=function(e){var t=Buffer.alloc(2);return t.writeUInt16LE(e,0),this.write(t),this},Y.prototype.writeUInt32BE=function(e){var t=Buffer.alloc(4);return t.writeUInt32BE(e,0),this.write(t),this},Y.prototype.writeInt32LE=function(e){var t=Buffer.alloc(4);return t.writeInt32LE(e,0),this.write(t),this},Y.prototype.writeUInt32LE=function(e){var t=Buffer.alloc(4);return t.writeUInt32LE(e,0),this.write(t),this},Y.prototype.writeUInt64BEBN=function(e){var t=e.toBuffer({size:8});return this.write(t),this},Y.prototype.writeUInt64LEBN=function(e){var t=e.toBuffer({size:8});return this.writeReverse(t),this},Y.prototype.writeVarintNum=function(e){var t=Y.varintBufNum(e);return this.write(t),this},Y.prototype.writeVarintBN=function(e){var t=Y.varintBufBN(e);return this.write(t),this},Y.varintBufNum=function(e){var t;return 253>e?(t=Buffer.alloc(1)).writeUInt8(e,0):65536>e?((t=Buffer.alloc(3)).writeUInt8(253,0),t.writeUInt16LE(e,1)):4294967296>e?((t=Buffer.alloc(5)).writeUInt8(254,0),t.writeUInt32LE(e,1)):((t=Buffer.alloc(9)).writeUInt8(255,0),t.writeInt32LE(-1&e,1),t.writeUInt32LE(Math.floor(e/4294967296),5)),t},Y.varintBufBN=function(e){var t,r=e.toNumber();if(253>r)(t=Buffer.alloc(1)).writeUInt8(r,0);else if(65536>r)(t=Buffer.alloc(3)).writeUInt8(253,0),t.writeUInt16LE(r,1);else if(4294967296>r)(t=Buffer.alloc(5)).writeUInt8(254,0),t.writeUInt32LE(r,1);else{var i=new Y;i.writeUInt8(255),i.writeUInt64LEBN(e),t=i.concat()}return t},W.fromBuffer=function(e){return y.checkArgument(O.isBuffer(e)),new W(+"0x".concat(e.toString("hex")))},W.fromNumber=function(e){return y.checkArgument(t.isNumber(e)),new W(e)},W.fromString=function(e){y.checkArgument(t.isString(e));var r=W.map[e];if(void 0===r)throw new TypeError("Invalid opcodestr");return new W(r)},W.prototype.toHex=function(){return this.num.toString(16)},W.prototype.toBuffer=function(){return Buffer.from(this.toHex(),"hex")},W.prototype.toNumber=function(){return this.num},W.prototype.toString=function(){var e=W.reverseMap[this.num];if(void 0===e)throw new Error("Opcode does not have a string representation");return e},W.smallInt=function(e){return y.checkArgument(t.isNumber(e),"Invalid Argument: n should be number"),y.checkArgument(0<=e&&16>=e,"Invalid Argument: n must be between 0 and 16"),0===e?W("OP_0"):new W(W.map.OP_1+e-1)},W.map={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP1:176,OP_NOP2:177,OP_NOP3:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255},W.reverseMap=[],Object.keys(W.map).forEach(e=>{W.reverseMap[W.map[e]]=e}),t.extend(W,W.map),W.isSmallIntOp=function(e){return e instanceof W&&(e=e.toNumber()),e===W.map.OP_0||e>=W.map.OP_1&&e<=W.map.OP_16},W.prototype.inspect=function(){return"<Opcode: ".concat(this.toString(),", hex: ").concat(this.toHex(),", decimal: ").concat(this.num,">")};var Z=function e(t,r){if(!(this instanceof e))return new e(t,r);t instanceof i?this.set({r:t,s:r}):t&&this.set(t)};Z.prototype.set=function(e){return this.r=e.r||this.r||void 0,this.s=e.s||this.s||void 0,this.i=void 0===e.i?this.i:e.i,this.compressed=void 0===e.compressed?this.compressed:e.compressed,this.nhashtype=e.nhashtype||this.nhashtype||void 0,this},Z.fromCompact=function(e){y.checkArgument(O.isBuffer(e),"Argument is expected to be a Buffer");var t=new Z,r=!0,a=e.slice(0,1)[0]-27-4;0>a&&(r=!1,a+=4);var o=e.slice(1,33),n=e.slice(33,65);return y.checkArgument(0===a||1===a||2===a||3===a,new Error("i must be 0, 1, 2, or 3")),y.checkArgument(32===o.length,new Error("r must be 32 bytes")),y.checkArgument(32===n.length,new Error("s must be 32 bytes")),t.compressed=r,t.i=a,t.r=i.fromBuffer(o),t.s=i.fromBuffer(n),t},Z.fromDER=function(e,t){var r=Z.parseDER(e,t),i=new Z;return i.r=r.r,i.s=r.s,i},Z.fromBuffer=Z.fromDER,Z.fromTxFormat=function(e){var t=e.readUInt8(e.length-1),r=e.slice(0,e.length-1),i=Z.fromDER(r,!1);return i.nhashtype=t,i},Z.fromString=function(e){var t=Buffer.from(e,"hex");return Z.fromDER(t)},Z.parseDER=function(e,r){y.checkArgument(O.isBuffer(e),"DER formatted signature should be a buffer"),t.isUndefined(r)&&(r=!0);var a=e[0];y.checkArgument(48===a,"Header byte should be 0x30");var o=e[1],n=e.slice(2).length;y.checkArgument(!r||o===n,"Length byte should length of what follows"),o=o<n?o:n;var s=e[2];y.checkArgument(2===s,"Integer byte for r should be 0x02");var u=e[3],c=e.slice(4,4+u),l=i.fromBuffer(c),h=0===e[4];y.checkArgument(u===c.length,"Length of r incorrect");var f=e[4+u+0];y.checkArgument(2===f,"Integer byte for s should be 0x02");var p=e[4+u+1],d=e.slice(4+u+2,4+u+2+p),m=i.fromBuffer(d),g=0===e[4+u+2+2];return y.checkArgument(p===d.length,"Length of s incorrect"),y.checkArgument(o===4+u+2+p-2,"Length of signature incorrect"),{header:a,length:o,rheader:s,rlength:u,rneg:h,rbuf:c,r:l,sheader:f,slength:p,sneg:g,sbuf:d,s:m}},Z.prototype.toCompact=function(e,t){if(e="number"==typeof e?e:this.i,t="boolean"==typeof t?t:this.compressed,0!==e&&1!==e&&2!==e&&3!==e)throw new Error("i must be equal to 0, 1, 2, or 3");var r=e+27+4;!1===t&&(r-=4);var i=Buffer.from([r]),a=this.r.toBuffer({size:32}),o=this.s.toBuffer({size:32});return Buffer.concat([i,a,o])},Z.prototype.toBuffer=function(){var e=this.r.toBuffer(),t=this.s.toBuffer(),r=!!(128&e[0]),i=!!(128&t[0]),a=r?Buffer.concat([Buffer.from([0]),e]):e,o=i?Buffer.concat([Buffer.from([0]),t]):t,n=a.length,s=o.length;return Buffer.concat([Buffer.from([48,2+n+2+s,2,n]),a,Buffer.from([2,s]),o])},Z.prototype.toDER=Z.prototype.toBuffer,Z.prototype.toString=function(){return this.toDER().toString("hex")},Z.isTxDER=function(e){if(9>e.length)return!1;if(73<e.length)return!1;if(48!==e[0])return!1;if(e[1]!==e.length-3)return!1;var t=e[3];if(5+t>=e.length)return!1;var r=e[5+t];if(t+r+7!==e.length)return!1;var i=e.slice(4);if(2!==e[2])return!1;if(0===t)return!1;if(128&i[0])return!1;if(1<t&&0===i[0]&&!(128&i[1]))return!1;var a=e.slice(6+t);return!(2!==e[6+t-2])&&0!==r&&!(128&a[0])&&(!(1<r)||0!==a[0]||128&a[1])},Z.prototype.hasLowS=function(){return!(this.s.lt(new i(1))||this.s.gt(new i("7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5D576E7357A4501DDFE92F46681B20A0","hex")))},Z.prototype.hasDefinedHashtype=function(){if(!k.isNaturalNumber(this.nhashtype))return!1;var e=this.nhashtype&~Z.SIGHASH_ANYONECANPAY;return!(e<Z.SIGHASH_ALL||e>Z.SIGHASH_SINGLE)},Z.prototype.toTxFormat=function(){var e=this.toDER(),t=Buffer.alloc(1);return t.writeUInt8(this.nhashtype,0),Buffer.concat([e,t])},Z.SIGHASH_ALL=1,Z.SIGHASH_NONE=2,Z.SIGHASH_SINGLE=3,Z.SIGHASH_FORKID=64,Z.SIGHASH_ANYONECANPAY=128;var X=function e(t){return this instanceof e?(this.chunks=[],O.isBuffer(t)?e.fromBuffer(t):t instanceof J?e.fromAddress(t):t instanceof e?e.fromBuffer(t.toBuffer()):"string"==typeof t?e.fromString(t):void(void 0!==t&&this.set(t))):new e(t)};X.prototype.set=function(e){return this.chunks=e.chunks||this.chunks,this},X.fromBuffer=function(e){var t=new X;t.chunks=[];for(var r=new G(e);!r.finished();)try{var i=r.readUInt8(),a=void 0,o=void 0;0<i&&i<W.OP_PUSHDATA1?(a=i,t.chunks.push({buf:r.read(a),len:a,opcodenum:i})):i===W.OP_PUSHDATA1?(a=r.readUInt8(),o=r.read(a),t.chunks.push({buf:o,len:a,opcodenum:i})):i===W.OP_PUSHDATA2?(a=r.readUInt16LE(),o=r.read(a),t.chunks.push({buf:o,len:a,opcodenum:i})):i===W.OP_PUSHDATA4?(a=r.readUInt32LE(),o=r.read(a),t.chunks.push({buf:o,len:a,opcodenum:i})):t.chunks.push({opcodenum:i})}catch(t){if(t instanceof RangeError)throw new v.Script.InvalidBuffer(e.toString("hex"));throw t}return t},X.prototype.toBuffer=function(){return this.chunks.reduce((e,t)=>(e.writeUInt8(t.opcodenum),t.buf&&(t.opcodenum<W.OP_PUSHDATA1?e.write(t.buf):t.opcodenum===W.OP_PUSHDATA1?(e.writeUInt8(t.len),e.write(t.buf)):t.opcodenum===W.OP_PUSHDATA2?(e.writeUInt16LE(t.len),e.write(t.buf)):t.opcodenum===W.OP_PUSHDATA4&&(e.writeUInt32LE(t.len),e.write(t.buf))),e),new Y).concat()},X.fromASM=function(e){var t=new X;t.chunks=[];for(var r=e.split(" "),i=0;i<r.length;){var a=W(r[i]).toNumber();if(void 0===a){var o=Buffer.from(r[i],"hex");t.chunks.push({buf:o,len:o.length,opcodenum:o.length}),i+=1}else a===W.OP_PUSHDATA1||a===W.OP_PUSHDATA2||a===W.OP_PUSHDATA4?(t.chunks.push({buf:Buffer.from(r[i+2],"hex"),len:parseInt(r[i+1],16),opcodenum:a}),i+=3):(t.chunks.push({opcodenum:a}),i+=1)}return t},X.fromHex=function(e){return new this(Buffer.from(e,"hex"))},X.fromString=function(e){if(k.isHexa(e)||0===e.length)return new this(Buffer.from(e,"hex"));var r=new this;r.chunks=[];for(var i=e.split(" "),a=0;a<i.length;){var o=i[a],n=W(o).toNumber();if(t.isUndefined(n)){if(!(0<(n=o.startsWith("0x")?parseInt(o,16):parseInt(o,10))&&n<W.OP_PUSHDATA1))throw new Error("Invalid script: ".concat(JSON.stringify(e)));r.chunks.push({buf:Buffer.from(i[a+1].slice(2),"hex"),len:n,opcodenum:n}),a+=2}else if(n===W.OP_PUSHDATA1||n===W.OP_PUSHDATA2||n===W.OP_PUSHDATA4){if("0x"!==i[a+2].slice(0,2))throw new Error("Pushdata data must start with 0x");r.chunks.push({buf:Buffer.from(i[a+2].slice(2),"hex"),len:parseInt(i[a+1],10),opcodenum:n}),a+=3}else r.chunks.push({opcodenum:n}),a+=1}return r},X.prototype._chunkToString=function(e,t){var{opcodenum:r}=e,i="asm"===t,a="";if(e.buf)(r===W.OP_PUSHDATA1||r===W.OP_PUSHDATA2||r===W.OP_PUSHDATA4)&&(a="".concat(a," ").concat(W(r).toString())),0<e.len&&(a=i?"".concat(a," ").concat(e.buf.toString("hex")):"".concat(a," ").concat(e.len," 0x").concat(e.buf.toString("hex")));else if(void 0!==W.reverseMap[r])a="".concat(a," ").concat(W(r).toString());else{var o=r.toString(16);0!=o.length%2&&(o="0".concat(o)),a=i?"".concat(a," ").concat(o):"".concat(a," 0x").concat(o)}return a},X.prototype.toASM=function(){return this.chunks.reduce((e,t)=>e+this._chunkToString(t,"asm"),"").substr(1)},X.prototype.toString=function(){return this.chunks.reduce((e,t)=>e+this._chunkToString(t),"").substr(1)},X.prototype.toHex=function(){return this.toBuffer().toString("hex")},X.prototype.inspect=function(){return"<Script: ".concat(this.toString(),">")},X.prototype.isPublicKeyHashOut=function(){return!(5!==this.chunks.length||this.chunks[0].opcodenum!==W.OP_DUP||this.chunks[1].opcodenum!==W.OP_HASH160||!this.chunks[2].buf||20!==this.chunks[2].buf.length||this.chunks[3].opcodenum!==W.OP_EQUALVERIFY||this.chunks[4].opcodenum!==W.OP_CHECKSIG)},X.prototype.isPublicKeyHashIn=function(){if(2===this.chunks.length){var e=this.chunks[0].buf,t=this.chunks[1].buf;if(e&&e.length&&48===e[0]&&t&&t.length){var r=t[0];if((4===r||6===r||7===r)&&65===t.length)return!0;if((3===r||2===r)&&33===t.length)return!0}}return!1},X.prototype.getPublicKey=function(){return y.checkState(this.isPublicKeyOut(),"Can't retrieve PublicKey from a non-PublicKey output"),this.chunks[0].buf},X.prototype.getPublicKeyHash=function(){return y.checkState(this.isPublicKeyHashOut(),"Can't retrieve PublicKeyHash from a non-PublicKeyHash output"),this.chunks[2].buf},X.prototype.isPublicKeyOut=function(){if(2===this.chunks.length&&this.chunks[0].buf&&this.chunks[0].buf.length&&this.chunks[1].opcodenum===W.OP_CHECKSIG){var e=this.chunks[0].buf,t=e[0],r=!1;if(4!==t&&6!==t&&7!==t||65!==e.length?(3===t||2===t)&&33===e.length&&(r=!0):r=!0,r)return q.isValid(e)}return!1},X.prototype.isPublicKeyIn=function(){if(1===this.chunks.length){var e=this.chunks[0].buf;if(e&&e.length&&48===e[0])return!0}return!1},X.prototype.isScriptHashOut=function(){var e=this.toBuffer();return 23===e.length&&e[0]===W.OP_HASH160&&20===e[1]&&e[e.length-1]===W.OP_EQUAL},X.prototype.isScriptHashIn=function(){if(1>=this.chunks.length)return!1;var e,t=this.chunks[this.chunks.length-1].buf;if(!t)return!1;try{e=X.fromBuffer(t)}catch(e){if(e instanceof v.Script.InvalidBuffer)return!1;throw e}return e.classify()!==X.types.UNKNOWN},X.prototype.isMultisigOut=function(){return 3<this.chunks.length&&W.isSmallIntOp(this.chunks[0].opcodenum)&&this.chunks.slice(1,this.chunks.length-2).every(e=>e.buf&&O.isBuffer(e.buf))&&W.isSmallIntOp(this.chunks[this.chunks.length-2].opcodenum)&&this.chunks[this.chunks.length-1].opcodenum===W.OP_CHECKMULTISIG},X.prototype.isMultisigIn=function(){return 2<=this.chunks.length&&0===this.chunks[0].opcodenum&&this.chunks.slice(1,this.chunks.length).every(e=>e.buf&&O.isBuffer(e.buf)&&Z.isTxDER(e.buf))},X.prototype.isDataOut=function(){return 1<=this.chunks.length&&this.chunks[0].opcodenum===W.OP_RETURN&&(1===this.chunks.length||2===this.chunks.length&&this.chunks[1].buf&&this.chunks[1].buf.length<=X.OP_RETURN_STANDARD_SIZE&&this.chunks[1].length===this.chunks.len)},X.prototype.getData=function(){if(this.isDataOut()||this.isScriptHashOut())return void 0===this.chunks[1]?Buffer.alloc(0):Buffer.from(this.chunks[1].buf);if(this.isPublicKeyHashOut())return Buffer.from(this.chunks[2].buf);throw new Error("Unrecognized script type to get data from")},X.prototype.isPushOnly=function(){return this.chunks.every(e=>e.opcodenum<=W.OP_16)},(X.types={}).UNKNOWN="Unknown",X.types.PUBKEY_OUT="Pay to public key",X.types.PUBKEY_IN="Spend from public key",X.types.PUBKEYHASH_OUT="Pay to public key hash",X.types.PUBKEYHASH_IN="Spend from public key hash",X.types.SCRIPTHASH_OUT="Pay to script hash",X.types.SCRIPTHASH_IN="Spend from script hash",X.types.MULTISIG_OUT="Pay to multisig",X.types.MULTISIG_IN="Spend from multisig",X.types.DATA_OUT="Data push",X.OP_RETURN_STANDARD_SIZE=80,X.prototype.classify=function(){if(this._isInput)return this.classifyInput();if(this._isOutput)return this.classifyOutput();var e=this.classifyOutput();return e===X.types.UNKNOWN?this.classifyInput():e},(X.outputIdentifiers={}).PUBKEY_OUT=X.prototype.isPublicKeyOut,X.outputIdentifiers.PUBKEYHASH_OUT=X.prototype.isPublicKeyHashOut,X.outputIdentifiers.MULTISIG_OUT=X.prototype.isMultisigOut,X.outputIdentifiers.SCRIPTHASH_OUT=X.prototype.isScriptHashOut,X.outputIdentifiers.DATA_OUT=X.prototype.isDataOut,X.prototype.classifyOutput=function(){for(var e=Object.keys(X.outputIdentifiers),t=0;t<e.length;t+=1)if(X.outputIdentifiers[e[t]].bind(this)())return X.types[e[t]];return X.types.UNKNOWN},(X.inputIdentifiers={}).PUBKEY_IN=X.prototype.isPublicKeyIn,X.inputIdentifiers.PUBKEYHASH_IN=X.prototype.isPublicKeyHashIn,X.inputIdentifiers.MULTISIG_IN=X.prototype.isMultisigIn,X.inputIdentifiers.SCRIPTHASH_IN=X.prototype.isScriptHashIn,X.prototype.classifyInput=function(){for(var e=Object.keys(X.inputIdentifiers),t=0;t<e.length;t+=1)if(X.inputIdentifiers[e[t]].bind(this)())return X.types[e[t]];return X.types.UNKNOWN},X.prototype.isStandard=function(){return this.classify()!==X.types.UNKNOWN},X.prototype.prepend=function(e){return this._addByType(e,!0),this},X.prototype.equals=function(e){if(y.checkState(e instanceof X,"Must provide another script"),this.chunks.length!==e.chunks.length)return!1;var t;for(t=0;t<this.chunks.length;t+=1){if(O.isBuffer(this.chunks[t].buf)&&!O.isBuffer(e.chunks[t].buf))return!1;if(O.isBuffer(this.chunks[t].buf)&&!O.equals(this.chunks[t].buf,e.chunks[t].buf))return!1;if(this.chunks[t].opcodenum!==e.chunks[t].opcodenum)return!1}return!0},X.prototype.add=function(e){return this._addByType(e,!1),this},X.prototype._addByType=function(e,t){if("string"==typeof e)this._addOpcode(e,t);else if("number"==typeof e)this._addOpcode(e,t);else if(e instanceof W)this._addOpcode(e,t);else if(O.isBuffer(e))this._addBuffer(e,t);else if(e instanceof X)this.chunks=this.chunks.concat(e.chunks);else{if("object"!=typeof e)throw new Error("Invalid script chunk");this._insertAtPosition(e,t)}},X.prototype._insertAtPosition=function(e,t){t?this.chunks.unshift(e):this.chunks.push(e)},X.prototype._addOpcode=function(e,t){var r;return r="number"==typeof e?e:e instanceof W?e.toNumber():W(e).toNumber(),this._insertAtPosition({opcodenum:r},t),this},X.prototype._addBuffer=function(e,t){var r,i=e.length;if(0<=i&&i<W.OP_PUSHDATA1)r=i;else if(256>i)r=W.OP_PUSHDATA1;else if(65536>i)r=W.OP_PUSHDATA2;else{if(!(4294967296>i))throw new Error("You can't push that much data");r=W.OP_PUSHDATA4}return this._insertAtPosition({buf:e,len:i,opcodenum:r},t),this},X.prototype.removeCodeseparators=function(){return this.chunks=this.chunks.filter(e=>e.opcodenum!==W.OP_CODESEPARATOR),this},X.buildMultisigOut=function(e,r,i){y.checkArgument(r<=e.length,"Number of required signatures must be less than or equal to the number of public keys"),i=i||{};var a=new this;a.add(W.smallInt(r));var o=e=e.map(q);return i.noSorting||(o=t.sortBy(e,e=>e.toString("hex"))),o.forEach(e=>a.add(e.toBuffer())),a.add(W.smallInt(e.length)),a.add(W.OP_CHECKMULTISIG),a},X.buildMultisigIn=function(e,r,i,a){y.checkArgument(t.isArray(e)),y.checkArgument(t.isNumber(r)),y.checkArgument(t.isArray(i)),a=a||{};var o=new this;return o.add(W.OP_0),i.forEach(e=>{y.checkArgument(O.isBuffer(e),"Signatures must be an array of Buffers"),o.add(e)}),o},X.buildP2SHMultisigIn=function(e,r,i,a){y.checkArgument(t.isArray(e)),y.checkArgument(t.isNumber(r)),y.checkArgument(t.isArray(i)),a=a||{};var o=new this;return o.add(W.OP_0),i.forEach(e=>{y.checkArgument(O.isBuffer(e),"Signatures must be an array of Buffers"),o.add(e)}),o.add((a.cachedMultisig||X.buildMultisigOut(e,r,a)).toBuffer()),o},X.buildPublicKeyHashOut=function(e){y.checkArgument(!t.isUndefined(e)),y.checkArgument(e instanceof q||e instanceof J||t.isString(e)),e instanceof q?e=e.toAddress():t.isString(e)&&(e=new J(e));var r=new this;return r.add(W.OP_DUP).add(W.OP_HASH160).add(e.hashBuffer).add(W.OP_EQUALVERIFY).add(W.OP_CHECKSIG),r._network=e.network,r},X.buildPublicKeyOut=function(e){y.checkArgument(e instanceof q);var t=new this;return t.add(e.toBuffer()).add(W.OP_CHECKSIG),t},X.buildDataOut=function(e,r){y.checkArgument(t.isUndefined(e)||t.isString(e)||O.isBuffer(e)),t.isString(e)&&(e=Buffer.from(e,r));var i=new this;return i.add(W.OP_RETURN),t.isUndefined(e)||i.add(e),i},X.buildScriptHashOut=function(e){y.checkArgument(e instanceof X||e instanceof J&&e.isPayToScriptHash());var t=(new this).add(W.OP_HASH160).add(e instanceof J?e.hashBuffer:P.sha256ripemd160(e.toBuffer())).add(W.OP_EQUAL);return t._network=e._network||e.network,t},X.buildPublicKeyIn=function(e,r){y.checkArgument(e instanceof Z||O.isBuffer(e)),y.checkArgument(t.isUndefined(r)||t.isNumber(r)),e instanceof Z&&(e=e.toBuffer());var i=new this;return i.add(O.concat([e,O.integerAsSingleByteBuffer(r||Z.SIGHASH_ALL)])),i},X.buildPublicKeyHashIn=function(e,r,i){return y.checkArgument(r instanceof Z||O.isBuffer(r)),y.checkArgument(t.isUndefined(i)||t.isNumber(i)),r instanceof Z&&(r=r.toBuffer()),(new this).add(O.concat([r,O.integerAsSingleByteBuffer(i||Z.SIGHASH_ALL)])).add(new q(e).toBuffer())},X.empty=function(){return new this},X.prototype.toScriptHashOut=function(){return X.buildScriptHashOut(this)},X.fromAddress=function(e){if((e=new J(e)).isPayToScriptHash())return X.buildScriptHashOut(e);if(e.isPayToPublicKeyHash())return X.buildPublicKeyHashOut(e);throw new v.Script.UnrecognizedAddress(e)},X.prototype.getAddressInfo=function(){if(this._isInput)return this._getInputAddressInfo();if(this._isOutput)return this._getOutputAddressInfo();var e=this._getOutputAddressInfo();return e||this._getInputAddressInfo()},X.prototype._getOutputAddressInfo=function(){var e={};if(this.isScriptHashOut())e.hashBuffer=this.getData(),e.type=J.PayToScriptHash;else{if(!this.isPublicKeyHashOut())return!1;e.hashBuffer=this.getData(),e.type=J.PayToPublicKeyHash}return e},X.prototype._getInputAddressInfo=function(){var e={};if(this.isPublicKeyHashIn())e.hashBuffer=P.sha256ripemd160(this.chunks[1].buf),e.type=J.PayToPublicKeyHash;else{if(!this.isScriptHashIn())return!1;e.hashBuffer=P.sha256ripemd160(this.chunks[this.chunks.length-1].buf),e.type=J.PayToScriptHash}return e},X.prototype.toAddress=function(e){var t=this.getAddressInfo();return!!t&&(t.network=H.get(e)||this._network||H.defaultNetwork,new J(t))},X.prototype.findAndDelete=function(e){for(var t=e.toBuffer().toString("hex"),r=0;r<this.chunks.length;r+=1){t===X({chunks:[this.chunks[r]]}).toBuffer().toString("hex")&&this.chunks.splice(r,1)}return this},X.prototype.checkMinimalPush=function(e){var t=this.chunks[e],{buf:r}=t,{opcodenum:i}=t;return!(r&&(0===r.length?i!==W.OP_0:1===r.length&&1<=r[0]&&16>=r[0]?i!==W.OP_1+(r[0]-1):1===r.length&&129===r[0]?i!==W.OP_1NEGATE:75>=r.length?i!==r.length:255>=r.length?i!==W.OP_PUSHDATA1:65535>=r.length&&i!==W.OP_PUSHDATA2))},X.prototype._decodeOP_N=function(e){if(e===W.OP_0)return 0;if(e>=W.OP_1&&e<=W.OP_16)return e-(W.OP_1-1);throw new Error("Invalid opcode: ".concat(JSON.stringify(e)))},X.prototype.getSignatureOperationsCount=function(e){e=!!t.isUndefined(e)||e;var r=this,i=0,a=W.OP_INVALIDOPCODE;return r.chunks.forEach(t=>{var o=t.opcodenum;o===W.OP_CHECKSIG||o===W.OP_CHECKSIGVERIFY?i+=1:(o===W.OP_CHECKMULTISIG||o===W.OP_CHECKMULTISIGVERIFY)&&(e&&a>=W.OP_1&&a<=W.OP_16?i+=r._decodeOP_N(a):i+=20),a=o}),i};class J{constructor(e,r,i){if(!(this instanceof J))return new J(e,r,i);if(t.isArray(e)&&t.isNumber(r))return J.createMultisig(e,r,i);if(e instanceof J)return e;if(y.checkArgument(e,"Address data required in first argument.","guide/address.html"),r&&!H.get(r))throw new TypeError('Second argument must be "livenet" or "testnet".');if(i&&i!==J.PayToPublicKeyHash&&i!==J.PayToScriptHash)throw new TypeError('Third argument must be "pubkeyhash" or "scripthash".');var a=J._classifyArguments(e,r,i);a.network=a.network||H.get(r)||H.defaultNetwork,a.type=a.type||i||J.PayToPublicKeyHash,k.defineImmutable(this,{hashBuffer:a.hashBuffer,network:a.network,type:a.type})}static _classifyArguments(e,r,i){if((e instanceof Buffer||e instanceof Uint8Array)&&20===e.length)return J._transformHash(e);if((e instanceof Buffer||e instanceof Uint8Array)&&21===e.length)return J._transformBuffer(e,r,i);if(e instanceof q)return J._transformPublicKey(e);if(e instanceof X)return J._transformScript(e,r);if("string"==typeof e)return J._transformString(e,r,i,J.DefaultFormat);if(t.isObject(e))return J._transformObject(e);throw new TypeError("First argument is an unrecognized data format.")}static _transformHash(e){var t={};if(!(e instanceof Buffer||e instanceof Uint8Array))throw new TypeError("Address supplied is not a buffer.");if(20!==e.length)throw new TypeError("Address hashbuffers must be exactly 20 bytes.");return t.hashBuffer=e,t}static _transformObject(e){return y.checkArgument(e.hash||e.hashBuffer,"Must provide a `hash` or `hashBuffer` property"),y.checkArgument(e.type,"Must provide a `type` property"),{hashBuffer:e.hash?Buffer.from(e.hash,"hex"):e.hashBuffer,network:H.get(e.network)||H.defaultNetwork,type:e.type}}static _classifyFromVersion(e){var t={},r=H.get(e[0],"pubkeyhash"),i=H.get(e[0],"scripthash");return r?(t.network=r,t.type=this.PayToPublicKeyHash):i&&(t.network=i,t.type=this.PayToScriptHash),t}static _transformBuffer(e,t,r){var i={};if(!(e instanceof Buffer||e instanceof Uint8Array))throw new TypeError("Address supplied is not a buffer.");if(21!==e.length)throw new TypeError("Address buffers must be exactly 21 bytes.");t=H.get(t);var a=J._classifyFromVersion(e);if(!a.network||t&&t!==a.network)throw new TypeError("Address has mismatched network type.");if(!a.type||r&&r!==a.type)throw new TypeError("Address has mismatched type.");return i.hashBuffer=e.slice(1),i.network=a.network,i.type=a.type,i}static _transformPublicKey(e){var t={};if(!(e instanceof q))throw new TypeError("Address must be an instance of PublicKey.");return t.hashBuffer=P.sha256ripemd160(e.toBuffer()),t.type=this.PayToPublicKeyHash,t}static _transformScript(e,t){y.checkArgument(e instanceof X,"script must be a Script instance");var r=e.getAddressInfo(t);if(!r)throw new v.Script.CantDeriveAddress(e);return r}static createMultisig(e,t,r){return r=r||e[0].network||H.defaultNetwork,J.payingTo(X.buildMultisigOut(e,t),r)}static _transformString(e,t,r,i){if("string"!=typeof e)throw new TypeError("data parameter supplied is not a string.");if(e=e.trim(),i===this.LegacyFormat)return this._transformStringLegacy(e,t,r);if(i===this.BitpayFormat)return this._transformStringBitpay(e,t,r);if(i===this.CashAddrFormat)return this._transformStringCashAddr(e,t,r);throw new TypeError("Unrecognized address format.")}static _transformStringLegacy(e,t,r){var i=E.decode(e);return this._transformBuffer(i,t,r)}static _transformStringBitpay(e,t,r){var i=E.decode(e);return 28===i[0]?i[0]=0:40===i[0]&&(i[0]=5),this._transformBuffer(i,t,r)}static _transformStringCashAddr(e,t,r){"string"==typeof t||(t=t.toString());var i=o.decode(e);y.checkArgument(!t||"livenet"===t&&"bitcoincash"===i.prefix||"testnet"===t&&"bchtest"===i.prefix,"Invalid network."),y.checkArgument(!r||r===this.PayToPublicKeyHash&&"P2PKH"===i.type||r===this.PayToScriptHash&&"P2SH"===i.type,"Invalid type."),t=H.get(t||("bitcoincash"===i.prefix?"livenet":"testnet")),r=r||("P2PKH"===i.type?this.PayToPublicKeyHash:this.PayToScriptHash);var a=Buffer.from([t[r]]),n=Buffer.from(i.hash),s=Buffer.concat([a,n]);return this._transformBuffer(s,t,r)}static fromPublicKey(e,t){var r=this._transformPublicKey(e);return t=t||H.defaultNetwork,new J(r.hashBuffer,t,r.type)}static fromPublicKeyHash(e,t){var r=this._transformHash(e);return new J(r.hashBuffer,t,this.PayToPublicKeyHash)}static fromScriptHash(e,t){y.checkArgument(e,"hash parameter is required");var r=this._transformHash(e);return new J(r.hashBuffer,t,this.PayToScriptHash)}static payingTo(e,t){return y.checkArgument(e,"script is required"),y.checkArgument(e instanceof X,"script must be instance of Script"),this.fromScriptHash(P.sha256ripemd160(e.toBuffer()),t)}static fromScript(e,t){y.checkArgument(e instanceof X,"script must be a Script instance");var r=this._transformScript(e,t);return new J(r.hashBuffer,t,r.type)}static fromBuffer(e,t,r){var i=this._transformBuffer(e,t,r);return new J(i.hashBuffer,i.network,i.type)}static fromString(e,t,r,i){i=i||this.DefaultFormat;var a=this._transformString(e,t,r,i);return new J(a.hashBuffer,a.network,a.type)}static fromObject(e){y.checkState(k.isHexa(e.hash),'Unexpected hash, "'.concat(e.hash,'", expected to be hex.'));var t=Buffer.from(e.hash,"hex");return new J(t,e.network,e.type)}static getValidationError(e,t,r){var i;try{new J(e,t,r)}catch(e){i=e}return i}static isValid(e,t,r){return!this.getValidationError(e,t,r)}isPayToPublicKeyHash(){return this.type===J.PayToPublicKeyHash}isPayToScriptHash(){return this.type===J.PayToScriptHash}toBuffer(){var e=Buffer.from([this.network[this.type]]);return Buffer.concat([e,this.hashBuffer])}toObject(){return{hash:this.hashBuffer.toString("hex"),type:this.type,network:this.network.toString()}}toJSON(){return this.toObject()}toString(e){if((e=e||J.DefaultFormat)===J.LegacyFormat)return this._toStringLegacy();if(e===J.BitpayFormat)return this._toStringBitpay();if(e===J.CashAddrFormat)return this._toStringCashAddr();throw new TypeError("Unrecognized address format.")}_toStringLegacy(){return E.encode(this.toBuffer())}_toStringBitpay(){var e=this.toBuffer();return"livenet"===this.network.toString()&&(this.type===J.PayToPublicKeyHash?e[0]=28:this.type===J.PayToScriptHash&&(e[0]=40)),E.encode(e)}_toStringCashAddr(){var e="livenet"===this.network.toString()?"bitcoincash":"bchtest",t=this.type===J.PayToPublicKeyHash?"P2PKH":"P2SH";return o.encode(e,t,this.hashBuffer)}inspect(){return"<Address: ".concat(this.toString(),", type: ").concat(this.type,", network: ").concat(this.network,">")}}J.LegacyFormat="legacy",J.BitpayFormat="bitpay",J.CashAddrFormat="cashaddr",J.DefaultFormat=J.LegacyFormat,J.PayToPublicKeyHash="pubkeyhash",J.PayToScriptHash="scripthash";class Q{constructor(e){if(!(this instanceof Q))return new Q(e);var t=Q._from(e);return this.version=t.version,this.prevHash=t.prevHash,this.merkleRoot=t.merkleRoot,this.time=t.time,this.timestamp=t.time,this.bits=t.bits,this.nonce=t.nonce,t.hash&&y.checkState(this.hash===t.hash,"Argument object hash does not match block hash."),this}static _from(e){var r={};if(O.isBuffer(e))r=Q._fromBufferReader(G(e));else{if(!t.isObject(e))throw new TypeError("Unrecognized argument for BlockHeader");r=Q._fromObject(e)}return r}static _fromObject(e){y.checkArgument(e,"data is required");var{prevHash:r}=e,{merkleRoot:i}=e;return t.isString(e.prevHash)&&(r=O.reverse(Buffer.from(e.prevHash,"hex"))),t.isString(e.merkleRoot)&&(i=O.reverse(Buffer.from(e.merkleRoot,"hex"))),{hash:e.hash,version:e.version,prevHash:r,merkleRoot:i,time:e.time,timestamp:e.time,bits:e.bits,nonce:e.nonce}}static fromObject(e){var t=this._fromObject(e);return new Q(t)}static fromRawBlock(e){O.isBuffer(e)||(e=Buffer.from(e,"binary"));var t=G(e);t.pos=Q.Constants.START_OF_HEADER;var r=this._fromBufferReader(t);return new Q(r)}static fromBuffer(e){var t=this._fromBufferReader(G(e));return new Q(t)}static fromString(e){var t=Buffer.from(e,"hex");return this.fromBuffer(t)}static _fromBufferReader(e){return{version:e.readInt32LE(),prevHash:e.read(32),merkleRoot:e.read(32),time:e.readUInt32LE(),bits:e.readUInt32LE(),nonce:e.readUInt32LE()}}static fromBufferReader(e){var t=this._fromBufferReader(e);return new Q(t)}toJSON(){return{hash:this.hash,version:this.version,prevHash:O.reverse(this.prevHash).toString("hex"),merkleRoot:O.reverse(this.merkleRoot).toString("hex"),time:this.time,bits:this.bits,nonce:this.nonce}}toObject(){return this.toJSON()}toBuffer(){return this.toBufferWriter().concat()}toString(){return this.toBuffer().toString("hex")}toBufferWriter(e){return e||(e=new Y),e.writeInt32LE(this.version),e.write(this.prevHash),e.write(this.merkleRoot),e.writeUInt32LE(this.time),e.writeUInt32LE(this.bits),e.writeUInt32LE(this.nonce),e}getTargetDifficulty(e){e=e||this.bits;for(var t=new i(16777215&e),r=8*((e>>>24)-3);0<r;)t=t.mul(new i(2)),r-=1;return t}getDifficulty(){var e=this.getTargetDifficulty(486604799).mul(new i(1e8)),t=this.getTargetDifficulty(),r=e.div(t).toString(10),a=r.length-8,o="".concat(r.slice(0,a)),n="".concat(r.slice(a));return r="".concat(o,".").concat(n),parseFloat(r)}_getHash(){var e=this.toBuffer();return P.sha256sha256(e)}validTimestamp(){var e=Math.round((new Date).getTime()/1e3);return!(this.time>e+Q.Constants.MAX_TIME_OFFSET)}validProofOfWork(){var e=new i(this.id,"hex"),t=this.getTargetDifficulty();return!(0<e.cmp(t))}inspect(){return"<BlockHeader ".concat(this.id,">")}}var $={configurable:!1,enumerable:!0,get(){return this._id||(this._id=G(this._getHash()).readReverse().toString("hex")),this._id},set:t.noop};Object.defineProperty(Q.prototype,"id",$),Object.defineProperty(Q.prototype,"hash",$),Q.Constants={START_OF_HEADER:8,MAX_TIME_OFFSET:7200,LARGEST_HASH:new i("10000000000000000000000000000000000000000000000000000000000000000","hex")};class ee{constructor(e){if(!t.isObject(e))throw new TypeError("Unrecognized argument for Output");var r;this.satoshis=e.satoshis,O.isBuffer(e.script)?this._scriptBuffer=e.script:(t.isString(e.script)&&k.isHexa(e.script)?r=Buffer.from(e.script,"hex"):({script:r}=e),this.setScript(r))}get script(){return this._script||this.setScriptFromBuffer(this._scriptBuffer),this._script}get satoshis(){return this._satoshis}set satoshis(e){e instanceof i?(this._satoshisBN=e,this._satoshis=e.toNumber()):t.isString(e)?(this._satoshis=parseInt(e,10),this._satoshisBN=i.fromNumber(this._satoshis)):(y.checkArgument(k.isNaturalNumber(e),"Output satoshis is not a natural number"),this._satoshisBN=i.fromNumber(e),this._satoshis=e),y.checkState(k.isNaturalNumber(this._satoshis),"Output satoshis is not a natural number")}get satoshisBN(){return this._satoshisBN}set satoshisBN(e){this._satoshisBN=e,this._satoshis=e.toNumber(),y.checkState(k.isNaturalNumber(this._satoshis),"Output satoshis is not a natural number")}static fromObject(e){return new ee(e)}static fromBufferReader(e){var t={satoshis:e.readUInt64LEBN()},r=e.readVarintNum();return t.script=0===r?Buffer.from([]):e.read(r),new ee(t)}invalidSatoshis(){return this._satoshis>9007199254740991?"transaction txout satoshis greater than max safe integer":this._satoshis===this._satoshisBN.toNumber()?!!(0>this._satoshis)&&"transaction txout negative":"transaction txout satoshis has corrupted value"}toJSON(){return{satoshis:this.satoshis,script:this._scriptBuffer.toString("hex")}}toObject(){return this.toJSON()}setScriptFromBuffer(e){this._scriptBuffer=e;try{this._script=X.fromBuffer(this._scriptBuffer),this._script._isOutput=!0}catch(e){if(!(e instanceof v.Script.InvalidBuffer))throw e;this._script=null}}setScript(e){if(e instanceof X)this._scriptBuffer=e.toBuffer(),this._script=e,this._script._isOutput=!0;else if(t.isString(e))this._script=X.fromString(e),this._scriptBuffer=this._script.toBuffer(),this._script._isOutput=!0;else{if(!O.isBuffer(e))throw new TypeError("Invalid argument type: script");this.setScriptFromBuffer(e)}return this}inspect(){var e;return e=this.script?this.script.inspect():this._scriptBuffer.toString("hex"),"<Output (".concat(this.satoshis," sats) ").concat(e,">")}toBufferWriter(e){e||(e=new Y),e.writeUInt64LEBN(this._satoshisBN);var t=this._scriptBuffer;return e.writeVarintNum(t.length),e.write(t),e}}var te=function e(t){return this instanceof e?void(t&&this.set(t)):new e(t)};te.prototype.set=function(e){return this.hashbuf=e.hashbuf||this.hashbuf,this.endian=e.endian||this.endian,this.privkey=e.privkey||this.privkey,this.pubkey=e.pubkey||(this.privkey?this.privkey.publicKey:this.pubkey),this.sig=e.sig||this.sig,this.k=e.k||this.k,this.verified=e.verified||this.verified,this},te.prototype.privkey2pubkey=function(){this.pubkey=this.privkey.toPublicKey()},te.prototype.calci=function(){for(var e=0;4>e;e+=1){this.sig.i=e;try{if(this.toPublicKey().point.eq(this.pubkey.point))return this.sig.compressed=this.pubkey.compressed,this}catch(e){console.error(e)}}throw this.sig.i=void 0,new Error("Unable to find valid recovery factor")},te.fromString=function(e){var t=JSON.parse(e);return new te(t)},te.prototype.randomK=function(){var e,t=j.getN();do{e=i.fromBuffer(M.getRandomBuffer(32))}while(!e.lt(t)||!e.gt(i.Zero));return this.k=e,this},te.prototype.deterministicK=function(e){t.isUndefined(e)&&(e=0);var r=Buffer.alloc(32);r.fill(1);var a=Buffer.alloc(32);a.fill(0);var o=this.privkey.bn.toBuffer({size:32}),n="little"===this.endian?O.reverse(this.hashbuf):this.hashbuf;a=P.sha256hmac(Buffer.concat([r,Buffer.from([0]),o,n]),a),r=P.sha256hmac(r,a),a=P.sha256hmac(Buffer.concat([r,Buffer.from([1]),o,n]),a),r=P.sha256hmac(r,a),r=P.sha256hmac(r,a);for(var s=i.fromBuffer(r),u=j.getN(),c=0;c<e||!s.lt(u)||!s.gt(i.Zero);c+=1)a=P.sha256hmac(Buffer.concat([r,Buffer.from([0])]),a),r=P.sha256hmac(r,a),r=P.sha256hmac(r,a),s=i.fromBuffer(r);return this.k=s,this},te.prototype.toPublicKey=function(){var{i:e}=this.sig;y.checkArgument(0===e||1===e||2===e||3===e,"i must be equal to 0, 1, 2, or 3");var t=i.fromBuffer(this.hashbuf),{r:r}=this.sig,{s:a}=this.sig,o=j.getN(),n=j.getG(),s=e>>1?r.add(o):r,u=j.fromX(1&e,s);if(!u.mul(o).isInfinity())throw new Error("nR is not a valid curve point");var c=t.neg().umod(o),l=r.invm(o),h=u.mul(a).add(n.mul(c)).mul(l);return q.fromPoint(h,this.sig.compressed)},te.prototype.sigError=function(){if(!O.isBuffer(this.hashbuf)||32!==this.hashbuf.length)return"hashbuf must be a 32 byte buffer";var{r:e}=this.sig,{s:t}=this.sig;if(!(e.gt(i.Zero)&&e.lt(j.getN())&&t.gt(i.Zero)&&t.lt(j.getN())))return"r and s not in range";var r=i.fromBuffer(this.hashbuf,this.endian?{endian:this.endian}:void 0),a=j.getN(),o=t.invm(a),n=o.mul(r).umod(a),s=o.mul(e).umod(a),u=j.getG().mulAdd(n,this.pubkey.point,s);return u.isInfinity()?"p is infinity":0!==u.getX().umod(a).cmp(e)&&"Invalid signature"},te.toLowS=function(e){return e.gt(i.fromBuffer(Buffer.from("7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5D576E7357A4501DDFE92F46681B20A0","hex")))&&(e=j.getN().sub(e)),e},te.prototype._findSignature=function(e,t){var r,a,o=j.getN(),n=j.getG(),s=0;do{(!this.k||0<s)&&this.deterministicK(s),s+=1;var{k:u}=this;r=n.mul(u).x.umod(o),a=u.invm(o).mul(t.add(e.mul(r))).umod(o)}while(0>=r.cmp(i.Zero)||0>=a.cmp(i.Zero));return{s:a=te.toLowS(a),r:r}},te.prototype.sign=function(){var{hashbuf:e}=this,{privkey:t}=this,r=t.bn;y.checkState(e&&t&&r,"invalid parameters"),y.checkState(O.isBuffer(e),"hashbuf must be a buffer"),y.checkState(32===e.length,"hashbuf must be 32 bytes");var a=i.fromBuffer(e,this.endian?{endian:this.endian}:void 0),o=this._findSignature(r,a);return o.compressed=this.pubkey.compressed,this.sig=new Z(o),this},te.prototype.signRandomK=function(){return this.randomK(),this.sign()},te.prototype.toString=function(){var e={};return this.hashbuf&&(e.hashbuf=this.hashbuf.toString("hex")),this.privkey&&(e.privkey=this.privkey.toString()),this.pubkey&&(e.pubkey=this.pubkey.toString()),this.sig&&(e.sig=this.sig.toString()),this.k&&(e.k=this.k.toString()),JSON.stringify(e)},te.prototype.verify=function(){return this.verified=!this.sigError(),this},te.sign=function(e,t,r){return te().set({hashbuf:e,endian:r,privkey:t}).sign().sig},te.verify=function(e,t,r,i){return te().set({hashbuf:e,endian:i,sig:t,pubkey:r}).verify().verified};class re{static sighashForForkId(e,r,a,o,n){function s(e,r){var i=new Y;t.isUndefined(r)?t.each(e.outputs,e=>{e.toBufferWriter(i)}):e.outputs[r].toBufferWriter(i);var a=i.toBuffer();return P.sha256sha256(a)}var u=e.inputs[a];y.checkArgument(n instanceof i,"For ForkId=0 signatures, satoshis or complete input must be provided");var c=O.emptyBuffer(32),l=O.emptyBuffer(32),h=O.emptyBuffer(32);r&Z.SIGHASH_ANYONECANPAY||(c=function(e){var r=new Y;t.each(e.inputs,e=>{r.writeReverse(e.prevTxId),r.writeUInt32LE(e.outputIndex)});var i=r.toBuffer();return P.sha256sha256(i)}(e)),r&Z.SIGHASH_ANYONECANPAY||(31&r)===Z.SIGHASH_SINGLE||(31&r)===Z.SIGHASH_NONE||(l=function(e){var r=new Y;t.each(e.inputs,e=>{r.writeUInt32LE(e.sequenceNumber)});var i=r.toBuffer();return P.sha256sha256(i)}(e)),(31&r)!==Z.SIGHASH_SINGLE&&(31&r)!==Z.SIGHASH_NONE?h=s(e):(31&r)===Z.SIGHASH_SINGLE&&a<e.outputs.length&&(h=s(e,a));var f=new Y;f.writeInt32LE(e.version),f.write(c),f.write(l),f.writeReverse(u.prevTxId),f.writeUInt32LE(u.outputIndex),f.writeVarintNum(o.toBuffer().length),f.write(o.toBuffer()),f.writeUInt64LEBN(n);var{sequenceNumber:p}=u;f.writeUInt32LE(p),f.write(h),f.writeUInt32LE(e.nLockTime),f.writeUInt32LE(r>>>0);var d=f.toBuffer(),m=P.sha256sha256(d);return m=new G(m).readReverse()}static sighash(e,t,r,a,o){var n,s=pe.shallowCopy(e);if(a=new X(a),t&Z.SIGHASH_FORKID)return re.sighashForForkId(s,t,r,a,o);for(a.removeCodeseparators(),n=0;n<s.inputs.length;n+=1)s.inputs[n]=new ie(s.inputs[n]).setScript(X.empty());if(s.inputs[r]=new ie(s.inputs[r]).setScript(a),(31&t)===Z.SIGHASH_NONE||(31&t)===Z.SIGHASH_SINGLE)for(n=0;n<s.inputs.length;n+=1)n!==r&&(s.inputs[n].sequenceNumber=0);if((31&t)===Z.SIGHASH_NONE)s.outputs=[];else if((31&t)===Z.SIGHASH_SINGLE){if(r>=s.outputs.length)return Buffer.from("0000000000000000000000000000000000000000000000000000000000000001","hex");for(s.outputs.length=r+1,n=0;n<r;n+=1)s.outputs[n]=new ee({satoshis:i.fromBuffer(Buffer.from("ffffffffffffffff","hex")),script:X.empty()})}t&Z.SIGHASH_ANYONECANPAY&&(s.inputs=[s.inputs[r]]);var u=(new Y).write(s.toBuffer()).writeInt32LE(t).toBuffer(),c=P.sha256sha256(u);return c=new G(c).readReverse()}static sign(e,t,r,i,a,o){var n=re.sighash(e,r,i,a,o);return te.sign(n,t,"little").set({nhashtype:r})}static verify(e,r,i,a,o,n){y.checkArgument(!t.isUndefined(e)),y.checkArgument(!t.isUndefined(r)&&!t.isUndefined(r.nhashtype));var s=re.sighash(e,r.nhashtype,a,o,n);return te.verify(s,r,i,"little")}}class ie{constructor(e){return this instanceof ie?e?this._fromObject(e):void 0:new ie(e)}get script(){return this.isNull()?null:(this._script||(this._script=new X(this._scriptBuffer),this._script._isInput=!0),this._script)}static fromObject(e){return y.checkArgument(null!==e&&"object"==typeof e),(new ie)._fromObject(e)}_fromObject(e){if(void 0===e.script&&void 0===e.scriptBuffer)throw new v.Transaction.Input.MissingScript;return this.prevTxId="string"==typeof e.prevTxId&&k.isHexa(e.prevTxId)?Buffer.from(e.prevTxId,"hex"):e.prevTxId,e.output&&(this.output=e.output instanceof ee?e.output:new ee(e.output)),this.outputIndex=void 0===e.outputIndex?e.txoutnum:e.outputIndex,this.sequenceNumber=void 0===e.sequenceNumber?void 0===e.seqnum?4294967295:e.seqnum:e.sequenceNumber,this.setScript(e.scriptBuffer||e.script),this}toJSON(){var e={prevTxId:this.prevTxId.toString("hex"),outputIndex:this.outputIndex,sequenceNumber:this.sequenceNumber,script:this._scriptBuffer.toString("hex")};return this.script&&(e.scriptString=this.script.toString()),this.output&&(e.output=this.output.toObject()),e}toObject(){return this.toJSON()}static fromBufferReader(e){var t=new ie;return t.prevTxId=e.readReverse(32),t.outputIndex=e.readUInt32LE(),t._scriptBuffer=e.readVarLengthBuffer(),t.sequenceNumber=e.readUInt32LE(),t}toBufferWriter(e){(e=e||new Y).writeReverse(this.prevTxId),e.writeUInt32LE(this.outputIndex);var t=this._scriptBuffer;return e.writeVarintNum(t.length),e.write(t),e.writeUInt32LE(this.sequenceNumber),e}setScript(e){if(this._script=null,e instanceof X)this._script=e,this._script._isInput=!0,this._scriptBuffer=e.toBuffer();else if(k.isHexa(e))this._scriptBuffer=Buffer.from(e,"hex");else if("string"==typeof e)this._script=new X(e),this._script._isInput=!0,this._scriptBuffer=this._script.toBuffer();else{if(!O.isBuffer(e))throw new TypeError("Invalid argument type: script");this._scriptBuffer=Buffer.from(e)}return this}getSignatures(){throw new v.AbstractMethodInvoked("".concat("Trying to sign unsupported output type (only P2PKH and P2SH multisig inputs are supported) for input: ").concat(JSON.stringify(this)))}isFullySigned(){throw new v.AbstractMethodInvoked("Input#isFullySigned")}isFinal(){return 4294967295!==this.sequenceNumber}addSignature(){throw new v.AbstractMethodInvoked("Input#addSignature")}clearSignatures(){throw new v.AbstractMethodInvoked("Input#clearSignatures")}isValidSignature(e,t){return t.signature.nhashtype=t.sigtype,re.verify(e,t.signature,t.publicKey,t.inputIndex,this.output.script,this.output.satoshisBN)}isNull(){return"0000000000000000000000000000000000000000000000000000000000000000"===this.prevTxId.toString("hex")&&4294967295===this.outputIndex}_estimateSize(){return this.toBufferWriter().toBuffer().length}}ie.MAXINT=4294967295,ie.DEFAULT_SEQNUMBER=4294967295,ie.DEFAULT_LOCKTIME_SEQNUMBER=4294967294,ie.DEFAULT_RBF_SEQNUMBER=4294967293;class ae extends Z{constructor(e){if(super(e),e instanceof ae)return e;if(t.isObject(e))return this._fromObject(e);throw new v.InvalidArgument("TransactionSignatures must be instantiated from an object")}_fromObject(e){return ae._checkObjectArgs(e),this.publicKey=new q(e.publicKey),this.prevTxId=O.isBuffer(e.prevTxId)?e.prevTxId:Buffer.from(e.prevTxId,"hex"),this.outputIndex=e.outputIndex,this.inputIndex=e.inputIndex,this.signature=e.signature instanceof Z?e.signature:O.isBuffer(e.signature)?Z.fromBuffer(e.signature):Z.fromString(e.signature),this.sigtype=e.sigtype,this}static _checkObjectArgs(e){y.checkArgument(q(e.publicKey),"publicKey"),y.checkArgument(!t.isUndefined(e.inputIndex),"inputIndex"),y.checkArgument(!t.isUndefined(e.outputIndex),"outputIndex"),y.checkState(t.isNumber(e.inputIndex),"inputIndex must be a number"),y.checkState(t.isNumber(e.outputIndex),"outputIndex must be a number"),y.checkArgument(e.signature,"signature"),y.checkArgument(e.prevTxId,"prevTxId"),y.checkState(e.signature instanceof Z||O.isBuffer(e.signature)||k.isHexa(e.signature),"signature must be a buffer or hexa value"),y.checkState(O.isBuffer(e.prevTxId)||k.isHexa(e.prevTxId),"prevTxId must be a buffer or hexa value"),y.checkArgument(e.sigtype,"sigtype"),y.checkState(t.isNumber(e.sigtype),"sigtype must be a number")}toJSON(){return{publicKey:this.publicKey.toString(),prevTxId:this.prevTxId.toString("hex"),outputIndex:this.outputIndex,inputIndex:this.inputIndex,signature:this.signature.toString(),sigtype:this.sigtype}}toObject(){return this.toJSON()}static fromObject(e){return y.checkArgument(e),new ae(e)}}class oe extends ie{constructor(e,r,i,a,o){super(e,r,i,a,o);var n=this;r=r||e.publicKeys,this.threshold=i||e.threshold,a=a||e.signatures,this.publicKeys=t.sortBy(r,e=>e.toString("hex")),this.redeemScript=o||X.buildMultisigOut(this.publicKeys,this.threshold),this.publicKeyIndex={},this.publicKeys.forEach((e,t)=>{n.publicKeyIndex[e.toString()]=t}),this.signatures=a?this._deserializeSignatures(a):Array(this.publicKeys.length)}toObject(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=ie.prototype.toObject.apply(this,t);return i.threshold=this.threshold,i.publicKeys=this.publicKeys.map(e=>e.toString()),i.signatures=this._serializeSignatures(),i}_deserializeSignatures(e){return e.map(e=>e?new ae(e):void 0)}_serializeSignatures(){return this.signatures.map(e=>e?e.toObject():void 0)}getSignatures(e,t,r,i){return y.checkState(this.output instanceof ee,"Malformed output found when signing transaction"),i=i||Z.SIGHASH_ALL|Z.SIGHASH_FORKID,this.publicKeys.filter(e=>e.toString()===t.publicKey.toString()).map(a=>new ae({publicKey:a,prevTxId:this.prevTxId,outputIndex:this.outputIndex,inputIndex:r,signature:re.sign(e,t,i,r,this.redeemScript,this.output.satoshisBN),sigtype:i}))}addSignature(e,t){return y.checkState(!this.isFullySigned(),"All needed signatures have already been added"),y.checkArgument(void 0!==this.publicKeyIndex[t.publicKey.toString()],"Signature has no matching public key"),y.checkState(this.isValidSignature(e,t),"Signature invalid"),this.signatures[this.publicKeyIndex[t.publicKey.toString()]]=t,this._updateScript(),this}_updateScript(){return this.setScript(X.buildP2SHMultisigIn(this.publicKeys,this.threshold,this._createSignatures(),{cachedMultisig:this.redeemScript})),this}_createSignatures(){return this.signatures.filter(e=>void 0!==e).map(e=>O.concat([e.signature.toDER(),O.integerAsSingleByteBuffer(e.sigtype)]))}clearSignatures(){this.signatures=Array(this.publicKeys.length),this._updateScript()}isFullySigned(){return this.countSignatures()===this.threshold}countMissingSignatures(){return this.threshold-this.countSignatures()}countSignatures(){return this.signatures.reduce((e,t)=>e+!!t,0)}publicKeysWithoutSignature(){return this.publicKeys.filter(e=>!this.signatures[this.publicKeyIndex[e.toString()]])}isValidSignature(e,t){return t.signature.nhashtype=t.sigtype,re.verify(e,t.signature,t.publicKey,t.inputIndex,this.redeemScript,this.output.satoshisBN)}_estimateSize(){return oe.OPCODES_SIZE+this.threshold*oe.SIGNATURE_SIZE+this.publicKeys.length*oe.PUBKEY_SIZE}}oe.OPCODES_SIZE=7,oe.SIGNATURE_SIZE=74,oe.PUBKEY_SIZE=34;class ne extends ie{constructor(e,r,i,a){super(e,r,i,a),r=r||e.publicKeys,this.threshold=i||e.threshold,a=a||e.signatures,this.publicKeys=t.sortBy(r,e=>e.toString("hex")),this.publicKeyIndex={},this.publicKeys.forEach((e,t)=>{this.publicKeyIndex[e.toString()]=t}),this.signatures=a?this._deserializeSignatures(a):Array(this.publicKeys.length)}toObject(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=ie.prototype.toObject.apply(this,t);return i.threshold=this.threshold,i.publicKeys=this.publicKeys.map(e=>e.toString()),i.signatures=this._serializeSignatures(),i}_deserializeSignatures(e){return e.map(e=>e?new ae(e):void 0)}_serializeSignatures(){return this.signatures.map(e=>e?e.toObject():void 0)}getSignatures(e,t,r,i){return y.checkState(this.output instanceof ee,"Malformed output found when signing transaction"),i=i||Z.SIGHASH_ALL|Z.SIGHASH_FORKID,this.publicKeys.filter(e=>e.toString()===t.publicKey.toString()).map(a=>new ae({publicKey:a,prevTxId:this.prevTxId,outputIndex:this.outputIndex,inputIndex:r,signature:re.sign(e,t,i,r,this.output.script,this.output.satoshisBN),sigtype:i}))}addSignature(e,t){return y.checkState(!this.isFullySigned(),"All needed signatures have already been added"),y.checkArgument(void 0!==this.publicKeyIndex[t.publicKey.toString()],"Signature has no matching public key"),y.checkState(this.isValidSignature(e,t),"Signature invalid"),this.signatures[this.publicKeyIndex[t.publicKey.toString()]]=t,this._updateScript(),this}_updateScript(){return this.setScript(X.buildMultisigIn(this.publicKeys,this.threshold,this._createSignatures())),this}_createSignatures(){return this.signatures.filter(e=>void 0!==e).map(e=>O.concat([e.signature.toDER(),O.integerAsSingleByteBuffer(e.sigtype)]))}clearSignatures(){this.signatures=Array(this.publicKeys.length),this._updateScript()}isFullySigned(){return this.countSignatures()===this.threshold}countMissingSignatures(){return this.threshold-this.countSignatures()}countSignatures(){return this.signatures.reduce((e,t)=>e+!!t,0)}publicKeysWithoutSignature(){return this.publicKeys.filter(e=>!this.signatures[this.publicKeyIndex[e.toString()]])}isValidSignature(e,t){return t.signature.nhashtype=t.sigtype,re.verify(e,t.signature,t.publicKey,t.inputIndex,this.output.script,this.output.satoshisBN)}static normalizeSignatures(e,t,r,i,a){return a.map(a=>{var o=null;return i=i.filter(i=>{if(o)return!0;var n=new ae({signature:Z.fromTxFormat(i),publicKey:a,prevTxId:t.prevTxId,outputIndex:t.outputIndex,inputIndex:r,sigtype:Z.SIGHASH_ALL});return n.signature.nhashtype=n.sigtype,!re.verify(e,n.signature,n.publicKey,n.inputIndex,t.output.script)||(o=n,!1)}),o||null})}_estimateSize(){return ne.OPCODES_SIZE+this.threshold*ne.SIGNATURE_SIZE}}ne.OPCODES_SIZE=1,ne.SIGNATURE_SIZE=73;class se extends ie{getSignatures(e,t,r,i){y.checkState(this.output instanceof ee,"Malformed output found when signing transaction"),i=i||Z.SIGHASH_ALL|Z.SIGHASH_FORKID;var a=t.toPublicKey();return a.toString()===this.output.script.getPublicKey().toString("hex")?[new ae({publicKey:a,prevTxId:this.prevTxId,outputIndex:this.outputIndex,inputIndex:r,signature:re.sign(e,t,i,r,this.output.script,this.output.satoshisBN),sigtype:i})]:[]}addSignature(e,t){return y.checkState(this.isValidSignature(e,t),"Signature invalid"),this.setScript(X.buildPublicKeyIn(t.signature.toDER(),t.sigtype)),this}clearSignatures(){return this.setScript(X.empty()),this}isFullySigned(){return this.script.isPublicKeyIn()}_estimateSize(){return se.SCRIPT_MAX_SIZE}}se.SCRIPT_MAX_SIZE=73;class ue extends ie{getSignatures(e,t,r,i,a){return y.checkState(this.output instanceof ee,"Malformed output found when signing transaction"),a=a||P.sha256ripemd160(t.publicKey.toBuffer()),i=i||Z.SIGHASH_ALL|Z.SIGHASH_FORKID,O.equals(a,this.output.script.getPublicKeyHash())?[new ae({publicKey:t.toPublicKey(),prevTxId:this.prevTxId,outputIndex:this.outputIndex,inputIndex:r,signature:re.sign(e,t,i,r,this.output.script,this.output.satoshisBN),sigtype:i})]:[]}addSignature(e,t){y.checkState(this.isValidSignature(e,t),"Signature invalid");var r=X.buildPublicKeyHashIn(t.publicKey,t.signature.toDER(),t.sigtype);return this.setScript(r),this}clearSignatures(){return this.setScript(X.empty()),this}isFullySigned(){return this.script.isPublicKeyHashIn()}_estimateSize(){return ue.SCRIPT_MAX_SIZE}}ue.SCRIPT_MAX_SIZE=107;var ce={BTC:[1e8,8],mBTC:[1e5,5],uBTC:[100,2],bits:[100,2],satoshis:[1,0]};function le(e,r){if(!(this instanceof le))return new le(e,r);if(t.isNumber(r)){if(0>=r)throw new v.Unit.InvalidRate(r);e/=r,r=le.BTC}this._value=this._from(e,r);var i=this;Object.keys(ce).forEach((function(e){Object.defineProperty(i,e,{get:()=>i.to(e),enumerable:!0})}))}Object.keys(ce).forEach(e=>{le[e]=e}),le.fromObject=function(e){return y.checkArgument(t.isObject(e),"Argument is expected to be an object"),new le(e.amount,e.code)},le.fromBTC=function(e){return new le(e,le.BTC)},le.fromMilis=function(e){return new le(e,le.mBTC)},le.fromMillis=le.fromMilis,le.fromBits=function(e){return new le(e,le.bits)},le.fromMicros=le.fromBits,le.fromSatoshis=function(e){return new le(e,le.satoshis)},le.fromFiat=function(e,t){return new le(e,t)},le.prototype._from=function(e,t){if(!ce[t])throw new v.Unit.UnknownCode(t);return parseInt((e*ce[t][0]).toFixed(),10)},le.prototype.to=function(e){if(t.isNumber(e)){if(0>=e)throw new v.Unit.InvalidRate(e);return parseFloat((this.BTC*e).toFixed(2))}if(!ce[e])throw new v.Unit.UnknownCode(e);var r=this._value/ce[e][0];return parseFloat(r.toFixed(ce[e][1]))},le.prototype.toBTC=function(){return this.to(le.BTC)},le.prototype.toMilis=function(){return this.to(le.mBTC)},le.prototype.toMillis=le.prototype.toMilis,le.prototype.toBits=function(){return this.to(le.bits)},le.prototype.toMicros=le.prototype.toBits,le.prototype.toSatoshis=function(){return this.to(le.satoshis)},le.prototype.atRate=function(e){return this.to(e)},le.prototype.toString=function(){return"".concat(this.satoshis," satoshis")},le.prototype.toJSON=function(){return{amount:this.BTC,code:le.BTC}},le.prototype.toObject=le.prototype.toJSON,le.prototype.inspect=function(){return"<Unit: ".concat(this.toString(),">")};class he{constructor(e){y.checkArgument(t.isObject(e),"Must provide an object from where to extract data");var r=e.address?new J(e.address):void 0,i=e.txid?e.txid:e.txId;if(!i||!k.isHexaString(i)||64<i.length)throw new Error("Invalid TXID in object",e);var a=t.isUndefined(e.vout)?e.outputIndex:e.vout;if(!t.isNumber(a))throw new Error("Invalid outputIndex, received ".concat(a));y.checkArgument(!t.isUndefined(e.scriptPubKey)||!t.isUndefined(e.script),"Must provide the scriptPubKey for that output!");var o=new X(e.scriptPubKey||e.script);y.checkArgument(!t.isUndefined(e.amount)||!t.isUndefined(e.satoshis),"Must provide an amount for the output");var n=t.isUndefined(e.amount)?e.satoshis:le.fromBTC(e.amount).toSatoshis();y.checkArgument(t.isNumber(n),"Amount must be a number"),k.defineImmutable(this,{address:r,txId:i,outputIndex:a,script:o,satoshis:n})}inspect(){var e="UnspentOutput: ".concat(this.txId,":").concat(this.outputIndex),t="satoshis: ".concat(this.satoshis),r="address: ".concat(this.address);return"<".concat(e,", ").concat(t,", ").concat(r,">")}toString(){return"".concat(this.txId,":").concat(this.outputIndex)}static fromObject(e){return new he(e)}toJSON(){return{address:this.address?this.address.toString():void 0,txid:this.txId,vout:this.outputIndex,scriptPubKey:this.script.toBuffer().toString("hex"),amount:le.fromSatoshis(this.satoshis).toBTC()}}toObject(){return this.toJSON()}}var fe=Buffer.compare||c;class pe{constructor(e){if(this.inputs=[],this.outputs=[],this._inputAmount=void 0,this._outputAmount=void 0,e){if(e instanceof pe)return pe.shallowCopy(e);if(k.isHexa(e))this.fromString(e);else if(O.isBuffer(e))this.fromBuffer(e);else{if(!t.isObject(e))throw new v.InvalidArgument("Must provide an object or string to deserialize a transaction");this.fromObject(e)}}else this._newTransaction()}get hash(){return new G(this._getHash()).readReverse().toString("hex")}get id(){return new G(this._getHash()).readReverse().toString("hex")}get inputAmount(){return this._getInputAmount()}get outputAmount(){return this._getOutputAmount()}_getHash(){return P.sha256sha256(this.toBuffer())}serialize(e){return!0===e||e&&e.disableAll?this.uncheckedSerialize():this.checkedSerialize(e)}toString(){return this.toBuffer().toString("hex")}uncheckedSerialize(){return this.toString()}checkedSerialize(e){var t=this.getSerializationError(e);if(t)throw t.message+=" - For more information please see: https://bitcore.io/api/lib/transaction#serialization-checks",t;return this.uncheckedSerialize()}invalidSatoshis(){return this.outputs.some(e=>e.invalidSatoshis())}getSerializationError(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(this.invalidSatoshis())return new v.Transaction.InvalidSatoshis;var t,r=this._getUnspentValue();return 0>r?!e.disableMoreOutputThanInput&&(t=new v.Transaction.InvalidOutputAmountSum):t=this._hasFeeError(e,r),t||this._hasDustOutputs(e)||this._isMissingSignatures(e)}_hasFeeError(e,t){if(void 0!==this._fee&&this._fee!==t)return new v.Transaction.FeeError.Different("Unspent value is ".concat(t," but specified fee is ").concat(this._fee));if(!e.disableLargeFees){var r=Math.floor(pe.FEE_SECURITY_MARGIN*this._estimateFee());if(t>r)return this._missingChange()?new v.Transaction.ChangeAddressMissing("Fee is too large and no change address was provided"):new v.Transaction.FeeError.TooLarge("expected less than ".concat(r," but got ").concat(t))}if(!e.disableSmallFees){var i=Math.ceil(this._estimateFee()/pe.FEE_SECURITY_MARGIN);if(t<i)return new v.Transaction.FeeError.TooSmall("expected more than ".concat(i," but got ").concat(t))}}_missingChange(){return!this._changeScript}_hasDustOutputs(e){if(!e.disableDustOutputs&&0<this.outputs.filter(e=>e.satoshis<pe.DUST_AMOUNT&&!e.script.isDataOut()).length)return new v.Transaction.DustOutputs}_isMissingSignatures(e){return e.disableIsFullySigned||this.isFullySigned()?void 0:new v.Transaction.MissingSignatures}inspect(){return"<Transaction: ".concat(this.uncheckedSerialize(),">")}toBuffer(){var e=new Y;return this.toBufferWriter(e).toBuffer()}toBufferWriter(e){return e.writeInt32LE(this.version),e.writeVarintNum(this.inputs.length),this.inputs.forEach(t=>t.toBufferWriter(e)),e.writeVarintNum(this.outputs.length),this.outputs.forEach(t=>t.toBufferWriter(e)),e.writeUInt32LE(this.nLockTime),e}fromBuffer(e){var t=new G(e);return this.fromBufferReader(t)}fromBufferReader(e){var t;y.checkArgument(!e.finished(),"No transaction data received when creating transaction from buffer"),this.version=e.readInt32LE();var r=e.readVarintNum();for(t=0;t<r;t+=1){var i=ie.fromBufferReader(e);this.inputs.push(i)}var a=e.readVarintNum();for(t=0;t<a;t+=1)this.outputs.push(ee.fromBufferReader(e));return this.nLockTime=e.readUInt32LE(),this}toJSON(){var e=this.inputs.map(e=>e.toObject()),t=this.outputs.map(e=>e.toObject()),r={hash:this.hash,version:this.version,inputs:e,outputs:t,nLockTime:this.nLockTime};return this._changeScript&&(r.changeScript=this._changeScript.toString()),void 0!==this._changeIndex&&(r.changeIndex=this._changeIndex),void 0!==this._fee&&(r.fee=this._fee),void 0!==this._dataInputs&&(r.dataInputs=this._dataInputs),void 0!==this._dataOutputs&&(r.dataOutputs=this._dataOutputs),r}toObject(){return this.toJSON()}fromObject(e){y.checkArgument(t.isObject(e)||e instanceof pe);var r=e instanceof pe?e.toObject():e;return r.inputs.forEach(e=>{if(e.output&&e.output.script){var t,r=new X(e.output.script);if(r.isPublicKeyHashOut())t=new ue(e);else if(r.isScriptHashOut()&&e.publicKeys&&e.threshold)t=new oe(e,e.publicKeys,e.threshold,e.signatures);else{if(!r.isPublicKeyOut())throw new v.Transaction.Input.UnsupportedScript(e.output.script);t=new se(e)}this.addInput(t)}else this.uncheckedAddInput(new ie(e))}),r.outputs.forEach(e=>this.addOutput(new ee(e))),r.changeIndex&&(this._changeIndex=r.changeIndex),r.changeScript&&(this._changeScript=new X(r.changeScript)),r.fee&&(this._fee=r.fee),this.nLockTime=r.nLockTime,this.version=r.version,this._checkConsistency(e),this}_checkConsistency(e){void 0!==this._changeIndex&&(y.checkState(this._changeScript,"Change script missing"),y.checkState(this.outputs[this._changeIndex],"Change output missing"),y.checkState(this.outputs[this._changeIndex].script.toString()===this._changeScript.toString(),"Script in argument does not match script in transaction")),e&&e.hash&&y.checkState(e.hash===this.hash,"Hash in argument does not match transaction hash")}lockUntilDate(e){if(y.checkArgument(e),t.isNumber(e)&&e<pe.NLOCKTIME_BLOCKHEIGHT_LIMIT)throw new v.Transaction.LockTimeTooEarly;return t.isDate(e)&&(e=e.getTime()/1e3),this.inputs.forEach(e=>{e.sequenceNumber===ie.DEFAULT_SEQNUMBER&&(e.sequenceNumber=ie.DEFAULT_LOCKTIME_SEQNUMBER)}),this.nLockTime=e,this}lockUntilBlockHeight(e){if(y.checkArgument(t.isNumber(e),"Block height must be a number"),e>=pe.NLOCKTIME_BLOCKHEIGHT_LIMIT)throw new v.Transaction.BlockHeightTooHigh;if(0>e)throw new v.Transaction.NLockTimeOutOfRange;return this.inputs.forEach(e=>{e.sequenceNumber===ie.DEFAULT_SEQNUMBER&&(e.sequenceNumber=ie.DEFAULT_LOCKTIME_SEQNUMBER)}),this.nLockTime=e,this}getLockTime(){return this.nLockTime?this.nLockTime<pe.NLOCKTIME_BLOCKHEIGHT_LIMIT?this.nLockTime:new Date(1e3*this.nLockTime):null}fromString(e){this.fromBuffer(Buffer.from(e,"hex"))}_newTransaction(){this.version=1,this.nLockTime=0}from(e,t,r){if(Array.isArray(e))return e.forEach(e=>this.from(e,t,r)),this;var i,a=this.inputs.some(t=>t.prevTxId.toString("hex")===e.txId&&t.outputIndex===e.outputIndex),o=new he(e);if(a)return this;t&&r?(y.checkArgument(r<=t.length,"Number of signatures must be greater than the number of public keys"),i=o.script.isMultisigOut()?ne:o.script.isScriptHashOut()?oe:ne):i=o.script.isPublicKeyHashOut()?ue:o.script.isPublicKeyOut()?se:ie;var n=new i({output:new ee({script:o.script,satoshis:o.satoshis}),prevTxId:o.txId,outputIndex:o.outputIndex,script:X.empty()},t,r);return this.addInput(n),this}addInput(e,t,r){if(y.checkArgumentType(e,ie,"Trying to add input of type other than input"),!e.output&&(void 0===t||void 0===r))throw new v.Transaction.NeedMoreInfo("Need information about the UTXO script and satoshis");return!e.output&&t&&void 0!==r&&(t=t instanceof X?t:new X(t),y.checkArgumentType(r,"number","Satoshis must be a number when adding input"),e.output=new ee({script:t,satoshis:r})),this.uncheckedAddInput(e)}uncheckedAddInput(e){return y.checkArgumentType(e,ie,"Trying to add input of type other than input"),this.inputs.push(e),this._inputAmount=void 0,this._updateChangeOutput(),this}hasAllUtxoInfo(){return this.inputs.map(e=>!!e.output)}fee(e){return y.checkArgument(t.isNumber(e),"Amount must be a number"),this._fee=e,this._updateChangeOutput(),this}feePerKb(e){return y.checkArgument(t.isNumber(e),"Amount must be a number"),this._feePerKb=e,this._updateChangeOutput(),this}change(e){return y.checkArgument(e,"Address is required"),this._changeScript=X.fromAddress(e),this._updateChangeOutput(),this}getChangeOutput(){return void 0===this._changeIndex?null:this.outputs[this._changeIndex]}to(e,t){if(Array.isArray(e)){var r=this;return e.forEach(e=>r.to(e.address,e.satoshis)),this}return y.checkArgument(k.isNaturalNumber(t),"Amount is expected to be a positive integer"),this.addOutput(new ee({script:X(new J(e)),satoshis:t})),this}addData(e){return this.addOutput(new ee({script:X.buildDataOut(e),satoshis:0})),this}addOutput(e){return y.checkArgumentType(e,ee,"Output needs to be of type output"),this._addOutput(e),this._updateChangeOutput(),this}clearOutputs(){return this.outputs=[],this._clearSignatures(),this._outputAmount=void 0,this._changeIndex=void 0,this._updateChangeOutput(),this}_addOutput(e){this.outputs.push(e),this._outputAmount=void 0}_getOutputAmount(){return void 0===this._outputAmount&&(this._outputAmount=this.outputs.reduce((e,t)=>e+t.satoshis,0)),this._outputAmount}_getInputAmount(){if(void 0===this._inputAmount){var e=this;this._inputAmount=0,this.inputs.forEach(t=>{if(void 0===t.output)throw new v.Transaction.Input.MissingPreviousOutput;e._inputAmount+=t.output.satoshis})}return this._inputAmount}_updateChangeOutput(){if(this._changeScript){this._clearSignatures(),void 0!==this._changeIndex&&this._removeOutput(this._changeIndex);var e=this._getUnspentValue()-this.getFee();0<e?(this._changeIndex=this.outputs.length,this._addOutput(new ee({script:this._changeScript,satoshis:e}))):this._changeIndex=void 0}}getFee(){return this.isCoinbase()?0:void 0===this._fee?this._changeScript?this._estimateFee():this._getUnspentValue():this._fee}_estimateFee(){var e=this._estimateSize(),t=this._getUnspentValue();return pe._estimateFee(e,t,this._feePerKb)}_getUnspentValue(){return this._getInputAmount()-this._getOutputAmount()}_clearSignatures(){this.inputs.forEach(e=>e.clearSignatures())}_estimateSize(){var e=this.inputs.reduce((e,t)=>e+t._estimateSize(),pe.MAXIMUM_EXTRA_SIZE);return e=this.outputs.reduce((e,t)=>e+t.script.toBuffer().length+9,e)}_removeOutput(e){var t=this.outputs[e];this.outputs=this.outputs.filter(e=>e!==t),this._outputAmount=void 0}removeOutput(e){this._removeOutput(e),this._updateChangeOutput()}sort(){return this.sortInputs(e=>{var t=Array.prototype.concat.apply([],e);return t.sort((e,t)=>fe(e.prevTxId,t.prevTxId)||e.outputIndex-t.outputIndex),t}),this.sortOutputs(e=>{var t=Array.prototype.concat.apply([],e);return t.sort((e,t)=>e.satoshis-t.satoshis||fe(e.script.toBuffer(),t.script.toBuffer())),t}),this}shuffleOutputs(){return this.sortOutputs(t.shuffle)}sortOutputs(e){var t=e(this.outputs);return this._newOutputOrder(t)}sortInputs(e){return this.inputs=e(this.inputs),this._clearSignatures(),this}_newOutputOrder(e){if(this.outputs.length!==e.length||0!==t.difference(this.outputs,e).length)throw new v.Transaction.InvalidSorting;if(void 0!==this._changeIndex){var r=this.outputs[this._changeIndex];this._changeIndex=t.findIndex(e,r)}return this.outputs=e,this}removeInput(e,r){var i;if(0>(i=!r&&t.isNumber(e)?e:t.findIndex(this.inputs,t=>t.prevTxId.toString("hex")===e&&t.outputIndex===r))||i>=this.inputs.length)throw new v.Transaction.InvalidIndex(i,this.inputs.length);var a=this.inputs[i];this.inputs=t.without(this.inputs,a),this._inputAmount=void 0,this._updateChangeOutput()}sign(e,t){y.checkState(this.hasAllUtxoInfo(),"Cannot sign because an input is not defined");var r=this;return Array.isArray(e)?(e.forEach(e=>r.sign(e,t)),this):(this.getSignatures(e,t).forEach(e=>r.applySignature(e)),this)}getSignatures(e,t){e=new V(e),t=t||Z.SIGHASH_ALL|Z.SIGHASH_FORKID;var r=this,i=[],a=P.sha256ripemd160(e.publicKey.toBuffer());return this.inputs.forEach((o,n)=>{o.getSignatures(r,e,n,t,a).forEach(e=>i.push(e))}),i}applySignature(e){return this.inputs[e.inputIndex].addSignature(this,e),this}isFullySigned(){return this.inputs.forEach(e=>{if(e.isFullySigned===ie.prototype.isFullySigned)throw new v.Transaction.UnableToVerifySignature("Unrecognized script kind, or not enough information to execute script.This usually happens when creating a transaction from a serialized transaction")}),this.inputs.map(e=>e.isFullySigned()).every(e=>e)}isValidSignature(e){if(this.inputs[e.inputIndex].isValidSignature===ie.prototype.isValidSignature)throw new v.Transaction.UnableToVerifySignature("Unrecognized script kind, or not enough information to execute script.This usually happens when creating a transaction from a serialized transaction");return this.inputs[e.inputIndex].isValidSignature(this,e)}verifySignature(e,t,r,i){return re.verify(this,e,t,r,i)}verify(){var e;if(0===this.inputs.length)return"transaction txins empty";if(0===this.outputs.length)return"transaction txouts empty";var t=new i(0);for(e=0;e<this.outputs.length;e+=1){if(this.outputs[e].invalidSatoshis())return"Transaction output contains invalid amount";if(this.outputs[e]._satoshisBN.gt(new i(pe.MAX_MONEY,10)))return"Transaction output contains too high satoshi amount";if((t=t.add(this.outputs[e]._satoshisBN)).gt(new i(pe.MAX_MONEY)))return"Transaction output contains too high satoshi amount"}if(this.toBuffer().length>1e6)return"Transaction over the maximum block size";var r={};for(e=0;e<this.inputs.length;e+=1){var a="".concat(this.inputs[e].prevTxId,":").concat(this.inputs[e].outputIndex);if(void 0!==r[a])return"Transaction contains duplicate input";r[a]=!0}if(this.isCoinbase()){var o=this.inputs[0]._scriptBuffer;if(2>o.length||100<o.length)return"Coinbase transaction script size invalid"}else if(0<this.inputs.filter(e=>e.isNull()).length)return"Transaction has null input";return!0}isCoinbase(){return 1===this.inputs.length&&this.inputs[0].isNull()}isRBF(){return this.inputs.some(e=>e.sequenceNumber<ie.MAXINT-1)}enableRBF(){return this.inputs=this.inputs.map(e=>(e.sequenceNumber>=ie.MAXINT-1&&(e.sequenceNumber=ie.DEFAULT_RBF_SEQNUMBER),e)),this}static shallowCopy(e){return new pe(e.toBuffer())}static _estimateFee(e,t,r){return t>Math.ceil(e/1e3*(r||pe.FEE_PER_KB))&&(e+=pe.CHANGE_OUTPUT_MAX_SIZE),Math.ceil(e/1e3*(r||pe.FEE_PER_KB))}}pe.DUST_AMOUNT=546,pe.FEE_SECURITY_MARGIN=150,pe.MAX_MONEY=21e14,pe.NLOCKTIME_BLOCKHEIGHT_LIMIT=5e8,pe.NLOCKTIME_MAX_VALUE=4294967295,pe.FEE_PER_KB=2e4,pe.CHANGE_OUTPUT_MAX_SIZE=62,pe.MAXIMUM_EXTRA_SIZE=26;class de{constructor(e){return this instanceof de?(t.extend(this,de._from(e)),this):new de(e)}static _from(e){var r={};if(O.isBuffer(e))r=de._fromBufferReader(G(e));else{if(!t.isObject(e))throw new TypeError("Unrecognized argument for Block");r=de._fromObject(e)}return r}static _fromObject(e){var t=[];return e.transactions.forEach(e=>{e instanceof pe?t.push(e):t.push((new pe).fromObject(e))}),{header:Q.fromObject(e.header),transactions:t}}static fromObject(e){var t=de._fromObject(e);return new de(t)}static _fromBufferReader(e){var t={};y.checkState(!e.finished(),"No block data received"),t.header=Q.fromBufferReader(e);var r=e.readVarintNum();t.transactions=[];for(var i=0;i<r;i+=1)t.transactions.push((new pe).fromBufferReader(e));return t}static fromBufferReader(e){y.checkArgument(e,"br is required");var t=de._fromBufferReader(e);return new de(t)}static fromBuffer(e){return de.fromBufferReader(new G(e))}static fromString(e){var t=Buffer.from(e,"hex");return de.fromBuffer(t)}static fromRawBlock(e){O.isBuffer(e)||(e=Buffer.from(e,"binary"));var t=G(e);t.pos=de.Values.START_OF_BLOCK;var r=de._fromBufferReader(t);return new de(r)}toJSON(){var e=[];return this.transactions.forEach(t=>{e.push(t.toObject())}),{header:this.header.toObject(),transactions:e}}toObject(){return this.toJSON()}toBuffer(){return this.toBufferWriter().concat()}toString(){return this.toBuffer().toString("hex")}toBufferWriter(e){e||(e=new Y),e.write(this.header.toBuffer()),e.writeVarintNum(this.transactions.length);for(var t=0;t<this.transactions.length;t+=1)this.transactions[t].toBufferWriter(e);return e}getTransactionHashes(){var e=[];if(0===this.transactions.length)return[de.Values.NULL_HASH];for(var t=0;t<this.transactions.length;t+=1)e.push(this.transactions[t]._getHash());return e}getMerkleTree(){for(var e=this.getTransactionHashes(),t=0,r=this.transactions.length;1<r;r=Math.floor((r+1)/2)){for(var i=0;i<r;i+=2){var a=Math.min(i+1,r-1),o=Buffer.concat([e[t+i],e[t+a]]);e.push(P.sha256sha256(o))}t+=r}return e}getMerkleRoot(){var e=this.getMerkleTree();return e[e.length-1]}validMerkleRoot(){var e=new i(this.header.merkleRoot.toString("hex"),"hex"),t=new i(this.getMerkleRoot().toString("hex"),"hex");return!(0!==e.cmp(t))}_getHash(){return this.header._getHash()}inspect(){return"<Block ".concat(this.id,">")}}de.MAX_BLOCK_SIZE=1e6;var me={configurable:!1,enumerable:!0,get(){return this._id||(this._id=this.header.id),this._id},set:t.noop};Object.defineProperty(de.prototype,"id",me),Object.defineProperty(de.prototype,"hash",me),de.Values={START_OF_BLOCK:8,NULL_HASH:Buffer.from("0000000000000000000000000000000000000000000000000000000000000000","hex")};var ge=v.HDPublicKey;function be(e){if(e instanceof be)return e;if(!(this instanceof be))return new be(e);if(e){if(t.isString(e)||O.isBuffer(e)){var r=be.getSerializedError(e);if(!r)return this._buildFromSerialized(e);if(O.isBuffer(e)&&!be.getSerializedError(e.toString()))return this._buildFromSerialized(e.toString());if(r instanceof ge.ArgumentIsPrivateExtended)return new ye(e).hdPublicKey;throw r}if(t.isObject(e))return e instanceof ye?this._buildFromPrivate(e):this._buildFromObject(e);throw new ge.UnrecognizedArgument(e)}throw new ge.MustSupplyArgument}be.isValidPath=function(e){if(t.isString(e)){var r=ye._getDerivationIndexes(e);return null!==r&&t.every(r,be.isValidPath)}return!!t.isNumber(e)&&0<=e&&e<be.Hardened},be.prototype.derive=function(e,t){return this.deriveChild(e,t)},be.prototype.deriveChild=function(e,r){if(t.isNumber(e))return this._deriveWithNumber(e,r);if(t.isString(e))return this._deriveFromString(e);throw new ge.InvalidDerivationArgument(e)},be.prototype._deriveWithNumber=function(e,t){if(e>=be.Hardened||t)throw new ge.InvalidIndexCantDeriveHardened;if(0>e)throw new ge.InvalidPath(e);var r,a=O.integerAsBuffer(e),o=O.concat([this.publicKey.toBuffer(),a]),n=P.sha512hmac(o,this._buffers.chainCode),s=i.fromBuffer(n.slice(0,32),{size:32}),u=n.slice(32,64);try{r=q.fromPoint(j.getG().mul(s).add(this.publicKey.point))}catch(t){return this._deriveWithNumber(e+1)}return new be({network:this.network,depth:this.depth+1,parentFingerPrint:this.fingerPrint,childIndex:e,chainCode:u,publicKey:r})},be.prototype._deriveFromString=function(e){if(t.includes(e,"'"))throw new ge.InvalidIndexCantDeriveHardened;if(!be.isValidPath(e))throw new ge.InvalidPath(e);return ye._getDerivationIndexes(e).reduce((e,t)=>e._deriveWithNumber(t),this)},be.isValidSerialized=function(e,r){return t.isNull(be.getSerializedError(e,r))},be.getSerializedError=function(e,r){if(!t.isString(e)&&!O.isBuffer(e))return new ge.UnrecognizedArgument("expected buffer or string");if(!S.validCharacters(e))return new v.InvalidB58Char("(unknown)",e);try{e=E.decode(e)}catch(t){return new v.InvalidB58Checksum(e)}if(e.length!==be.DataSize)return new ge.InvalidLength(e);if(!t.isUndefined(r)){var i=be._validateNetwork(e,r);if(i)return i}var a=O.integerFromBuffer(e.slice(0,4));return a===H.livenet.xprivkey||a===H.testnet.xprivkey?new ge.ArgumentIsPrivateExtended:null},be._validateNetwork=function(e,t){var r=H.get(t);if(!r)return new v.InvalidNetworkArgument(t);var i=e.slice(be.VersionStart,be.VersionEnd);return O.integerFromBuffer(i)===r.xpubkey?null:new v.InvalidNetwork(i)},be.prototype._buildFromPrivate=function(e){var r=t.clone(e._buffers),a=j.getG().mul(i.fromBuffer(r.privateKey));return r.publicKey=j.pointToCompressed(a),r.version=O.integerAsBuffer(H.get(O.integerFromBuffer(r.version)).xpubkey),r.privateKey=void 0,r.checksum=void 0,r.xprivkey=void 0,this._buildFromBuffers(r)},be.prototype._buildFromObject=function(e){var r;t.isString(e.publicKey)?r=O.hexToBuffer(e.publicKey):O.isBuffer(e.publicKey)?({publicKey:r}=e):r=e.publicKey.toBuffer();var i={version:e.network?O.integerAsBuffer(H.get(e.network).xpubkey):e.version,depth:t.isNumber(e.depth)?O.integerAsSingleByteBuffer(e.depth):e.depth,parentFingerPrint:t.isNumber(e.parentFingerPrint)?O.integerAsBuffer(e.parentFingerPrint):e.parentFingerPrint,childIndex:t.isNumber(e.childIndex)?O.integerAsBuffer(e.childIndex):e.childIndex,chainCode:t.isString(e.chainCode)?O.hexToBuffer(e.chainCode):e.chainCode,publicKey:r,checksum:t.isNumber(e.checksum)?O.integerAsBuffer(e.checksum):e.checksum};return this._buildFromBuffers(i)},be.prototype._buildFromSerialized=function(e){var t=E.decode(e),r={version:t.slice(be.VersionStart,be.VersionEnd),depth:t.slice(be.DepthStart,be.DepthEnd),parentFingerPrint:t.slice(be.ParentFingerPrintStart,be.ParentFingerPrintEnd),childIndex:t.slice(be.ChildIndexStart,be.ChildIndexEnd),chainCode:t.slice(be.ChainCodeStart,be.ChainCodeEnd),publicKey:t.slice(be.PublicKeyStart,be.PublicKeyEnd),checksum:t.slice(be.ChecksumStart,be.ChecksumEnd),xpubkey:e};return this._buildFromBuffers(r)},be.prototype._buildFromBuffers=function(e){be._validateBufferArguments(e),k.defineImmutable(this,{_buffers:e});var t=[e.version,e.depth,e.parentFingerPrint,e.childIndex,e.chainCode,e.publicKey],r=O.concat(t),i=E.checksum(r);if(e.checksum&&e.checksum.length){if(e.checksum.toString("hex")!==i.toString("hex"))throw new v.InvalidB58Checksum(r,i)}else e.checksum=i;var a=H.get(O.integerFromBuffer(e.version)),o=E.encode(O.concat(t));e.xpubkey=Buffer.from(o);var n=new q(e.publicKey,{network:a}),s=be.ParentFingerPrintSize,u=P.sha256ripemd160(n.toBuffer()).slice(0,s);return k.defineImmutable(this,{xpubkey:o,network:a,depth:O.integerFromSingleByteBuffer(e.depth),publicKey:n,fingerPrint:u}),this},be._validateBufferArguments=function(e){var t=function(t,r){var i=e[t];s(O.isBuffer(i),"".concat(t," argument is not a buffer, it's ").concat(typeof i)),s(i.length===r,"".concat(t," size unexpected: found ").concat(i.length,", expected ").concat(r))};t("version",be.VersionSize),t("depth",be.DepthSize),t("parentFingerPrint",be.ParentFingerPrintSize),t("childIndex",be.ChildIndexSize),t("chainCode",be.ChainCodeSize),t("publicKey",be.PublicKeySize),e.checksum&&e.checksum.length&&t("checksum",be.CheckSumSize)},be.fromString=function(e){return y.checkArgument(t.isString(e),"No valid string was provided"),new be(e)},be.fromObject=function(e){return y.checkArgument(t.isObject(e),"No valid argument was provided"),new be(e)},be.prototype.toString=function(){return this.xpubkey},be.prototype.inspect=function(){return"<HDPublicKey: ".concat(this.xpubkey,">")},be.prototype.toJSON=function(){return{network:H.get(O.integerFromBuffer(this._buffers.version)).name,depth:O.integerFromSingleByteBuffer(this._buffers.depth),fingerPrint:O.integerFromBuffer(this.fingerPrint),parentFingerPrint:O.integerFromBuffer(this._buffers.parentFingerPrint),childIndex:O.integerFromBuffer(this._buffers.childIndex),chainCode:O.bufferToHex(this._buffers.chainCode),publicKey:this.publicKey.toString(),checksum:O.integerFromBuffer(this._buffers.checksum),xpubkey:this.xpubkey}},be.prototype.toObject=be.prototype.toJSON,be.fromBuffer=function(e){return new be(e)},be.prototype.toBuffer=function(){return O.copy(this._buffers.xpubkey)},be.Hardened=2147483648,be.RootElementAlias=["m","M"],be.VersionSize=4,be.DepthSize=1,be.ParentFingerPrintSize=4,be.ChildIndexSize=4,be.ChainCodeSize=32,be.PublicKeySize=33,be.CheckSumSize=4,be.DataSize=78,be.SerializedByteSize=82,be.VersionStart=0,be.VersionEnd=be.VersionStart+be.VersionSize,be.DepthStart=be.VersionEnd,be.DepthEnd=be.DepthStart+be.DepthSize,be.ParentFingerPrintStart=be.DepthEnd,be.ParentFingerPrintEnd=be.ParentFingerPrintStart+be.ParentFingerPrintSize,be.ChildIndexStart=be.ParentFingerPrintEnd,be.ChildIndexEnd=be.ChildIndexStart+be.ChildIndexSize,be.ChainCodeStart=be.ChildIndexEnd,be.ChainCodeEnd=be.ChainCodeStart+be.ChainCodeSize,be.PublicKeyStart=be.ChainCodeEnd,be.PublicKeyEnd=be.PublicKeyStart+be.PublicKeySize,be.ChecksumStart=be.PublicKeyEnd,be.ChecksumEnd=be.ChecksumStart+be.CheckSumSize,s(be.PublicKeyEnd===be.DataSize),s(be.ChecksumEnd===be.SerializedByteSize);var ve=v.HDPrivateKey;function ye(e){if(e instanceof ye)return e;if(!(this instanceof ye))return new ye(e);if(!e)return this._generateRandomly();if(H.get(e))return this._generateRandomly(e);if(t.isString(e)||O.isBuffer(e))if(ye.isValidSerialized(e))this._buildFromSerialized(e);else if(k.isValidJSON(e))this._buildFromJSON(e);else{if(!O.isBuffer(e)||!ye.isValidSerialized(e.toString()))throw ye.getSerializedError(e);this._buildFromSerialized(e.toString())}else{if(!t.isObject(e))throw new ve.UnrecognizedArgument(e);this._buildFromObject(e)}}ye.isValidPath=function(e,r){if(t.isString(e)){var i=ye._getDerivationIndexes(e);return null!==i&&t.every(i,ye.isValidPath)}return!!t.isNumber(e)&&(e<ye.Hardened&&!0===r&&(e+=ye.Hardened),0<=e&&e<ye.MaxIndex)},ye._getDerivationIndexes=function(e){var r=e.split("/");if(t.includes(ye.RootElementAlias,e))return[];if(!t.includes(ye.RootElementAlias,r[0]))return null;var i=r.slice(1).map(e=>{var t="'"===e.slice(-1);if(t&&(e=e.slice(0,-1)),!e||"-"===e[0])return NaN;var r=+e;return t&&(r+=ye.Hardened),r});return t.some(i,Number.isNaN)?null:i},ye.prototype.derive=function(e,t){return this.deriveNonCompliantChild(e,t)},ye.prototype.deriveChild=function(e,r){if(t.isNumber(e))return this._deriveWithNumber(e,r);if(t.isString(e))return this._deriveFromString(e);throw new ve.InvalidDerivationArgument(e)},ye.prototype.deriveNonCompliantChild=function(e,r){if(t.isNumber(e))return this._deriveWithNumber(e,r,!0);if(t.isString(e))return this._deriveFromString(e,!0);throw new ve.InvalidDerivationArgument(e)},ye.prototype._deriveWithNumber=function(e,t,r){if(!ye.isValidPath(e,t))throw new ve.InvalidPath(e);t=!!(e>=ye.Hardened)||t,e<ye.Hardened&&!0===t&&(e+=ye.Hardened);var a,o=O.integerAsBuffer(e);if(t&&r){var n=this.privateKey.bn.toBuffer();a=O.concat([Buffer.from([0]),n,o])}else if(t){var u=this.privateKey.bn.toBuffer({size:32});s(32===u.length,"private key buffer is expected to be 32 bytes"),a=O.concat([Buffer.from([0]),u,o])}else a=O.concat([this.publicKey.toBuffer(),o]);var c=P.sha512hmac(a,this._buffers.chainCode),l=i.fromBuffer(c.slice(0,32),{size:32}),h=c.slice(32,64),f=l.add(this.privateKey.toBigNumber()).umod(j.getN()).toBuffer({size:32});return V.isValid(f)?new ye({network:this.network,depth:this.depth+1,parentFingerPrint:this.fingerPrint,childIndex:e,chainCode:h,privateKey:f}):this._deriveWithNumber(e+1,null,r)},ye.prototype._deriveFromString=function(e,t){if(!ye.isValidPath(e))throw new ve.InvalidPath(e);return ye._getDerivationIndexes(e).reduce((e,r)=>e._deriveWithNumber(r,null,t),this)},ye.isValidSerialized=function(e,t){return!ye.getSerializedError(e,t)},ye.getSerializedError=function(e,r){if(!t.isString(e)&&!O.isBuffer(e))return new ve.UnrecognizedArgument("Expected string or buffer");if(!S.validCharacters(e))return new v.InvalidB58Char("(unknown)",e);try{e=E.decode(e)}catch(t){return new v.InvalidB58Checksum(e)}if(e.length!==ye.DataLength)return new ve.InvalidLength(e);if(!t.isUndefined(r)){var i=ye._validateNetwork(e,r);if(i)return i}return null},ye._validateNetwork=function(e,t){var r=H.get(t);if(!r)return new v.InvalidNetworkArgument(t);var i=e.slice(0,4);return O.integerFromBuffer(i)===r.xprivkey?null:new v.InvalidNetwork(i)},ye.fromString=function(e){return y.checkArgument(t.isString(e),"No valid string was provided"),new ye(e)},ye.fromObject=function(e){return y.checkArgument(t.isObject(e),"No valid argument was provided"),new ye(e)},ye.prototype._buildFromJSON=function(e){return this._buildFromObject(JSON.parse(e))},ye.prototype._buildFromObject=function(e){var r;e.checksum&&(e.checksum.length?({checksum:r}=e):r=O.integerAsBuffer(e.checksum));var i={version:e.network?O.integerAsBuffer(H.get(e.network).xprivkey):e.version,depth:t.isNumber(e.depth)?O.integerAsSingleByteBuffer(e.depth):e.depth,parentFingerPrint:t.isNumber(e.parentFingerPrint)?O.integerAsBuffer(e.parentFingerPrint):e.parentFingerPrint,childIndex:t.isNumber(e.childIndex)?O.integerAsBuffer(e.childIndex):e.childIndex,chainCode:t.isString(e.chainCode)?O.hexToBuffer(e.chainCode):e.chainCode,privateKey:t.isString(e.privateKey)&&k.isHexa(e.privateKey)?O.hexToBuffer(e.privateKey):e.privateKey,checksum:r};return this._buildFromBuffers(i)},ye.prototype._buildFromSerialized=function(e){var t=E.decode(e),r={version:t.slice(ye.VersionStart,ye.VersionEnd),depth:t.slice(ye.DepthStart,ye.DepthEnd),parentFingerPrint:t.slice(ye.ParentFingerPrintStart,ye.ParentFingerPrintEnd),childIndex:t.slice(ye.ChildIndexStart,ye.ChildIndexEnd),chainCode:t.slice(ye.ChainCodeStart,ye.ChainCodeEnd),privateKey:t.slice(ye.PrivateKeyStart,ye.PrivateKeyEnd),checksum:t.slice(ye.ChecksumStart,ye.ChecksumEnd),xprivkey:e};return this._buildFromBuffers(r)},ye.prototype._generateRandomly=function(e){return ye.fromSeed(M.getRandomBuffer(64),e)},ye.fromSeed=function(e,t){if(k.isHexaString(e)&&(e=O.hexToBuffer(e)),!Buffer.isBuffer(e))throw new ve.InvalidEntropyArgument(e);if(e.length<16)throw new ve.InvalidEntropyArgument.NotEnoughEntropy(e);if(e.length>64)throw new ve.InvalidEntropyArgument.TooMuchEntropy(e);var r=P.sha512hmac(e,Buffer.from("Bitcoin seed"));return new ye({network:H.get(t)||H.defaultNetwork,depth:0,parentFingerPrint:0,childIndex:0,privateKey:r.slice(0,32),chainCode:r.slice(32,64)})},ye.prototype._calcHDPublicKey=function(){this._hdPublicKey||(this._hdPublicKey=new be(this))},ye.prototype._buildFromBuffers=function(e){ye._validateBufferArguments(e),k.defineImmutable(this,{_buffers:e});var t=[e.version,e.depth,e.parentFingerPrint,e.childIndex,e.chainCode,O.emptyBuffer(1),e.privateKey],r=Buffer.concat(t);if(e.checksum&&e.checksum.length){if(e.checksum.toString()!==E.checksum(r).toString())throw new v.InvalidB58Checksum(r)}else e.checksum=E.checksum(r);var a=H.get(O.integerFromBuffer(e.version)),o=E.encode(Buffer.concat(t));e.xprivkey=Buffer.from(o);var n=new V(i.fromBuffer(e.privateKey),a),s=n.toPublicKey(),u=ye.ParentFingerPrintSize,c=P.sha256ripemd160(s.toBuffer()).slice(0,u);return k.defineImmutable(this,{xprivkey:o,network:a,depth:O.integerFromSingleByteBuffer(e.depth),privateKey:n,publicKey:s,fingerPrint:c}),this._hdPublicKey=null,Object.defineProperty(this,"hdPublicKey",{configurable:!1,enumerable:!0,get(){return this._calcHDPublicKey(),this._hdPublicKey}}),Object.defineProperty(this,"xpubkey",{configurable:!1,enumerable:!0,get(){return this._calcHDPublicKey(),this._hdPublicKey.xpubkey}}),this},ye._validateBufferArguments=function(e){var t=function(t,r){var i=e[t];s(O.isBuffer(i),"".concat(t," argument is not a buffer")),s(i.length===r,"".concat(t," size unexpected: found ").concat(i.length,", expected ").concat(r))};t("version",ye.VersionSize),t("depth",ye.DepthSize),t("parentFingerPrint",ye.ParentFingerPrintSize),t("childIndex",ye.ChildIndexSize),t("chainCode",ye.ChainCodeSize),t("privateKey",ye.PrivateKeySize),e.checksum&&e.checksum.length&&t("checksum",ye.CheckSumSize)},ye.prototype.toString=function(){return this.xprivkey},ye.prototype.toJSON=function(){return{network:H.get(O.integerFromBuffer(this._buffers.version),"xprivkey").name,depth:O.integerFromSingleByteBuffer(this._buffers.depth),fingerPrint:O.integerFromBuffer(this.fingerPrint),parentFingerPrint:O.integerFromBuffer(this._buffers.parentFingerPrint),childIndex:O.integerFromBuffer(this._buffers.childIndex),chainCode:O.bufferToHex(this._buffers.chainCode),privateKey:this.privateKey.toBuffer().toString("hex"),checksum:O.integerFromBuffer(this._buffers.checksum),xprivkey:this.xprivkey}},ye.prototype.toObject=ye.prototype.toJSON,ye.fromBuffer=function(e){return new ye(e.toString())},ye.prototype.toBuffer=function(){return O.copy(this._buffers.xprivkey)},ye.DefaultDepth=0,ye.DefaultFingerprint=0,ye.DefaultChildIndex=0,ye.Hardened=2147483648,ye.MaxIndex=2*ye.Hardened,ye.RootElementAlias=["m","M","m'","M'"],ye.VersionSize=4,ye.DepthSize=1,ye.ParentFingerPrintSize=4,ye.ChildIndexSize=4,ye.ChainCodeSize=32,ye.PrivateKeySize=32,ye.CheckSumSize=4,ye.DataLength=78,ye.SerializedByteSize=82,ye.VersionStart=0,ye.VersionEnd=ye.VersionStart+ye.VersionSize,ye.DepthStart=ye.VersionEnd,ye.DepthEnd=ye.DepthStart+ye.DepthSize,ye.ParentFingerPrintStart=ye.DepthEnd,ye.ParentFingerPrintEnd=ye.ParentFingerPrintStart+ye.ParentFingerPrintSize,ye.ChildIndexStart=ye.ParentFingerPrintEnd,ye.ChildIndexEnd=ye.ChildIndexStart+ye.ChildIndexSize,ye.ChainCodeStart=ye.ChildIndexEnd,ye.ChainCodeEnd=ye.ChainCodeStart+ye.ChainCodeSize,ye.PrivateKeyStart=ye.ChainCodeEnd+1,ye.PrivateKeyEnd=ye.PrivateKeyStart+ye.PrivateKeySize,ye.ChecksumStart=ye.PrivateKeyEnd,ye.ChecksumEnd=ye.ChecksumStart+ye.CheckSumSize,s(ye.ChecksumEnd===ye.SerializedByteSize);class _e{constructor(e){if(!(this instanceof _e))return new _e(e);var r={};if(O.isBuffer(e))r=_e._fromBufferReader(G(e));else{if(!t.isObject(e))throw new TypeError("Unrecognized argument for MerkleBlock");var i;e.header instanceof Q?({header:i}=e):i=Q.fromObject(e.header),r={header:i,numTransactions:e.numTransactions,hashes:e.hashes,flags:e.flags}}return t.extend(this,r),this._flagBitsUsed=0,this._hashesUsed=0,this}static fromBuffer(e){return _e.fromBufferReader(G(e))}static fromBufferReader(e){return new _e(_e._fromBufferReader(e))}toBuffer(){return this.toBufferWriter().concat()}toBufferWriter(e){var t;for(e||(e=new Y),e.write(this.header.toBuffer()),e.writeUInt32LE(this.numTransactions),e.writeVarintNum(this.hashes.length),t=0;t<this.hashes.length;t+=1)e.write(Buffer.from(this.hashes[t],"hex"));for(e.writeVarintNum(this.flags.length),t=0;t<this.flags.length;t+=1)e.writeUInt8(this.flags[t]);return e}toJSON(){return{header:this.header.toObject(),numTransactions:this.numTransactions,hashes:this.hashes,flags:this.flags}}toObject(){return this.toJSON()}validMerkleTree(){if(y.checkState(t.isArray(this.flags),"MerkleBlock flags is not an array"),y.checkState(t.isArray(this.hashes),"MerkleBlock hashes is not an array"),this.hashes.length>this.numTransactions)return!1;if(8*this.flags.length<this.hashes.length)return!1;var e=this._calcTreeHeight(),r={hashesUsed:0,flagBitsUsed:0},i=this._traverseMerkleTree(e,0,r);return r.hashesUsed===this.hashes.length&&O.equals(i,this.header.merkleRoot)}_traverseMerkleTree(e,t,r){if((r=r||{}).txs=r.txs||[],r.flagBitsUsed=r.flagBitsUsed||0,r.hashesUsed=r.hashesUsed||0,r.flagBitsUsed>8*this.flags.length)return null;var i=1&this.flags[r.flagBitsUsed>>3]>>>(7&r.flagBitsUsed);if(r.flagBitsUsed+=1,0===e||!i){if(r.hashesUsed>=this.hashes.length)return null;var a=this.hashes[r.hashesUsed];return r.hashesUsed+=1,0===e&&i&&r.txs.push(a),Buffer.from(a,"hex")}var o=this._traverseMerkleTree(e-1,2*t,r),n=o;return 2*t+1<this._calcTreeWidth(e-1)&&(n=this._traverseMerkleTree(e-1,2*t+1,r)),P.sha256sha256(Buffer.concat([o,n]))}_calcTreeWidth(e){return this.numTransactions+(1<<e)-1>>e}_calcTreeHeight(){for(var e=0;1<this._calcTreeWidth(e);)e+=1;return e}hasTransaction(e){y.checkArgument(!t.isUndefined(e),"tx cannot be undefined"),y.checkArgument(e instanceof pe||"string"==typeof e,'Invalid tx given, tx must be a "string" or "Transaction"');var r=e;e instanceof pe&&(r=O.reverse(Buffer.from(e.id,"hex")).toString("hex"));var i=[],a=this._calcTreeHeight();return this._traverseMerkleTree(a,0,{txs:i}),-1!==i.indexOf(r)}static _fromBufferReader(e){var t;y.checkState(!e.finished(),"No merkleblock data received");var r={header:Q.fromBufferReader(e),numTransactions:e.readUInt32LE()},i=e.readVarintNum();for(r.hashes=[],t=0;t<i;t+=1)r.hashes.push(e.read(32).toString("hex"));var a=e.readVarintNum();for(r.flags=[],t=0;t<a;t+=1)r.flags.push(e.readUInt8());return r}static fromObject(e){return new _e(e)}}class Se{constructor(e){return y.checkArgument(t.isString(e),"First argument should be a string"),this.message=e,this}magicHash(){var e=Y.varintBufNum(Se.MAGIC_BYTES.length),t=Buffer.from(this.message),r=Y.varintBufNum(t.length),i=Buffer.concat([e,Se.MAGIC_BYTES,r,t]);return P.sha256sha256(i)}_sign(e){y.checkArgument(e instanceof V,"First argument should be a PrivateKey");var t=this.magicHash(),r=new te;return r.hashbuf=t,r.privkey=e,r.pubkey=e.toPublicKey(),r.signRandomK(),r.calci(),r.sig}sign(e){return this._sign(e).toCompact().toString("base64")}_verify(e,t){y.checkArgument(e instanceof q,"First argument should be a PublicKey"),y.checkArgument(t instanceof Z,"Second argument should be a Signature");var r=this.magicHash(),i=te.verify(r,t,e);return i||(this.error="The signature was invalid"),i}verify(e,r){y.checkArgument(e),y.checkArgument(r&&t.isString(r)),t.isString(e)&&(e=J.fromString(e));var i=Z.fromCompact(Buffer.from(r,"base64")),a=new te;a.hashbuf=this.magicHash(),a.sig=i;var o=a.toPublicKey(),n=J.fromPublicKey(o,e.network);return e.toString()===n.toString()?this._verify(o,i):(this.error="The signature did not match the message digest",!1)}static fromString(e){return new Se(e)}static fromJSON(e){return k.isValidJSON(e)&&(e=JSON.parse(e)),new Se(e.message)}toObject(){return{message:this.message}}toJSON(){return JSON.stringify(this.toObject())}toString(){return this.message}inspect(){return"<Message: ".concat(this.toString(),">")}}Se.MAGIC_BYTES=Buffer.from("Bitcoin Signed Message:\n");var Ie={CHINESE:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],ENGLISH:["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"],FRENCH:["abaisser","abandon","abdiquer","abeille","abolir","aborder","aboutir","aboyer","abrasif","abreuver","abriter","abroger","abrupt","absence","absolu","absurde","abusif","abyssal","academie","acajou","acarien","accabler","accepter","acclamer","accolade","accroche","accuser","acerbe","achat","acheter","aciduler","acier","acompte","acquerir","acronyme","acteur","actif","actuel","adepte","adequat","adhesif","adjectif","adjuger","admettre","admirer","adopter","adorer","adoucir","adresse","adroit","adulte","adverbe","aerer","aeronef","affaire","affecter","affiche","affreux","affubler","agacer","agencer","agile","agiter","agrafer","agreable","agrume","aider","aiguille","ailier","aimable","aisance","ajouter","ajuster","alarmer","alchimie","alerte","algebre","algue","aliener","aliment","alleger","alliage","allouer","allumer","alourdir","alpaga","altesse","alveole","amateur","ambigu","ambre","amenager","amertume","amidon","amiral","amorcer","amour","amovible","amphibie","ampleur","amusant","analyse","anaphore","anarchie","anatomie","ancien","aneantir","angle","angoisse","anguleux","animal","annexer","annonce","annuel","anodin","anomalie","anonyme","anormal","antenne","antidote","anxieux","apaiser","aperitif","aplanir","apologie","appareil","appeler","apporter","appuyer","aquarium","aqueduc","arbitre","arbuste","ardeur","ardoise","argent","arlequin","armature","armement","armoire","armure","arpenter","arracher","arriver","arroser","arsenic","arteriel","article","aspect","asphalte","aspirer","assaut","asservir","assiette","associer","assurer","asticot","astre","astuce","atelier","atome","atrium","atroce","attaque","attentif","attirer","attraper","aubaine","auberge","audace","audible","augurer","aurore","automne","autruche","avaler","avancer","avarice","avenir","averse","aveugle","aviateur","avide","avion","aviser","avoine","avouer","avril","axial","axiome","badge","bafouer","bagage","baguette","baignade","balancer","balcon","baleine","balisage","bambin","bancaire","bandage","banlieue","banniere","banquier","barbier","baril","baron","barque","barrage","bassin","bastion","bataille","bateau","batterie","baudrier","bavarder","belette","belier","belote","benefice","berceau","berger","berline","bermuda","besace","besogne","betail","beurre","biberon","bicycle","bidule","bijou","bilan","bilingue","billard","binaire","biologie","biopsie","biotype","biscuit","bison","bistouri","bitume","bizarre","blafard","blague","blanchir","blessant","blinder","blond","bloquer","blouson","bobard","bobine","boire","boiser","bolide","bonbon","bondir","bonheur","bonifier","bonus","bordure","borne","botte","boucle","boueux","bougie","boulon","bouquin","bourse","boussole","boutique","boxeur","branche","brasier","brave","brebis","breche","breuvage","bricoler","brigade","brillant","brioche","brique","brochure","broder","bronzer","brousse","broyeur","brume","brusque","brutal","bruyant","buffle","buisson","bulletin","bureau","burin","bustier","butiner","butoir","buvable","buvette","cabanon","cabine","cachette","cadeau","cadre","cafeine","caillou","caisson","calculer","calepin","calibre","calmer","calomnie","calvaire","camarade","camera","camion","campagne","canal","caneton","canon","cantine","canular","capable","caporal","caprice","capsule","capter","capuche","carabine","carbone","caresser","caribou","carnage","carotte","carreau","carton","cascade","casier","casque","cassure","causer","caution","cavalier","caverne","caviar","cedille","ceinture","celeste","cellule","cendrier","censurer","central","cercle","cerebral","cerise","cerner","cerveau","cesser","chagrin","chaise","chaleur","chambre","chance","chapitre","charbon","chasseur","chaton","chausson","chavirer","chemise","chenille","chequier","chercher","cheval","chien","chiffre","chignon","chimere","chiot","chlorure","chocolat","choisir","chose","chouette","chrome","chute","cigare","cigogne","cimenter","cinema","cintrer","circuler","cirer","cirque","citerne","citoyen","citron","civil","clairon","clameur","claquer","classe","clavier","client","cligner","climat","clivage","cloche","clonage","cloporte","cobalt","cobra","cocasse","cocotier","coder","codifier","coffre","cogner","cohesion","coiffer","coincer","colere","colibri","colline","colmater","colonel","combat","comedie","commande","compact","concert","conduire","confier","congeler","connoter","consonne","contact","convexe","copain","copie","corail","corbeau","cordage","corniche","corpus","correct","cortege","cosmique","costume","coton","coude","coupure","courage","couteau","couvrir","coyote","crabe","crainte","cravate","crayon","creature","crediter","cremeux","creuser","crevette","cribler","crier","cristal","critere","croire","croquer","crotale","crucial","cruel","crypter","cubique","cueillir","cuillere","cuisine","cuivre","culminer","cultiver","cumuler","cupide","curatif","curseur","cyanure","cycle","cylindre","cynique","daigner","damier","danger","danseur","dauphin","debattre","debiter","deborder","debrider","debutant","decaler","decembre","dechirer","decider","declarer","decorer","decrire","decupler","dedale","deductif","deesse","defensif","defiler","defrayer","degager","degivrer","deglutir","degrafer","dejeuner","delice","deloger","demander","demeurer","demolir","denicher","denouer","dentelle","denuder","depart","depenser","dephaser","deplacer","deposer","deranger","derober","desastre","descente","desert","designer","desobeir","dessiner","destrier","detacher","detester","detourer","detresse","devancer","devenir","deviner","devoir","diable","dialogue","diamant","dicter","differer","digerer","digital","digne","diluer","dimanche","diminuer","dioxyde","directif","diriger","discuter","disposer","dissiper","distance","divertir","diviser","docile","docteur","dogme","doigt","domaine","domicile","dompter","donateur","donjon","donner","dopamine","dortoir","dorure","dosage","doseur","dossier","dotation","douanier","double","douceur","douter","doyen","dragon","draper","dresser","dribbler","droiture","duperie","duplexe","durable","durcir","dynastie","eblouir","ecarter","echarpe","echelle","eclairer","eclipse","eclore","ecluse","ecole","economie","ecorce","ecouter","ecraser","ecremer","ecrivain","ecrou","ecume","ecureuil","edifier","eduquer","effacer","effectif","effigie","effort","effrayer","effusion","egaliser","egarer","ejecter","elaborer","elargir","electron","elegant","elephant","eleve","eligible","elitisme","eloge","elucider","eluder","emballer","embellir","embryon","emeraude","emission","emmener","emotion","emouvoir","empereur","employer","emporter","emprise","emulsion","encadrer","enchere","enclave","encoche","endiguer","endosser","endroit","enduire","energie","enfance","enfermer","enfouir","engager","engin","englober","enigme","enjamber","enjeu","enlever","ennemi","ennuyeux","enrichir","enrobage","enseigne","entasser","entendre","entier","entourer","entraver","enumerer","envahir","enviable","envoyer","enzyme","eolien","epaissir","epargne","epatant","epaule","epicerie","epidemie","epier","epilogue","epine","episode","epitaphe","epoque","epreuve","eprouver","epuisant","equerre","equipe","eriger","erosion","erreur","eruption","escalier","espadon","espece","espiegle","espoir","esprit","esquiver","essayer","essence","essieu","essorer","estime","estomac","estrade","etagere","etaler","etanche","etatique","eteindre","etendoir","eternel","ethanol","ethique","ethnie","etirer","etoffer","etoile","etonnant","etourdir","etrange","etroit","etude","euphorie","evaluer","evasion","eventail","evidence","eviter","evolutif","evoquer","exact","exagerer","exaucer","exceller","excitant","exclusif","excuse","executer","exemple","exercer","exhaler","exhorter","exigence","exiler","exister","exotique","expedier","explorer","exposer","exprimer","exquis","extensif","extraire","exulter","fable","fabuleux","facette","facile","facture","faiblir","falaise","fameux","famille","farceur","farfelu","farine","farouche","fasciner","fatal","fatigue","faucon","fautif","faveur","favori","febrile","feconder","federer","felin","femme","femur","fendoir","feodal","fermer","feroce","ferveur","festival","feuille","feutre","fevrier","fiasco","ficeler","fictif","fidele","figure","filature","filetage","filiere","filleul","filmer","filou","filtrer","financer","finir","fiole","firme","fissure","fixer","flairer","flamme","flasque","flatteur","fleau","fleche","fleur","flexion","flocon","flore","fluctuer","fluide","fluvial","folie","fonderie","fongible","fontaine","forcer","forgeron","formuler","fortune","fossile","foudre","fougere","fouiller","foulure","fourmi","fragile","fraise","franchir","frapper","frayeur","fregate","freiner","frelon","fremir","frenesie","frere","friable","friction","frisson","frivole","froid","fromage","frontal","frotter","fruit","fugitif","fuite","fureur","furieux","furtif","fusion","futur","gagner","galaxie","galerie","gambader","garantir","gardien","garnir","garrigue","gazelle","gazon","geant","gelatine","gelule","gendarme","general","genie","genou","gentil","geologie","geometre","geranium","germe","gestuel","geyser","gibier","gicler","girafe","givre","glace","glaive","glisser","globe","gloire","glorieux","golfeur","gomme","gonfler","gorge","gorille","goudron","gouffre","goulot","goupille","gourmand","goutte","graduel","graffiti","graine","grand","grappin","gratuit","gravir","grenat","griffure","griller","grimper","grogner","gronder","grotte","groupe","gruger","grutier","gruyere","guepard","guerrier","guide","guimauve","guitare","gustatif","gymnaste","gyrostat","habitude","hachoir","halte","hameau","hangar","hanneton","haricot","harmonie","harpon","hasard","helium","hematome","herbe","herisson","hermine","heron","hesiter","heureux","hiberner","hibou","hilarant","histoire","hiver","homard","hommage","homogene","honneur","honorer","honteux","horde","horizon","horloge","hormone","horrible","houleux","housse","hublot","huileux","humain","humble","humide","humour","hurler","hydromel","hygiene","hymne","hypnose","idylle","ignorer","iguane","illicite","illusion","image","imbiber","imiter","immense","immobile","immuable","impact","imperial","implorer","imposer","imprimer","imputer","incarner","incendie","incident","incliner","incolore","indexer","indice","inductif","inedit","ineptie","inexact","infini","infliger","informer","infusion","ingerer","inhaler","inhiber","injecter","injure","innocent","inoculer","inonder","inscrire","insecte","insigne","insolite","inspirer","instinct","insulter","intact","intense","intime","intrigue","intuitif","inutile","invasion","inventer","inviter","invoquer","ironique","irradier","irreel","irriter","isoler","ivoire","ivresse","jaguar","jaillir","jambe","janvier","jardin","jauger","jaune","javelot","jetable","jeton","jeudi","jeunesse","joindre","joncher","jongler","joueur","jouissif","journal","jovial","joyau","joyeux","jubiler","jugement","junior","jupon","juriste","justice","juteux","juvenile","kayak","kimono","kiosque","label","labial","labourer","lacerer","lactose","lagune","laine","laisser","laitier","lambeau","lamelle","lampe","lanceur","langage","lanterne","lapin","largeur","larme","laurier","lavabo","lavoir","lecture","legal","leger","legume","lessive","lettre","levier","lexique","lezard","liasse","liberer","libre","licence","licorne","liege","lievre","ligature","ligoter","ligue","limer","limite","limonade","limpide","lineaire","lingot","lionceau","liquide","lisiere","lister","lithium","litige","littoral","livreur","logique","lointain","loisir","lombric","loterie","louer","lourd","loutre","louve","loyal","lubie","lucide","lucratif","lueur","lugubre","luisant","lumiere","lunaire","lundi","luron","lutter","luxueux","machine","magasin","magenta","magique","maigre","maillon","maintien","mairie","maison","majorer","malaxer","malefice","malheur","malice","mallette","mammouth","mandater","maniable","manquant","manteau","manuel","marathon","marbre","marchand","mardi","maritime","marqueur","marron","marteler","mascotte","massif","materiel","matiere","matraque","maudire","maussade","mauve","maximal","mechant","meconnu","medaille","medecin","mediter","meduse","meilleur","melange","melodie","membre","memoire","menacer","mener","menhir","mensonge","mentor","mercredi","merite","merle","messager","mesure","metal","meteore","methode","metier","meuble","miauler","microbe","miette","mignon","migrer","milieu","million","mimique","mince","mineral","minimal","minorer","minute","miracle","miroiter","missile","mixte","mobile","moderne","moelleux","mondial","moniteur","monnaie","monotone","monstre","montagne","monument","moqueur","morceau","morsure","mortier","moteur","motif","mouche","moufle","moulin","mousson","mouton","mouvant","multiple","munition","muraille","murene","murmure","muscle","museum","musicien","mutation","muter","mutuel","myriade","myrtille","mystere","mythique","nageur","nappe","narquois","narrer","natation","nation","nature","naufrage","nautique","navire","nebuleux","nectar","nefaste","negation","negliger","negocier","neige","nerveux","nettoyer","neurone","neutron","neveu","niche","nickel","nitrate","niveau","noble","nocif","nocturne","noirceur","noisette","nomade","nombreux","nommer","normatif","notable","notifier","notoire","nourrir","nouveau","novateur","novembre","novice","nuage","nuancer","nuire","nuisible","numero","nuptial","nuque","nutritif","obeir","objectif","obliger","obscur","observer","obstacle","obtenir","obturer","occasion","occuper","ocean","octobre","octroyer","octupler","oculaire","odeur","odorant","offenser","officier","offrir","ogive","oiseau","oisillon","olfactif","olivier","ombrage","omettre","onctueux","onduler","onereux","onirique","opale","opaque","operer","opinion","opportun","opprimer","opter","optique","orageux","orange","orbite","ordonner","oreille","organe","orgueil","orifice","ornement","orque","ortie","osciller","osmose","ossature","otarie","ouragan","ourson","outil","outrager","ouvrage","ovation","oxyde","oxygene","ozone","paisible","palace","palmares","palourde","palper","panache","panda","pangolin","paniquer","panneau","panorama","pantalon","papaye","papier","papoter","papyrus","paradoxe","parcelle","paresse","parfumer","parler","parole","parrain","parsemer","partager","parure","parvenir","passion","pasteque","paternel","patience","patron","pavillon","pavoiser","payer","paysage","peigne","peintre","pelage","pelican","pelle","pelouse","peluche","pendule","penetrer","penible","pensif","penurie","pepite","peplum","perdrix","perforer","periode","permuter","perplexe","persil","perte","peser","petale","petit","petrir","peuple","pharaon","phobie","phoque","photon","phrase","physique","piano","pictural","piece","pierre","pieuvre","pilote","pinceau","pipette","piquer","pirogue","piscine","piston","pivoter","pixel","pizza","placard","plafond","plaisir","planer","plaque","plastron","plateau","pleurer","plexus","pliage","plomb","plonger","pluie","plumage","pochette","poesie","poete","pointe","poirier","poisson","poivre","polaire","policier","pollen","polygone","pommade","pompier","ponctuel","ponderer","poney","portique","position","posseder","posture","potager","poteau","potion","pouce","poulain","poumon","pourpre","poussin","pouvoir","prairie","pratique","precieux","predire","prefixe","prelude","prenom","presence","pretexte","prevoir","primitif","prince","prison","priver","probleme","proceder","prodige","profond","progres","proie","projeter","prologue","promener","propre","prospere","proteger","prouesse","proverbe","prudence","pruneau","psychose","public","puceron","puiser","pulpe","pulsar","punaise","punitif","pupitre","purifier","puzzle","pyramide","quasar","querelle","question","quietude","quitter","quotient","racine","raconter","radieux","ragondin","raideur","raisin","ralentir","rallonge","ramasser","rapide","rasage","ratisser","ravager","ravin","rayonner","reactif","reagir","realiser","reanimer","recevoir","reciter","reclamer","recolter","recruter","reculer","recycler","rediger","redouter","refaire","reflexe","reformer","refrain","refuge","regalien","region","reglage","regulier","reiterer","rejeter","rejouer","relatif","relever","relief","remarque","remede","remise","remonter","remplir","remuer","renard","renfort","renifler","renoncer","rentrer","renvoi","replier","reporter","reprise","reptile","requin","reserve","resineux","resoudre","respect","rester","resultat","retablir","retenir","reticule","retomber","retracer","reunion","reussir","revanche","revivre","revolte","revulsif","richesse","rideau","rieur","rigide","rigoler","rincer","riposter","risible","risque","rituel","rival","riviere","rocheux","romance","rompre","ronce","rondin","roseau","rosier","rotatif","rotor","rotule","rouge","rouille","rouleau","routine","royaume","ruban","rubis","ruche","ruelle","rugueux","ruiner","ruisseau","ruser","rustique","rythme","sabler","saboter","sabre","sacoche","safari","sagesse","saisir","salade","salive","salon","saluer","samedi","sanction","sanglier","sarcasme","sardine","saturer","saugrenu","saumon","sauter","sauvage","savant","savonner","scalpel","scandale","scelerat","scenario","sceptre","schema","science","scinder","score","scrutin","sculpter","seance","secable","secher","secouer","secreter","sedatif","seduire","seigneur","sejour","selectif","semaine","sembler","semence","seminal","senateur","sensible","sentence","separer","sequence","serein","sergent","serieux","serrure","serum","service","sesame","sevir","sevrage","sextuple","sideral","siecle","sieger","siffler","sigle","signal","silence","silicium","simple","sincere","sinistre","siphon","sirop","sismique","situer","skier","social","socle","sodium","soigneux","soldat","soleil","solitude","soluble","sombre","sommeil","somnoler","sonde","songeur","sonnette","sonore","sorcier","sortir","sosie","sottise","soucieux","soudure","souffle","soulever","soupape","source","soutirer","souvenir","spacieux","spatial","special","sphere","spiral","stable","station","sternum","stimulus","stipuler","strict","studieux","stupeur","styliste","sublime","substrat","subtil","subvenir","succes","sucre","suffixe","suggerer","suiveur","sulfate","superbe","supplier","surface","suricate","surmener","surprise","sursaut","survie","suspect","syllabe","symbole","symetrie","synapse","syntaxe","systeme","tabac","tablier","tactile","tailler","talent","talisman","talonner","tambour","tamiser","tangible","tapis","taquiner","tarder","tarif","tartine","tasse","tatami","tatouage","taupe","taureau","taxer","temoin","temporel","tenaille","tendre","teneur","tenir","tension","terminer","terne","terrible","tetine","texte","theme","theorie","therapie","thorax","tibia","tiede","timide","tirelire","tiroir","tissu","titane","titre","tituber","toboggan","tolerant","tomate","tonique","tonneau","toponyme","torche","tordre","tornade","torpille","torrent","torse","tortue","totem","toucher","tournage","tousser","toxine","traction","trafic","tragique","trahir","train","trancher","travail","trefle","tremper","tresor","treuil","triage","tribunal","tricoter","trilogie","triomphe","tripler","triturer","trivial","trombone","tronc","tropical","troupeau","tuile","tulipe","tumulte","tunnel","turbine","tuteur","tutoyer","tuyau","tympan","typhon","typique","tyran","ubuesque","ultime","ultrason","unanime","unifier","union","unique","unitaire","univers","uranium","urbain","urticant","usage","usine","usuel","usure","utile","utopie","vacarme","vaccin","vagabond","vague","vaillant","vaincre","vaisseau","valable","valise","vallon","valve","vampire","vanille","vapeur","varier","vaseux","vassal","vaste","vecteur","vedette","vegetal","vehicule","veinard","veloce","vendredi","venerer","venger","venimeux","ventouse","verdure","verin","vernir","verrou","verser","vertu","veston","veteran","vetuste","vexant","vexer","viaduc","viande","victoire","vidange","video","vignette","vigueur","vilain","village","vinaigre","violon","vipere","virement","virtuose","virus","visage","viseur","vision","visqueux","visuel","vital","vitesse","viticole","vitrine","vivace","vivipare","vocation","voguer","voile","voisin","voiture","volaille","volcan","voltiger","volume","vorace","vortex","voter","vouloir","voyage","voyelle","wagon","xenon","yacht","zebre","zenith","zeste","zoologie"],ITALIAN:["abaco","abbaglio","abbinato","abete","abisso","abolire","abrasivo","abrogato","accadere","accenno","accusato","acetone","achille","acido","acqua","acre","acrilico","acrobata","acuto","adagio","addebito","addome","adeguato","aderire","adipe","adottare","adulare","affabile","affetto","affisso","affranto","aforisma","afoso","africano","agave","agente","agevole","aggancio","agire","agitare","agonismo","agricolo","agrumeto","aguzzo","alabarda","alato","albatro","alberato","albo","albume","alce","alcolico","alettone","alfa","algebra","aliante","alibi","alimento","allagato","allegro","allievo","allodola","allusivo","almeno","alogeno","alpaca","alpestre","altalena","alterno","alticcio","altrove","alunno","alveolo","alzare","amalgama","amanita","amarena","ambito","ambrato","ameba","america","ametista","amico","ammasso","ammenda","ammirare","ammonito","amore","ampio","ampliare","amuleto","anacardo","anagrafe","analista","anarchia","anatra","anca","ancella","ancora","andare","andrea","anello","angelo","angolare","angusto","anima","annegare","annidato","anno","annuncio","anonimo","anticipo","anzi","apatico","apertura","apode","apparire","appetito","appoggio","approdo","appunto","aprile","arabica","arachide","aragosta","araldica","arancio","aratura","arazzo","arbitro","archivio","ardito","arenile","argento","argine","arguto","aria","armonia","arnese","arredato","arringa","arrosto","arsenico","arso","artefice","arzillo","asciutto","ascolto","asepsi","asettico","asfalto","asino","asola","aspirato","aspro","assaggio","asse","assoluto","assurdo","asta","astenuto","astice","astratto","atavico","ateismo","atomico","atono","attesa","attivare","attorno","attrito","attuale","ausilio","austria","autista","autonomo","autunno","avanzato","avere","avvenire","avviso","avvolgere","azione","azoto","azzimo","azzurro","babele","baccano","bacino","baco","badessa","badilata","bagnato","baita","balcone","baldo","balena","ballata","balzano","bambino","bandire","baraonda","barbaro","barca","baritono","barlume","barocco","basilico","basso","batosta","battuto","baule","bava","bavosa","becco","beffa","belgio","belva","benda","benevole","benigno","benzina","bere","berlina","beta","bibita","bici","bidone","bifido","biga","bilancia","bimbo","binocolo","biologo","bipede","bipolare","birbante","birra","biscotto","bisesto","bisnonno","bisonte","bisturi","bizzarro","blando","blatta","bollito","bonifico","bordo","bosco","botanico","bottino","bozzolo","braccio","bradipo","brama","branca","bravura","bretella","brevetto","brezza","briglia","brillante","brindare","broccolo","brodo","bronzina","brullo","bruno","bubbone","buca","budino","buffone","buio","bulbo","buono","burlone","burrasca","bussola","busta","cadetto","caduco","calamaro","calcolo","calesse","calibro","calmo","caloria","cambusa","camerata","camicia","cammino","camola","campale","canapa","candela","cane","canino","canotto","cantina","capace","capello","capitolo","capogiro","cappero","capra","capsula","carapace","carcassa","cardo","carisma","carovana","carretto","cartolina","casaccio","cascata","caserma","caso","cassone","castello","casuale","catasta","catena","catrame","cauto","cavillo","cedibile","cedrata","cefalo","celebre","cellulare","cena","cenone","centesimo","ceramica","cercare","certo","cerume","cervello","cesoia","cespo","ceto","chela","chiaro","chicca","chiedere","chimera","china","chirurgo","chitarra","ciao","ciclismo","cifrare","cigno","cilindro","ciottolo","circa","cirrosi","citrico","cittadino","ciuffo","civetta","civile","classico","clinica","cloro","cocco","codardo","codice","coerente","cognome","collare","colmato","colore","colposo","coltivato","colza","coma","cometa","commando","comodo","computer","comune","conciso","condurre","conferma","congelare","coniuge","connesso","conoscere","consumo","continuo","convegno","coperto","copione","coppia","copricapo","corazza","cordata","coricato","cornice","corolla","corpo","corredo","corsia","cortese","cosmico","costante","cottura","covato","cratere","cravatta","creato","credere","cremoso","crescita","creta","criceto","crinale","crisi","critico","croce","cronaca","crostata","cruciale","crusca","cucire","cuculo","cugino","cullato","cupola","curatore","cursore","curvo","cuscino","custode","dado","daino","dalmata","damerino","daniela","dannoso","danzare","datato","davanti","davvero","debutto","decennio","deciso","declino","decollo","decreto","dedicato","definito","deforme","degno","delegare","delfino","delirio","delta","demenza","denotato","dentro","deposito","derapata","derivare","deroga","descritto","deserto","desiderio","desumere","detersivo","devoto","diametro","dicembre","diedro","difeso","diffuso","digerire","digitale","diluvio","dinamico","dinnanzi","dipinto","diploma","dipolo","diradare","dire","dirotto","dirupo","disagio","discreto","disfare","disgelo","disposto","distanza","disumano","dito","divano","divelto","dividere","divorato","doblone","docente","doganale","dogma","dolce","domato","domenica","dominare","dondolo","dono","dormire","dote","dottore","dovuto","dozzina","drago","druido","dubbio","dubitare","ducale","duna","duomo","duplice","duraturo","ebano","eccesso","ecco","eclissi","economia","edera","edicola","edile","editoria","educare","egemonia","egli","egoismo","egregio","elaborato","elargire","elegante","elencato","eletto","elevare","elfico","elica","elmo","elsa","eluso","emanato","emblema","emesso","emiro","emotivo","emozione","empirico","emulo","endemico","enduro","energia","enfasi","enoteca","entrare","enzima","epatite","epilogo","episodio","epocale","eppure","equatore","erario","erba","erboso","erede","eremita","erigere","ermetico","eroe","erosivo","errante","esagono","esame","esanime","esaudire","esca","esempio","esercito","esibito","esigente","esistere","esito","esofago","esortato","esoso","espanso","espresso","essenza","esso","esteso","estimare","estonia","estroso","esultare","etilico","etnico","etrusco","etto","euclideo","europa","evaso","evidenza","evitato","evoluto","evviva","fabbrica","faccenda","fachiro","falco","famiglia","fanale","fanfara","fango","fantasma","fare","farfalla","farinoso","farmaco","fascia","fastoso","fasullo","faticare","fato","favoloso","febbre","fecola","fede","fegato","felpa","feltro","femmina","fendere","fenomeno","fermento","ferro","fertile","fessura","festivo","fetta","feudo","fiaba","fiducia","fifa","figurato","filo","finanza","finestra","finire","fiore","fiscale","fisico","fiume","flacone","flamenco","flebo","flemma","florido","fluente","fluoro","fobico","focaccia","focoso","foderato","foglio","folata","folclore","folgore","fondente","fonetico","fonia","fontana","forbito","forchetta","foresta","formica","fornaio","foro","fortezza","forzare","fosfato","fosso","fracasso","frana","frassino","fratello","freccetta","frenata","fresco","frigo","frollino","fronde","frugale","frutta","fucilata","fucsia","fuggente","fulmine","fulvo","fumante","fumetto","fumoso","fune","funzione","fuoco","furbo","furgone","furore","fuso","futile","gabbiano","gaffe","galateo","gallina","galoppo","gambero","gamma","garanzia","garbo","garofano","garzone","gasdotto","gasolio","gastrico","gatto","gaudio","gazebo","gazzella","geco","gelatina","gelso","gemello","gemmato","gene","genitore","gennaio","genotipo","gergo","ghepardo","ghiaccio","ghisa","giallo","gilda","ginepro","giocare","gioiello","giorno","giove","girato","girone","gittata","giudizio","giurato","giusto","globulo","glutine","gnomo","gobba","golf","gomito","gommone","gonfio","gonna","governo","gracile","grado","grafico","grammo","grande","grattare","gravoso","grazia","greca","gregge","grifone","grigio","grinza","grotta","gruppo","guadagno","guaio","guanto","guardare","gufo","guidare","ibernato","icona","identico","idillio","idolo","idra","idrico","idrogeno","igiene","ignaro","ignorato","ilare","illeso","illogico","illudere","imballo","imbevuto","imbocco","imbuto","immane","immerso","immolato","impacco","impeto","impiego","importo","impronta","inalare","inarcare","inattivo","incanto","incendio","inchino","incisivo","incluso","incontro","incrocio","incubo","indagine","india","indole","inedito","infatti","infilare","inflitto","ingaggio","ingegno","inglese","ingordo","ingrosso","innesco","inodore","inoltrare","inondato","insano","insetto","insieme","insonnia","insulina","intasato","intero","intonaco","intuito","inumidire","invalido","invece","invito","iperbole","ipnotico","ipotesi","ippica","iride","irlanda","ironico","irrigato","irrorare","isolato","isotopo","isterico","istituto","istrice","italia","iterare","labbro","labirinto","lacca","lacerato","lacrima","lacuna","laddove","lago","lampo","lancetta","lanterna","lardoso","larga","laringe","lastra","latenza","latino","lattuga","lavagna","lavoro","legale","leggero","lembo","lentezza","lenza","leone","lepre","lesivo","lessato","lesto","letterale","leva","levigato","libero","lido","lievito","lilla","limatura","limitare","limpido","lineare","lingua","liquido","lira","lirica","lisca","lite","litigio","livrea","locanda","lode","logica","lombare","londra","longevo","loquace","lorenzo","loto","lotteria","luce","lucidato","lumaca","luminoso","lungo","lupo","luppolo","lusinga","lusso","lutto","macabro","macchina","macero","macinato","madama","magico","maglia","magnete","magro","maiolica","malafede","malgrado","malinteso","malsano","malto","malumore","mana","mancia","mandorla","mangiare","manifesto","mannaro","manovra","mansarda","mantide","manubrio","mappa","maratona","marcire","maretta","marmo","marsupio","maschera","massaia","mastino","materasso","matricola","mattone","maturo","mazurca","meandro","meccanico","mecenate","medesimo","meditare","mega","melassa","melis","melodia","meninge","meno","mensola","mercurio","merenda","merlo","meschino","mese","messere","mestolo","metallo","metodo","mettere","miagolare","mica","micelio","michele","microbo","midollo","miele","migliore","milano","milite","mimosa","minerale","mini","minore","mirino","mirtillo","miscela","missiva","misto","misurare","mitezza","mitigare","mitra","mittente","mnemonico","modello","modifica","modulo","mogano","mogio","mole","molosso","monastero","monco","mondina","monetario","monile","monotono","monsone","montato","monviso","mora","mordere","morsicato","mostro","motivato","motosega","motto","movenza","movimento","mozzo","mucca","mucosa","muffa","mughetto","mugnaio","mulatto","mulinello","multiplo","mummia","munto","muovere","murale","musa","muscolo","musica","mutevole","muto","nababbo","nafta","nanometro","narciso","narice","narrato","nascere","nastrare","naturale","nautica","naviglio","nebulosa","necrosi","negativo","negozio","nemmeno","neofita","neretto","nervo","nessuno","nettuno","neutrale","neve","nevrotico","nicchia","ninfa","nitido","nobile","nocivo","nodo","nome","nomina","nordico","normale","norvegese","nostrano","notare","notizia","notturno","novella","nucleo","nulla","numero","nuovo","nutrire","nuvola","nuziale","oasi","obbedire","obbligo","obelisco","oblio","obolo","obsoleto","occasione","occhio","occidente","occorrere","occultare","ocra","oculato","odierno","odorare","offerta","offrire","offuscato","oggetto","oggi","ognuno","olandese","olfatto","oliato","oliva","ologramma","oltre","omaggio","ombelico","ombra","omega","omissione","ondoso","onere","onice","onnivoro","onorevole","onta","operato","opinione","opposto","oracolo","orafo","ordine","orecchino","orefice","orfano","organico","origine","orizzonte","orma","ormeggio","ornativo","orologio","orrendo","orribile","ortensia","ortica","orzata","orzo","osare","oscurare","osmosi","ospedale","ospite","ossa","ossidare","ostacolo","oste","otite","otre","ottagono","ottimo","ottobre","ovale","ovest","ovino","oviparo","ovocito","ovunque","ovviare","ozio","pacchetto","pace","pacifico","padella","padrone","paese","paga","pagina","palazzina","palesare","pallido","palo","palude","pandoro","pannello","paolo","paonazzo","paprica","parabola","parcella","parere","pargolo","pari","parlato","parola","partire","parvenza","parziale","passivo","pasticca","patacca","patologia","pattume","pavone","peccato","pedalare","pedonale","peggio","peloso","penare","pendice","penisola","pennuto","penombra","pensare","pentola","pepe","pepita","perbene","percorso","perdonato","perforare","pergamena","periodo","permesso","perno","perplesso","persuaso","pertugio","pervaso","pesatore","pesista","peso","pestifero","petalo","pettine","petulante","pezzo","piacere","pianta","piattino","piccino","picozza","piega","pietra","piffero","pigiama","pigolio","pigro","pila","pilifero","pillola","pilota","pimpante","pineta","pinna","pinolo","pioggia","piombo","piramide","piretico","pirite","pirolisi","pitone","pizzico","placebo","planare","plasma","platano","plenario","pochezza","poderoso","podismo","poesia","poggiare","polenta","poligono","pollice","polmonite","polpetta","polso","poltrona","polvere","pomice","pomodoro","ponte","popoloso","porfido","poroso","porpora","porre","portata","posa","positivo","possesso","postulato","potassio","potere","pranzo","prassi","pratica","precluso","predica","prefisso","pregiato","prelievo","premere","prenotare","preparato","presenza","pretesto","prevalso","prima","principe","privato","problema","procura","produrre","profumo","progetto","prolunga","promessa","pronome","proposta","proroga","proteso","prova","prudente","prugna","prurito","psiche","pubblico","pudica","pugilato","pugno","pulce","pulito","pulsante","puntare","pupazzo","pupilla","puro","quadro","qualcosa","quasi","querela","quota","raccolto","raddoppio","radicale","radunato","raffica","ragazzo","ragione","ragno","ramarro","ramingo","ramo","randagio","rantolare","rapato","rapina","rappreso","rasatura","raschiato","rasente","rassegna","rastrello","rata","ravveduto","reale","recepire","recinto","recluta","recondito","recupero","reddito","redimere","regalato","registro","regola","regresso","relazione","remare","remoto","renna","replica","reprimere","reputare","resa","residente","responso","restauro","rete","retina","retorica","rettifica","revocato","riassunto","ribadire","ribelle","ribrezzo","ricarica","ricco","ricevere","riciclato","ricordo","ricreduto","ridicolo","ridurre","rifasare","riflesso","riforma","rifugio","rigare","rigettato","righello","rilassato","rilevato","rimanere","rimbalzo","rimedio","rimorchio","rinascita","rincaro","rinforzo","rinnovo","rinomato","rinsavito","rintocco","rinuncia","rinvenire","riparato","ripetuto","ripieno","riportare","ripresa","ripulire","risata","rischio","riserva","risibile","riso","rispetto","ristoro","risultato","risvolto","ritardo","ritegno","ritmico","ritrovo","riunione","riva","riverso","rivincita","rivolto","rizoma","roba","robotico","robusto","roccia","roco","rodaggio","rodere","roditore","rogito","rollio","romantico","rompere","ronzio","rosolare","rospo","rotante","rotondo","rotula","rovescio","rubizzo","rubrica","ruga","rullino","rumine","rumoroso","ruolo","rupe","russare","rustico","sabato","sabbiare","sabotato","sagoma","salasso","saldatura","salgemma","salivare","salmone","salone","saltare","saluto","salvo","sapere","sapido","saporito","saraceno","sarcasmo","sarto","sassoso","satellite","satira","satollo","saturno","savana","savio","saziato","sbadiglio","sbalzo","sbancato","sbarra","sbattere","sbavare","sbendare","sbirciare","sbloccato","sbocciato","sbrinare","sbruffone","sbuffare","scabroso","scadenza","scala","scambiare","scandalo","scapola","scarso","scatenare","scavato","scelto","scenico","scettro","scheda","schiena","sciarpa","scienza","scindere","scippo","sciroppo","scivolo","sclerare","scodella","scolpito","scomparto","sconforto","scoprire","scorta","scossone","scozzese","scriba","scrollare","scrutinio","scuderia","scultore","scuola","scuro","scusare","sdebitare","sdoganare","seccatura","secondo","sedano","seggiola","segnalato","segregato","seguito","selciato","selettivo","sella","selvaggio","semaforo","sembrare","seme","seminato","sempre","senso","sentire","sepolto","sequenza","serata","serbato","sereno","serio","serpente","serraglio","servire","sestina","setola","settimana","sfacelo","sfaldare","sfamato","sfarzoso","sfaticato","sfera","sfida","sfilato","sfinge","sfocato","sfoderare","sfogo","sfoltire","sforzato","sfratto","sfruttato","sfuggito","sfumare","sfuso","sgabello","sgarbato","sgonfiare","sgorbio","sgrassato","sguardo","sibilo","siccome","sierra","sigla","signore","silenzio","sillaba","simbolo","simpatico","simulato","sinfonia","singolo","sinistro","sino","sintesi","sinusoide","sipario","sisma","sistole","situato","slitta","slogatura","sloveno","smarrito","smemorato","smentito","smeraldo","smilzo","smontare","smottato","smussato","snellire","snervato","snodo","sobbalzo","sobrio","soccorso","sociale","sodale","soffitto","sogno","soldato","solenne","solido","sollazzo","solo","solubile","solvente","somatico","somma","sonda","sonetto","sonnifero","sopire","soppeso","sopra","sorgere","sorpasso","sorriso","sorso","sorteggio","sorvolato","sospiro","sosta","sottile","spada","spalla","spargere","spatola","spavento","spazzola","specie","spedire","spegnere","spelatura","speranza","spessore","spettrale","spezzato","spia","spigoloso","spillato","spinoso","spirale","splendido","sportivo","sposo","spranga","sprecare","spronato","spruzzo","spuntino","squillo","sradicare","srotolato","stabile","stacco","staffa","stagnare","stampato","stantio","starnuto","stasera","statuto","stelo","steppa","sterzo","stiletto","stima","stirpe","stivale","stizzoso","stonato","storico","strappo","stregato","stridulo","strozzare","strutto","stuccare","stufo","stupendo","subentro","succoso","sudore","suggerito","sugo","sultano","suonare","superbo","supporto","surgelato","surrogato","sussurro","sutura","svagare","svedese","sveglio","svelare","svenuto","svezia","sviluppo","svista","svizzera","svolta","svuotare","tabacco","tabulato","tacciare","taciturno","tale","talismano","tampone","tannino","tara","tardivo","targato","tariffa","tarpare","tartaruga","tasto","tattico","taverna","tavolata","tazza","teca","tecnico","telefono","temerario","tempo","temuto","tendone","tenero","tensione","tentacolo","teorema","terme","terrazzo","terzetto","tesi","tesserato","testato","tetro","tettoia","tifare","tigella","timbro","tinto","tipico","tipografo","tiraggio","tiro","titanio","titolo","titubante","tizio","tizzone","toccare","tollerare","tolto","tombola","tomo","tonfo","tonsilla","topazio","topologia","toppa","torba","tornare","torrone","tortora","toscano","tossire","tostatura","totano","trabocco","trachea","trafila","tragedia","tralcio","tramonto","transito","trapano","trarre","trasloco","trattato","trave","treccia","tremolio","trespolo","tributo","tricheco","trifoglio","trillo","trincea","trio","tristezza","triturato","trivella","tromba","trono","troppo","trottola","trovare","truccato","tubatura","tuffato","tulipano","tumulto","tunisia","turbare","turchino","tuta","tutela","ubicato","uccello","uccisore","udire","uditivo","uffa","ufficio","uguale","ulisse","ultimato","umano","umile","umorismo","uncinetto","ungere","ungherese","unicorno","unificato","unisono","unitario","unte","uovo","upupa","uragano","urgenza","urlo","usanza","usato","uscito","usignolo","usuraio","utensile","utilizzo","utopia","vacante","vaccinato","vagabondo","vagliato","valanga","valgo","valico","valletta","valoroso","valutare","valvola","vampata","vangare","vanitoso","vano","vantaggio","vanvera","vapore","varano","varcato","variante","vasca","vedetta","vedova","veduto","vegetale","veicolo","velcro","velina","velluto","veloce","venato","vendemmia","vento","verace","verbale","vergogna","verifica","vero","verruca","verticale","vescica","vessillo","vestale","veterano","vetrina","vetusto","viandante","vibrante","vicenda","vichingo","vicinanza","vidimare","vigilia","vigneto","vigore","vile","villano","vimini","vincitore","viola","vipera","virgola","virologo","virulento","viscoso","visione","vispo","vissuto","visura","vita","vitello","vittima","vivanda","vivido","viziare","voce","voga","volatile","volere","volpe","voragine","vulcano","zampogna","zanna","zappato","zattera","zavorra","zefiro","zelante","zelo","zenzero","zerbino","zibetto","zinco","zircone","zitto","zolla","zotico","zucchero","zufolo","zulu","zuppa"],JAPANESE:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],SPANISH:["abaco","abdomen","abeja","abierto","abogado","abono","aborto","abrazo","abrir","abuelo","abuso","acabar","academia","acceso","accion","aceite","acelga","acento","aceptar","acido","aclarar","acne","acoger","acoso","activo","acto","actriz","actuar","acudir","acuerdo","acusar","adicto","admitir","adoptar","adorno","aduana","adulto","aereo","afectar","aficion","afinar","afirmar","agil","agitar","agonia","agosto","agotar","agregar","agrio","agua","agudo","aguila","aguja","ahogo","ahorro","aire","aislar","ajedrez","ajeno","ajuste","alacran","alambre","alarma","alba","album","alcalde","aldea","alegre","alejar","alerta","aleta","alfiler","alga","algodon","aliado","aliento","alivio","alma","almeja","almibar","altar","alteza","altivo","alto","altura","alumno","alzar","amable","amante","amapola","amargo","amasar","ambar","ambito","ameno","amigo","amistad","amor","amparo","amplio","ancho","anciano","ancla","andar","anden","anemia","angulo","anillo","animo","anis","anotar","antena","antiguo","antojo","anual","anular","anuncio","anadir","anejo","ano","apagar","aparato","apetito","apio","aplicar","apodo","aporte","apoyo","aprender","aprobar","apuesta","apuro","arado","arana","arar","arbitro","arbol","arbusto","archivo","arco","arder","ardilla","arduo","area","arido","aries","armonia","arnes","aroma","arpa","arpon","arreglo","arroz","arruga","arte","artista","asa","asado","asalto","ascenso","asegurar","aseo","asesor","asiento","asilo","asistir","asno","asombro","aspero","astilla","astro","astuto","asumir","asunto","atajo","ataque","atar","atento","ateo","atico","atleta","atomo","atraer","atroz","atun","audaz","audio","auge","aula","aumento","ausente","autor","aval","avance","avaro","ave","avellana","avena","avestruz","avion","aviso","ayer","ayuda","ayuno","azafran","azar","azote","azucar","azufre","azul","baba","babor","bache","bahia","baile","bajar","balanza","balcon","balde","bambu","banco","banda","bano","barba","barco","barniz","barro","bascula","baston","basura","batalla","bateria","batir","batuta","baul","bazar","bebe","bebida","bello","besar","beso","bestia","bicho","bien","bingo","blanco","bloque","blusa","boa","bobina","bobo","boca","bocina","boda","bodega","boina","bola","bolero","bolsa","bomba","bondad","bonito","bono","bonsai","borde","borrar","bosque","bote","botin","boveda","bozal","bravo","brazo","brecha","breve","brillo","brinco","brisa","broca","broma","bronce","brote","bruja","brusco","bruto","buceo","bucle","bueno","buey","bufanda","bufon","buho","buitre","bulto","burbuja","burla","burro","buscar","butaca","buzon","caballo","cabeza","cabina","cabra","cacao","cadaver","cadena","caer","cafe","caida","caiman","caja","cajon","cal","calamar","calcio","caldo","calidad","calle","calma","calor","calvo","cama","cambio","camello","camino","campo","cancer","candil","canela","canguro","canica","canto","cana","canon","caoba","caos","capaz","capitan","capote","captar","capucha","cara","carbon","carcel","careta","carga","carino","carne","carpeta","carro","carta","casa","casco","casero","caspa","castor","catorce","catre","caudal","causa","cazo","cebolla","ceder","cedro","celda","celebre","celoso","celula","cemento","ceniza","centro","cerca","cerdo","cereza","cero","cerrar","certeza","cesped","cetro","chacal","chaleco","champu","chancla","chapa","charla","chico","chiste","chivo","choque","choza","chuleta","chupar","ciclon","ciego","cielo","cien","cierto","cifra","cigarro","cima","cinco","cine","cinta","cipres","circo","ciruela","cisne","cita","ciudad","clamor","clan","claro","clase","clave","cliente","clima","clinica","cobre","coccion","cochino","cocina","coco","codigo","codo","cofre","coger","cohete","cojin","cojo","cola","colcha","colegio","colgar","colina","collar","colmo","columna","combate","comer","comida","comodo","compra","conde","conejo","conga","conocer","consejo","contar","copa","copia","corazon","corbata","corcho","cordon","corona","correr","coser","cosmos","costa","craneo","crater","crear","crecer","creido","crema","cria","crimen","cripta","crisis","cromo","cronica","croqueta","crudo","cruz","cuadro","cuarto","cuatro","cubo","cubrir","cuchara","cuello","cuento","cuerda","cuesta","cueva","cuidar","culebra","culpa","culto","cumbre","cumplir","cuna","cuneta","cuota","cupon","cupula","curar","curioso","curso","curva","cutis","dama","danza","dar","dardo","datil","deber","debil","decada","decir","dedo","defensa","definir","dejar","delfin","delgado","delito","demora","denso","dental","deporte","derecho","derrota","desayuno","deseo","desfile","desnudo","destino","desvio","detalle","detener","deuda","dia","diablo","diadema","diamante","diana","diario","dibujo","dictar","diente","dieta","diez","dificil","digno","dilema","diluir","dinero","directo","dirigir","disco","diseno","disfraz","diva","divino","doble","doce","dolor","domingo","don","donar","dorado","dormir","dorso","dos","dosis","dragon","droga","ducha","duda","duelo","dueno","dulce","duo","duque","durar","dureza","duro","ebano","ebrio","echar","eco","ecuador","edad","edicion","edificio","editor","educar","efecto","eficaz","eje","ejemplo","elefante","elegir","elemento","elevar","elipse","elite","elixir","elogio","eludir","embudo","emitir","emocion","empate","empeno","empleo","empresa","enano","encargo","enchufe","encia","enemigo","enero","enfado","enfermo","engano","enigma","enlace","enorme","enredo","ensayo","ensenar","entero","entrar","envase","envio","epoca","equipo","erizo","escala","escena","escolar","escribir","escudo","esencia","esfera","esfuerzo","espada","espejo","espia","esposa","espuma","esqui","estar","este","estilo","estufa","etapa","eterno","etica","etnia","evadir","evaluar","evento","evitar","exacto","examen","exceso","excusa","exento","exigir","exilio","existir","exito","experto","explicar","exponer","extremo","fabrica","fabula","fachada","facil","factor","faena","faja","falda","fallo","falso","faltar","fama","familia","famoso","faraon","farmacia","farol","farsa","fase","fatiga","fauna","favor","fax","febrero","fecha","feliz","feo","feria","feroz","fertil","fervor","festin","fiable","fianza","fiar","fibra","ficcion","ficha","fideo","fiebre","fiel","fiera","fiesta","figura","fijar","fijo","fila","filete","filial","filtro","fin","finca","fingir","finito","firma","flaco","flauta","flecha","flor","flota","fluir","flujo","fluor","fobia","foca","fogata","fogon","folio","folleto","fondo","forma","forro","fortuna","forzar","fosa","foto","fracaso","fragil","franja","frase","fraude","freir","freno","fresa","frio","frito","fruta","fuego","fuente","fuerza","fuga","fumar","funcion","funda","furgon","furia","fusil","futbol","futuro","gacela","gafas","gaita","gajo","gala","galeria","gallo","gamba","ganar","gancho","ganga","ganso","garaje","garza","gasolina","gastar","gato","gavilan","gemelo","gemir","gen","genero","genio","gente","geranio","gerente","germen","gesto","gigante","gimnasio","girar","giro","glaciar","globo","gloria","gol","golfo","goloso","golpe","goma","gordo","gorila","gorra","gota","goteo","gozar","grada","grafico","grano","grasa","gratis","grave","grieta","grillo","gripe","gris","grito","grosor","grua","grueso","grumo","grupo","guante","guapo","guardia","guerra","guia","guino","guion","guiso","guitarra","gusano","gustar","haber","habil","hablar","hacer","hacha","hada","hallar","hamaca","harina","haz","hazana","hebilla","hebra","hecho","helado","helio","hembra","herir","hermano","heroe","hervir","hielo","hierro","higado","higiene","hijo","himno","historia","hocico","hogar","hoguera","hoja","hombre","hongo","honor","honra","hora","hormiga","horno","hostil","hoyo","hueco","huelga","huerta","hueso","huevo","huida","huir","humano","humedo","humilde","humo","hundir","huracan","hurto","icono","ideal","idioma","idolo","iglesia","iglu","igual","ilegal","ilusion","imagen","iman","imitar","impar","imperio","imponer","impulso","incapaz","indice","inerte","infiel","informe","ingenio","inicio","inmenso","inmune","innato","insecto","instante","interes","intimo","intuir","inutil","invierno","ira","iris","ironia","isla","islote","jabali","jabon","jamon","jarabe","jardin","jarra","jaula","jazmin","jefe","jeringa","jinete","jornada","joroba","joven","joya","juerga","jueves","juez","jugador","jugo","juguete","juicio","junco","jungla","junio","juntar","jupiter","jurar","justo","juvenil","juzgar","kilo","koala","labio","lacio","lacra","lado","ladron","lagarto","lagrima","laguna","laico","lamer","lamina","lampara","lana","lancha","langosta","lanza","lapiz","largo","larva","lastima","lata","latex","latir","laurel","lavar","lazo","leal","leccion","leche","lector","leer","legion","legumbre","lejano","lengua","lento","lena","leon","leopardo","lesion","letal","letra","leve","leyenda","libertad","libro","licor","lider","lidiar","lienzo","liga","ligero","lima","limite","limon","limpio","lince","lindo","linea","lingote","lino","linterna","liquido","liso","lista","litera","litio","litro","llaga","llama","llanto","llave","llegar","llenar","llevar","llorar","llover","lluvia","lobo","locion","loco","locura","logica","logro","lombriz","lomo","lonja","lote","lucha","lucir","lugar","lujo","luna","lunes","lupa","lustro","luto","luz","maceta","macho","madera","madre","maduro","maestro","mafia","magia","mago","maiz","maldad","maleta","malla","malo","mama","mambo","mamut","manco","mando","manejar","manga","maniqui","manjar","mano","manso","manta","manana","mapa","maquina","mar","marco","marea","marfil","margen","marido","marmol","marron","martes","marzo","masa","mascara","masivo","matar","materia","matiz","matriz","maximo","mayor","mazorca","mecha","medalla","medio","medula","mejilla","mejor","melena","melon","memoria","menor","mensaje","mente","menu","mercado","merengue","merito","mes","meson","meta","meter","metodo","metro","mezcla","miedo","miel","miembro","miga","mil","milagro","militar","millon","mimo","mina","minero","minimo","minuto","miope","mirar","misa","miseria","misil","mismo","mitad","mito","mochila","mocion","moda","modelo","moho","mojar","molde","moler","molino","momento","momia","monarca","moneda","monja","monto","mono","morada","morder","moreno","morir","morro","morsa","mortal","mosca","mostrar","motivo","mover","movil","mozo","mucho","mudar","mueble","muela","muerte","muestra","mugre","mujer","mula","muleta","multa","mundo","muneca","mural","muro","musculo","museo","musgo","musica","muslo","nacar","nacion","nadar","naipe","naranja","nariz","narrar","nasal","natal","nativo","natural","nausea","naval","nave","navidad","necio","nectar","negar","negocio","negro","neon","nervio","neto","neutro","nevar","nevera","nicho","nido","niebla","nieto","ninez","nino","nitido","nivel","nobleza","noche","nomina","noria","norma","norte","nota","noticia","novato","novela","novio","nube","nuca","nucleo","nudillo","nudo","nuera","nueve","nuez","nulo","numero","nutria","oasis","obeso","obispo","objeto","obra","obrero","observar","obtener","obvio","oca","ocaso","oceano","ochenta","ocho","ocio","ocre","octavo","octubre","oculto","ocupar","ocurrir","odiar","odio","odisea","oeste","ofensa","oferta","oficio","ofrecer","ogro","oido","oir","ojo","ola","oleada","olfato","olivo","olla","olmo","olor","olvido","ombligo","onda","onza","opaco","opcion","opera","opinar","oponer","optar","optica","opuesto","oracion","orador","oral","orbita","orca","orden","oreja","organo","orgia","orgullo","oriente","origen","orilla","oro","orquesta","oruga","osadia","oscuro","osezno","oso","ostra","otono","otro","oveja","ovulo","oxido","oxigeno","oyente","ozono","pacto","padre","paella","pagina","pago","pais","pajaro","palabra","palco","paleta","palido","palma","paloma","palpar","pan","panal","panico","pantera","panuelo","papa","papel","papilla","paquete","parar","parcela","pared","parir","paro","parpado","parque","parrafo","parte","pasar","paseo","pasion","paso","pasta","pata","patio","patria","pausa","pauta","pavo","payaso","peaton","pecado","pecera","pecho","pedal","pedir","pegar","peine","pelar","peldano","pelea","peligro","pellejo","pelo","peluca","pena","pensar","penon","peon","peor","pepino","pequeno","pera","percha","perder","pereza","perfil","perico","perla","permiso","perro","persona","pesa","pesca","pesimo","pestana","petalo","petroleo","pez","pezuna","picar","pichon","pie","piedra","pierna","pieza","pijama","pilar","piloto","pimienta","pino","pintor","pinza","pina","piojo","pipa","pirata","pisar","piscina","piso","pista","piton","pizca","placa","plan","plata","playa","plaza","pleito","pleno","plomo","pluma","plural","pobre","poco","poder","podio","poema","poesia","poeta","polen","policia","pollo","polvo","pomada","pomelo","pomo","pompa","poner","porcion","portal","posada","poseer","posible","poste","potencia","potro","pozo","prado","precoz","pregunta","premio","prensa","preso","previo","primo","principe","prision","privar","proa","probar","proceso","producto","proeza","profesor","programa","prole","promesa","pronto","propio","proximo","prueba","publico","puchero","pudor","pueblo","puerta","puesto","pulga","pulir","pulmon","pulpo","pulso","puma","punto","punal","puno","pupa","pupila","pure","quedar","queja","quemar","querer","queso","quieto","quimica","quince","quitar","rabano","rabia","rabo","racion","radical","raiz","rama","rampa","rancho","rango","rapaz","rapido","rapto","rasgo","raspa","rato","rayo","raza","razon","reaccion","realidad","rebano","rebote","recaer","receta","rechazo","recoger","recreo","recto","recurso","red","redondo","reducir","reflejo","reforma","refran","refugio","regalo","regir","regla","regreso","rehen","reino","reir","reja","relato","relevo","relieve","relleno","reloj","remar","remedio","remo","rencor","rendir","renta","reparto","repetir","reposo","reptil","res","rescate","resina","respeto","resto","resumen","retiro","retorno","retrato","reunir","reves","revista","rey","rezar","rico","riego","rienda","riesgo","rifa","rigido","rigor","rincon","rinon","rio","riqueza","risa","ritmo","rito","rizo","roble","roce","rociar","rodar","rodeo","rodilla","roer","rojizo","rojo","romero","romper","ron","ronco","ronda","ropa","ropero","rosa","rosca","rostro","rotar","rubi","rubor","rudo","rueda","rugir","ruido","ruina","ruleta","rulo","rumbo","rumor","ruptura","ruta","rutina","sabado","saber","sabio","sable","sacar","sagaz","sagrado","sala","saldo","salero","salir","salmon","salon","salsa","salto","salud","salvar","samba","sancion","sandia","sanear","sangre","sanidad","sano","santo","sapo","saque","sardina","sarten","sastre","satan","sauna","saxofon","seccion","seco","secreto","secta","sed","seguir","seis","sello","selva","semana","semilla","senda","sensor","senal","senor","separar","sepia","sequia","ser","serie","sermon","servir","sesenta","sesion","seta","setenta","severo","sexo","sexto","sidra","siesta","siete","siglo","signo","silaba","silbar","silencio","silla","simbolo","simio","sirena","sistema","sitio","situar","sobre","socio","sodio","sol","solapa","soldado","soledad","solido","soltar","solucion","sombra","sondeo","sonido","sonoro","sonrisa","sopa","soplar","soporte","sordo","sorpresa","sorteo","sosten","sotano","suave","subir","suceso","sudor","suegra","suelo","sueno","suerte","sufrir","sujeto","sultan","sumar","superar","suplir","suponer","supremo","sur","surco","sureno","surgir","susto","sutil","tabaco","tabique","tabla","tabu","taco","tacto","tajo","talar","talco","talento","talla","talon","tamano","tambor","tango","tanque","tapa","tapete","tapia","tapon","taquilla","tarde","tarea","tarifa","tarjeta","tarot","tarro","tarta","tatuaje","tauro","taza","tazon","teatro","techo","tecla","tecnica","tejado","tejer","tejido","tela","telefono","tema","temor","templo","tenaz","tender","tener","tenis","tenso","teoria","terapia","terco","termino","ternura","terror","tesis","tesoro","testigo","tetera","texto","tez","tibio","tiburon","tiempo","tienda","tierra","tieso","tigre","tijera","tilde","timbre","timido","timo","tinta","tio","tipico","tipo","tira","tiron","titan","titere","titulo","tiza","toalla","tobillo","tocar","tocino","todo","toga","toldo","tomar","tono","tonto","topar","tope","toque","torax","torero","tormenta","torneo","toro","torpedo","torre","torso","tortuga","tos","tosco","toser","toxico","trabajo","tractor","traer","trafico","trago","traje","tramo","trance","trato","trauma","trazar","trebol","tregua","treinta","tren","trepar","tres","tribu","trigo","tripa","triste","triunfo","trofeo","trompa","tronco","tropa","trote","trozo","truco","trueno","trufa","tuberia","tubo","tuerto","tumba","tumor","tunel","tunica","turbina","turismo","turno","tutor","ubicar","ulcera","umbral","unidad","unir","universo","uno","untar","una","urbano","urbe","urgente","urna","usar","usuario","util","utopia","uva","vaca","vacio","vacuna","vagar","vago","vaina","vajilla","vale","valido","valle","valor","valvula","vampiro","vara","variar","varon","vaso","vecino","vector","vehiculo","veinte","vejez","vela","velero","veloz","vena","vencer","venda","veneno","vengar","venir","venta","venus","ver","verano","verbo","verde","vereda","verja","verso","verter","via","viaje","vibrar","vicio","victima","vida","video","vidrio","viejo","viernes","vigor","vil","villa","vinagre","vino","vinedo","violin","viral","virgo","virtud","visor","vispera","vista","vitamina","viudo","vivaz","vivero","vivir","vivo","volcan","volumen","volver","voraz","votar","voto","voz","vuelo","vulgar","yacer","yate","yegua","yema","yerno","yeso","yodo","yoga","yogur","zafiro","zanja","zapato","zarza","zona","zorro","zumo","zurdo"]},ke=function(e,r){if(!(this instanceof ke))return new ke(e,r);var i,a,o;if(t.isArray(e)&&(r=e,e=null),Buffer.isBuffer(e))o=e;else if(t.isString(e))a=l.nfkd(e);else if(t.isNumber(e))i=e;else if(e)throw new v.InvalidArgument("data","Must be a Buffer, a string or an integer");if(i=i||128,r=r||ke._getDictionary(a),a&&!r)throw new v.UnknownWordlist(a);if(r=r||ke.Words.ENGLISH,o&&(a=ke._entropy2mnemonic(o,r)),a&&!ke.isValid(a,r))throw new v.InvalidMnemonic(a);if(0!=i%32||128>i)throw new v.InvalidArgument("ENT","Values must be ENT > 128 and ENT % 32 == 0");a=a||ke._mnemonic(i,r),Object.defineProperty(this,"wordlist",{configurable:!1,value:r}),Object.defineProperty(this,"phrase",{configurable:!1,value:a})};ke.Words=Ie,ke.isValid=function(e,t){var r;if(e=l.nfkd(e),!(t=t||ke._getDictionary(e)))return!1;var i=e.split(" "),a="";for(r=0;r<i.length;r+=1){var o=t.indexOf(i[r]);if(0>o)return!1;a+="00000000000".concat(o.toString(2)).slice(-11)}var n=a.length/33,s=a.slice(-n),u=a.slice(0,a.length-n),c=Buffer.alloc(u.length/8);for(r=0;r<u.length/8;r+=1)c.writeUInt8(parseInt(a.slice(8*r,8*(r+1)),2),r);return ke._entropyChecksum(c)===s},ke._belongsToWordlist=function(e,t){for(var r=l.nfkd(e).split(" "),i=0;i<r.length;i+=1)if(0>t.indexOf(r[i]))return!1;return!0},ke._getDictionary=function(e){if(!e)return null;for(var t,r=Object.keys(ke.Words),i=0;i<r.length;i+=1)if(t=r[i],ke._belongsToWordlist(e,ke.Words[t]))return ke.Words[t];return null},ke.prototype.toSeed=function(e){return e=e||"",ke.pbkdf2(l.nfkd(this.phrase),l.nfkd("mnemonic".concat(e)),2048,64)},ke.fromSeed=function(e,r){return y.checkArgument(Buffer.isBuffer(e),"seed must be a Buffer."),y.checkArgument(t.isArray(r)||t.isString(r),"wordlist must be a string or an array."),new ke(e,r)},ke.prototype.toHDPrivateKey=function(e,t){var r=this.toSeed(e);return ye.fromSeed(r,t)},ke.prototype.toString=function(){return this.phrase},ke.prototype.inspect=function(){return"<Mnemonic: ".concat(this.toString()," >")},ke._mnemonic=function(e,t){var r=M.getRandomBuffer(e/8);return ke._entropy2mnemonic(r,t)},ke._entropy2mnemonic=function(e,t){var r,i="";for(r=0;r<e.length;r+=1)i+="00000000".concat(e[r].toString(2)).slice(-8);if(0!=(i+=ke._entropyChecksum(e)).length%11)throw new v.InvalidEntropy(i);var a=[];for(r=0;r<i.length/11;r+=1){var o=parseInt(i.slice(11*r,11*(r+1)),2);a.push(t[o])}return t===ke.Words.JAPANESE?a.join(""):a.join(" ")},ke._entropyChecksum=function(e){for(var t=P.sha256(e),r=8*e.length/32,a=new i(t.toString("hex"),16).toString(2);0!=a.length%256;)a="0".concat(a);return a.slice(0,r)},ke.pbkdf2=function(e,t,r,i){if(i>274877906880)throw Error("Requested key length too long");if("string"!=typeof e&&!Buffer.isBuffer(e))throw new TypeError("key must a string or Buffer");if("string"!=typeof t&&!Buffer.isBuffer(t))throw new TypeError("salt must a string or Buffer");"string"==typeof e&&(e=Buffer.from(e)),"string"==typeof t&&(t=Buffer.from(t));var a=Buffer.alloc(i),o=Buffer.alloc(64),s=Buffer.alloc(64),u=Buffer.alloc(t.length+4),c=Math.ceil(i/64);t.copy(u,0,0,t.length);for(var l=1;l<=c;l+=1){u[t.length+0]=255&l>>24,u[t.length+1]=255&l>>16,u[t.length+2]=255&l>>8,u[t.length+3]=255&l>>0;var h=n.hmac(n.sha512,e).update(u).digest();(o=Buffer.from(h)).copy(s,0,0,64);for(var f,p=1;p<r;p+=1){f=n.hmac(n.sha512,e).update(o).digest(),o=Buffer.from(f);for(var d=0;d<64;d+=1)s[d]^=o[d]}var m=64*(l-1),g=l===c?i-64*(c-1):64;s.copy(a,m,0,g)}return a};var we="0.1.18",Oe=function e(t){return this instanceof e?void(t?(this.initialize(),this.set(t)):this.initialize()):new e(t)};Oe.prototype.verify=function(e,r,i,a,o){var n;if(t.isUndefined(i)&&(i=new pe),t.isUndefined(a)&&(a=0),t.isUndefined(o)&&(o=0),this.set({script:e,tx:i,nin:a,flags:o}),0!=(o&Oe.SCRIPT_VERIFY_SIGPUSHONLY)&&!e.isPushOnly())return this.errstr="SCRIPT_ERR_SIG_PUSHONLY",!1;if(!this.evaluate())return!1;o&Oe.SCRIPT_VERIFY_P2SH&&(n=this.stack.slice());var{stack:s}=this;if(this.initialize(),this.set({script:r,stack:s,tx:i,nin:a,flags:o}),!this.evaluate())return!1;if(0===this.stack.length)return this.errstr="SCRIPT_ERR_EVAL_FALSE_NO_RESULT",!1;var u=this.stack[this.stack.length-1];if(!Oe.castToBool(u))return this.errstr="SCRIPT_ERR_EVAL_FALSE_IN_STACK",!1;if(o&Oe.SCRIPT_VERIFY_P2SH&&r.isScriptHashOut()){if(!e.isPushOnly())return this.errstr="SCRIPT_ERR_SIG_PUSHONLY",!1;if(0===n.length)throw new Error("internal error - stack copy empty");var c=n[n.length-1],l=X.fromBuffer(c);return n.pop(),this.initialize(),this.set({script:l,stack:n,tx:i,nin:a,flags:o}),!(!this.evaluate()||(0===n.length?(this.errstr="SCRIPT_ERR_EVAL_FALSE_NO_P2SH_STACK",1):!Oe.castToBool(n[n.length-1])&&(this.errstr="SCRIPT_ERR_EVAL_FALSE_IN_P2SH_STACK",1)))}return!0},Oe.prototype.initialize=function(){this.stack=[],this.altstack=[],this.pc=0,this.pbegincodehash=0,this.nOpCount=0,this.vfExec=[],this.errstr="",this.flags=0},Oe.prototype.set=function(e){this.script=e.script||this.script,this.tx=e.tx||this.tx,this.nin=void 0===e.nin?this.nin:e.nin,this.stack=e.stack||this.stack,this.altstack=e.altstack||this.altstack,this.pc=void 0===e.pc?this.pc:e.pc,this.pbegincodehash=void 0===e.pbegincodehash?this.pbegincodehash:e.pbegincodehash,this.nOpCount=void 0===e.nOpCount?this.nOpCount:e.nOpCount,this.vfExec=e.vfExec||this.vfExec,this.errstr=e.errstr||this.errstr,this.flags=void 0===e.flags?this.flags:e.flags},Oe.true=Buffer.from([1]),Oe.false=Buffer.from([]),Oe.MAX_SCRIPT_ELEMENT_SIZE=520,Oe.LOCKTIME_THRESHOLD_BN=new i(Oe.LOCKTIME_THRESHOLD=5e8),Oe.SCRIPT_VERIFY_NONE=0,Oe.SCRIPT_VERIFY_P2SH=1,Oe.SCRIPT_VERIFY_STRICTENC=2,Oe.SCRIPT_VERIFY_DERSIG=4,Oe.SCRIPT_VERIFY_LOW_S=8,Oe.SCRIPT_VERIFY_NULLDUMMY=16,Oe.SCRIPT_VERIFY_SIGPUSHONLY=32,Oe.SCRIPT_VERIFY_MINIMALDATA=64,Oe.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS=128,Oe.SCRIPT_VERIFY_CHECKLOCKTIMEVERIFY=512,Oe.castToBool=function(e){for(var t=0;t<e.length;t+=1)if(0!==e[t])return t!==e.length-1||128!==e[t];return!1},Oe.prototype.checkSignatureEncoding=function(e){if(0!=(this.flags&(Oe.SCRIPT_VERIFY_DERSIG|Oe.SCRIPT_VERIFY_LOW_S|Oe.SCRIPT_VERIFY_STRICTENC))&&!Z.isTxDER(e))return this.errstr="SCRIPT_ERR_SIG_DER_INVALID_FORMAT",!1;if(0!=(this.flags&Oe.SCRIPT_VERIFY_LOW_S)){if(!Z.fromTxFormat(e).hasLowS())return this.errstr="SCRIPT_ERR_SIG_DER_HIGH_S",!1}else if(0!=(this.flags&Oe.SCRIPT_VERIFY_STRICTENC)&&!Z.fromTxFormat(e).hasDefinedHashtype())return this.errstr="SCRIPT_ERR_SIG_HASHTYPE",!1;return!0},Oe.prototype.checkPubkeyEncoding=function(e){return!(0!=(this.flags&Oe.SCRIPT_VERIFY_STRICTENC)&&!q.isValid(e)&&(this.errstr="SCRIPT_ERR_PUBKEYTYPE",1))},Oe.prototype.evaluate=function(){if(1e4<this.script.toBuffer().length)return this.errstr="SCRIPT_ERR_SCRIPT_SIZE",!1;try{for(;this.pc<this.script.chunks.length;){if(!this.step())return!1}if(1e3<this.stack.length+this.altstack.length)return this.errstr="SCRIPT_ERR_STACK_SIZE",!1}catch(e){return this.errstr="SCRIPT_ERR_UNKNOWN_ERROR: ".concat(e),!1}return!(0<this.vfExec.length&&(this.errstr="SCRIPT_ERR_UNBALANCED_CONDITIONAL",1))},Oe.prototype.checkLockTime=function(e){return!!(this.tx.nLockTime<Oe.LOCKTIME_THRESHOLD&&e.lt(Oe.LOCKTIME_THRESHOLD_BN)||this.tx.nLockTime>=Oe.LOCKTIME_THRESHOLD&&e.gte(Oe.LOCKTIME_THRESHOLD_BN))&&!e.gt(new i(this.tx.nLockTime))&&!!this.tx.inputs[this.nin].isFinal()},Oe.prototype.step=function(){var e,r,a,o,n,s,u,c,l,h,f,p,d,m,g,b,v,y=0!=(this.flags&Oe.SCRIPT_VERIFY_MINIMALDATA),_=-1===this.vfExec.indexOf(!1),S=this.script.chunks[this.pc];this.pc+=1;var{opcodenum:I}=S;if(t.isUndefined(I))return this.errstr="SCRIPT_ERR_UNDEFINED_OPCODE",!1;if(S.buf&&S.buf.length>Oe.MAX_SCRIPT_ELEMENT_SIZE)return this.errstr="SCRIPT_ERR_PUSH_SIZE",!1;if(I>W.OP_16&&(this.nOpCount+=1,201<this.nOpCount))return this.errstr="SCRIPT_ERR_OP_COUNT",!1;if(I===W.OP_CAT||I===W.OP_SUBSTR||I===W.OP_LEFT||I===W.OP_RIGHT||I===W.OP_INVERT||I===W.OP_AND||I===W.OP_OR||I===W.OP_XOR||I===W.OP_2MUL||I===W.OP_2DIV||I===W.OP_MUL||I===W.OP_DIV||I===W.OP_MOD||I===W.OP_LSHIFT||I===W.OP_RSHIFT)return this.errstr="SCRIPT_ERR_DISABLED_OPCODE",!1;if(_&&0<=I&&I<=W.OP_PUSHDATA4){if(y&&!this.script.checkMinimalPush(this.pc-1))return this.errstr="SCRIPT_ERR_MINIMALDATA",!1;if(S.buf){if(S.len!==S.buf.length)throw new Error("Length of push value not equal to length of data");this.stack.push(S.buf)}else this.stack.push(Oe.false)}else if(_||W.OP_IF<=I&&I<=W.OP_ENDIF)switch(I){case W.OP_1NEGATE:case W.OP_1:case W.OP_2:case W.OP_3:case W.OP_4:case W.OP_5:case W.OP_6:case W.OP_7:case W.OP_8:case W.OP_9:case W.OP_10:case W.OP_11:case W.OP_12:case W.OP_13:case W.OP_14:case W.OP_15:case W.OP_16:n=I-(W.OP_1-1),e=new i(n).toScriptNumBuffer(),this.stack.push(e);break;case W.OP_NOP:break;case W.OP_NOP2:case W.OP_CHECKLOCKTIMEVERIFY:if(!(this.flags&Oe.SCRIPT_VERIFY_CHECKLOCKTIMEVERIFY)){if(this.flags&Oe.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS)return this.errstr="SCRIPT_ERR_DISCOURAGE_UPGRADABLE_NOPS",!1;break}if(1>this.stack.length)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var k=i.fromScriptNumBuffer(this.stack[this.stack.length-1],y,5);if(k.lt(new i(0)))return this.errstr="SCRIPT_ERR_NEGATIVE_LOCKTIME",!1;if(!this.checkLockTime(k))return this.errstr="SCRIPT_ERR_UNSATISFIED_LOCKTIME",!1;break;case W.OP_NOP1:case W.OP_NOP3:case W.OP_NOP4:case W.OP_NOP5:case W.OP_NOP6:case W.OP_NOP7:case W.OP_NOP8:case W.OP_NOP9:case W.OP_NOP10:if(this.flags&Oe.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS)return this.errstr="SCRIPT_ERR_DISCOURAGE_UPGRADABLE_NOPS",!1;break;case W.OP_IF:case W.OP_NOTIF:if(b=!1,_){if(1>this.stack.length)return this.errstr="SCRIPT_ERR_UNBALANCED_CONDITIONAL",!1;e=this.stack.pop(),b=Oe.castToBool(e),I===W.OP_NOTIF&&(b=!b)}this.vfExec.push(b);break;case W.OP_ELSE:if(0===this.vfExec.length)return this.errstr="SCRIPT_ERR_UNBALANCED_CONDITIONAL",!1;this.vfExec[this.vfExec.length-1]=!this.vfExec[this.vfExec.length-1];break;case W.OP_ENDIF:if(0===this.vfExec.length)return this.errstr="SCRIPT_ERR_UNBALANCED_CONDITIONAL",!1;this.vfExec.pop();break;case W.OP_VERIFY:if(1>this.stack.length)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(e=this.stack[this.stack.length-1],!(b=Oe.castToBool(e)))return this.errstr="SCRIPT_ERR_VERIFY",!1;this.stack.pop();break;case W.OP_RETURN:return this.errstr="SCRIPT_ERR_OP_RETURN",!1;case W.OP_TOALTSTACK:if(1>this.stack.length)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.altstack.push(this.stack.pop());break;case W.OP_FROMALTSTACK:if(1>this.altstack.length)return this.errstr="SCRIPT_ERR_INVALID_ALTSTACK_OPERATION",!1;this.stack.push(this.altstack.pop());break;case W.OP_2DROP:if(2>this.stack.length)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.pop(),this.stack.pop();break;case W.OP_2DUP:if(2>this.stack.length)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;r=this.stack[this.stack.length-2],a=this.stack[this.stack.length-1],this.stack.push(r),this.stack.push(a);break;case W.OP_3DUP:if(3>this.stack.length)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;r=this.stack[this.stack.length-3],a=this.stack[this.stack.length-2];var w=this.stack[this.stack.length-1];this.stack.push(r),this.stack.push(a),this.stack.push(w);break;case W.OP_2OVER:if(4>this.stack.length)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;r=this.stack[this.stack.length-4],a=this.stack[this.stack.length-3],this.stack.push(r),this.stack.push(a);break;case W.OP_2ROT:if(6>this.stack.length)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;o=this.stack.splice(this.stack.length-6,2),this.stack.push(o[0]),this.stack.push(o[1]);break;case W.OP_2SWAP:if(4>this.stack.length)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;o=this.stack.splice(this.stack.length-4,2),this.stack.push(o[0]),this.stack.push(o[1]);break;case W.OP_IFDUP:if(1>this.stack.length)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;e=this.stack[this.stack.length-1],(b=Oe.castToBool(e))&&this.stack.push(e);break;case W.OP_DEPTH:e=new i(this.stack.length).toScriptNumBuffer(),this.stack.push(e);break;case W.OP_DROP:if(1>this.stack.length)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.pop();break;case W.OP_DUP:if(1>this.stack.length)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.push(this.stack[this.stack.length-1]);break;case W.OP_NIP:if(2>this.stack.length)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.splice(this.stack.length-2,1);break;case W.OP_OVER:if(2>this.stack.length)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.push(this.stack[this.stack.length-2]);break;case W.OP_PICK:case W.OP_ROLL:if(2>this.stack.length)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(e=this.stack[this.stack.length-1],n=(c=i.fromScriptNumBuffer(e,y)).toNumber(),this.stack.pop(),0>n||n>=this.stack.length)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;e=this.stack[this.stack.length-n-1],I===W.OP_ROLL&&this.stack.splice(this.stack.length-n-1,1),this.stack.push(e);break;case W.OP_ROT:if(3>this.stack.length)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;s=this.stack[this.stack.length-3],u=this.stack[this.stack.length-2];var O=this.stack[this.stack.length-1];this.stack[this.stack.length-3]=u,this.stack[this.stack.length-2]=O,this.stack[this.stack.length-1]=s;break;case W.OP_SWAP:if(2>this.stack.length)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;s=this.stack[this.stack.length-2],u=this.stack[this.stack.length-1],this.stack[this.stack.length-2]=u,this.stack[this.stack.length-1]=s;break;case W.OP_TUCK:if(2>this.stack.length)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.splice(this.stack.length-2,0,this.stack[this.stack.length-1]);break;case W.OP_SIZE:if(1>this.stack.length)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;c=new i(this.stack[this.stack.length-1].length),this.stack.push(c.toScriptNumBuffer());break;case W.OP_EQUAL:case W.OP_EQUALVERIFY:if(2>this.stack.length)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;r=this.stack[this.stack.length-2],a=this.stack[this.stack.length-1];var E=r.toString("hex")===a.toString("hex");if(this.stack.pop(),this.stack.pop(),this.stack.push(E?Oe.true:Oe.false),I===W.OP_EQUALVERIFY){if(!E)return this.errstr="SCRIPT_ERR_EQUALVERIFY",!1;this.stack.pop()}break;case W.OP_1ADD:case W.OP_1SUB:case W.OP_NEGATE:case W.OP_ABS:case W.OP_NOT:case W.OP_0NOTEQUAL:if(1>this.stack.length)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;switch(e=this.stack[this.stack.length-1],c=i.fromScriptNumBuffer(e,y),I){case W.OP_1ADD:c=c.add(i.One);break;case W.OP_1SUB:c=c.sub(i.One);break;case W.OP_NEGATE:c=c.neg();break;case W.OP_ABS:0>c.cmp(i.Zero)&&(c=c.neg());break;case W.OP_NOT:c=new i((0===c.cmp(i.Zero))+0);break;case W.OP_0NOTEQUAL:c=new i((0!==c.cmp(i.Zero))+0);break;default:throw new Error("Ended up in a default switch statement that should never be executed.")}this.stack.pop(),this.stack.push(c.toScriptNumBuffer());break;case W.OP_ADD:case W.OP_SUB:case W.OP_BOOLAND:case W.OP_BOOLOR:case W.OP_NUMEQUAL:case W.OP_NUMEQUALVERIFY:case W.OP_NUMNOTEQUAL:case W.OP_LESSTHAN:case W.OP_GREATERTHAN:case W.OP_LESSTHANOREQUAL:case W.OP_GREATERTHANOREQUAL:case W.OP_MIN:case W.OP_MAX:if(2>this.stack.length)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;switch(l=i.fromScriptNumBuffer(this.stack[this.stack.length-2],y),h=i.fromScriptNumBuffer(this.stack[this.stack.length-1],y),c=new i(0),I){case W.OP_ADD:c=l.add(h);break;case W.OP_SUB:c=l.sub(h);break;case W.OP_BOOLAND:c=new i((0!==l.cmp(i.Zero)&&0!==h.cmp(i.Zero))+0);break;case W.OP_BOOLOR:c=new i((0!==l.cmp(i.Zero)||0!==h.cmp(i.Zero))+0);break;case W.OP_NUMEQUAL:case W.OP_NUMEQUALVERIFY:c=new i((0===l.cmp(h))+0);break;case W.OP_NUMNOTEQUAL:c=new i((0!==l.cmp(h))+0);break;case W.OP_LESSTHAN:c=new i((0>l.cmp(h))+0);break;case W.OP_GREATERTHAN:c=new i((0<l.cmp(h))+0);break;case W.OP_LESSTHANOREQUAL:c=new i((0>=l.cmp(h))+0);break;case W.OP_GREATERTHANOREQUAL:c=new i((0<=l.cmp(h))+0);break;case W.OP_MIN:c=0>l.cmp(h)?l:h;break;case W.OP_MAX:c=0<l.cmp(h)?l:h;break;default:throw new Error("Ended up in a default switch statement that should never be executed.")}if(this.stack.pop(),this.stack.pop(),this.stack.push(c.toScriptNumBuffer()),I===W.OP_NUMEQUALVERIFY){if(!Oe.castToBool(this.stack[this.stack.length-1]))return this.errstr="SCRIPT_ERR_NUMEQUALVERIFY",!1;this.stack.pop()}break;case W.OP_WITHIN:if(3>this.stack.length)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;l=i.fromScriptNumBuffer(this.stack[this.stack.length-3],y),h=i.fromScriptNumBuffer(this.stack[this.stack.length-2],y);var B=i.fromScriptNumBuffer(this.stack[this.stack.length-1],y);b=0>=h.cmp(l)&&0>l.cmp(B),this.stack.pop(),this.stack.pop(),this.stack.pop(),this.stack.push(b?Oe.true:Oe.false);break;case W.OP_RIPEMD160:case W.OP_SHA1:case W.OP_SHA256:case W.OP_HASH160:case W.OP_HASH256:if(1>this.stack.length)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var A;e=this.stack[this.stack.length-1],I===W.OP_RIPEMD160?A=P.ripemd160(e):I===W.OP_SHA1?A=P.sha1(e):I===W.OP_SHA256?A=P.sha256(e):I===W.OP_HASH160?A=P.sha256ripemd160(e):I===W.OP_HASH256&&(A=P.sha256sha256(e)),this.stack.pop(),this.stack.push(A);break;case W.OP_CODESEPARATOR:this.pbegincodehash=this.pc;break;case W.OP_CHECKSIG:case W.OP_CHECKSIGVERIFY:if(2>this.stack.length)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;f=this.stack[this.stack.length-2],p=this.stack[this.stack.length-1],d=(new X).set({chunks:this.script.chunks.slice(this.pbegincodehash)});var T=(new X).add(f);if(d.findAndDelete(T),!this.checkSignatureEncoding(f)||!this.checkPubkeyEncoding(p))return!1;try{m=Z.fromTxFormat(f),g=q.fromBuffer(p,!1),v=this.tx.verifySignature(m,g,this.nin,d)}catch(e){v=!1}if(this.stack.pop(),this.stack.pop(),this.stack.push(v?Oe.true:Oe.false),I===W.OP_CHECKSIGVERIFY){if(!v)return this.errstr="SCRIPT_ERR_CHECKSIGVERIFY",!1;this.stack.pop()}break;case W.OP_CHECKMULTISIG:case W.OP_CHECKMULTISIGVERIFY:var x=1;if(this.stack.length<x)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var N=i.fromScriptNumBuffer(this.stack[this.stack.length-x],y).toNumber();if(0>N||20<N)return this.errstr="SCRIPT_ERR_PUBKEY_COUNT",!1;if(this.nOpCount+=N,201<this.nOpCount)return this.errstr="SCRIPT_ERR_OP_COUNT",!1;var R=x+=1;if(x+=N,this.stack.length<x)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var C=i.fromScriptNumBuffer(this.stack[this.stack.length-x],y).toNumber();if(0>C||C>N)return this.errstr="SCRIPT_ERR_SIG_COUNT",!1;var z=x+=1;if(x+=C,this.stack.length<x)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;d=(new X).set({chunks:this.script.chunks.slice(this.pbegincodehash)});for(var U=0;U<C;U+=1)f=this.stack[this.stack.length-z-U],d.findAndDelete((new X).add(f));for(v=!0;v&&0<C;){if(f=this.stack[this.stack.length-z],p=this.stack[this.stack.length-R],!this.checkSignatureEncoding(f)||!this.checkPubkeyEncoding(p))return!1;var H=void 0;try{m=Z.fromTxFormat(f),g=q.fromBuffer(p,!1),H=this.tx.verifySignature(m,g,this.nin,d)}catch(e){H=!1}H&&(z+=1,C-=1),R+=1,C>(N-=1)&&(v=!1)}for(;1<x;)x-=1,this.stack.pop();if(1>this.stack.length)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(this.flags&Oe.SCRIPT_VERIFY_NULLDUMMY&&this.stack[this.stack.length-1].length)return this.errstr="SCRIPT_ERR_SIG_NULLDUMMY",!1;if(this.stack.pop(),this.stack.push(v?Oe.true:Oe.false),I===W.OP_CHECKMULTISIGVERIFY){if(!v)return this.errstr="SCRIPT_ERR_CHECKMULTISIGVERIFY",!1;this.stack.pop()}break;default:return this.errstr="SCRIPT_ERR_BAD_OPCODE",!1}return!0};class Pe extends ie{constructor(e,t,r){super(e,t,r);var i=this;this.publicKeys=t||e.publicKeys,this.threshold=1,this.redeemScript=r,y.checkState(X.buildScriptHashOut(this.redeemScript).equals(this.output.script),"Provided redeemScript doesn't hash to the provided output"),this.publicKeyIndex={},this.publicKeys.forEach((e,t)=>{i.publicKeyIndex[e.toString()]=t}),this.signatures=Array(this.publicKeys.length)}toObject(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=ie.prototype.toObject.apply(this,t);return i.threshold=this.threshold,i.publicKeys=this.publicKeys.map(e=>e.toString()),i.signatures=this._serializeSignatures(),i}_deserializeSignatures(e){return e.map(e=>e?new ae(e):void 0)}_serializeSignatures(){return this.signatures.map(e=>e?e.toObject():void 0)}getSignatures(e,t,r,i){return y.checkState(this.output instanceof ee,"Malformed output found when signing transaction"),i=i||Z.SIGHASH_ALL|Z.SIGHASH_FORKID,this.publicKeys.filter(e=>e.toString()===t.publicKey.toString()).map(a=>new ae({publicKey:a,prevTxId:this.prevTxId,outputIndex:this.outputIndex,inputIndex:r,signature:re.sign(e,t,i,r,this.output.script,this.output.satoshisBN),sigtype:i}))}addSignature(e,t){return y.checkState(!this.isFullySigned(),"All needed signatures have already been added"),y.checkArgument(void 0!==this.publicKeyIndex[t.publicKey.toString()],"Signature has no matching public key"),y.checkState(this.isValidSignature(e,t)),this.signatures[this.publicKeyIndex[t.publicKey.toString()]]=t,this._updateScript(),this}_updateScript(){return this.setScript(X.buildP2SHMultisigIn(this.publicKeys,this.threshold,this._createSignatures(),{cachedMultisig:this.redeemScript})),this}_createSignatures(){return this.signatures.filter(e=>void 0!==e).map(e=>O.concat([e.signature.toDER(),O.integerAsSingleByteBuffer(e.sigtype)]))}clearSignatures(){this.signatures=Array(this.publicKeys.length),this._updateScript()}isFullySigned(){return this.countSignatures()===this.threshold}countMissingSignatures(){return this.threshold-this.countSignatures()}countSignatures(){return this.signatures.reduce((e,t)=>e+!!t,0)}publicKeysWithoutSignature(){var e=this;return this.publicKeys.filter(t=>!e.signatures[e.publicKeyIndex[t.toString()]])}isValidSignature(e,t){return t.signature.nhashtype=t.sigtype,re.verify(e,t.signature,t.publicKey,t.inputIndex,this.redeemScript,this.output.satoshisBN)}_estimateSize(){return Pe.OPCODES_SIZE+this.threshold*Pe.SIGNATURE_SIZE+this.publicKeys.length*Pe.PUBKEY_SIZE}}Pe.OPCODES_SIZE=7,Pe.SIGNATURE_SIZE=74,Pe.PUBKEY_SIZE=34;var Ee=/[0-9A-Fa-f]{64}/;class Be{constructor(e,t){if(!Ee.test(e))throw new Error("txId not in a valid hex format: ".concat(e));if(0>t||4294967295<t||Number.isNaN(t))throw new Error("outputIndex out of range: ".concat(t));this.txId=e,this.outputIndex=t}toString(){return"".concat(this.txId,":").concat(this.outputIndex)}static fromString(e){var t=e.split(":");if(2!==t.length)throw new Error("Invalid string format");return new Be(t[0],parseInt(t[1],10))}get txid(){return this.txId}get vout(){return this.outputIndex}equals(e){return this.outputIndex===e.outputIndex&&this.txId.toLowerCase()===e.txId.toLowerCase()}}var Ae=function(e,t){if(!(this instanceof Ae))return new Ae(e,t);if(this.extras={},this.knownParams=t||[],this.address=null,this.network=null,this.amount=null,this.message=null,"string"==typeof e){var r=Ae.parse(e);r.amount&&(r.amount=this._parseAmount(r.amount)),this._fromObject(r)}else{if("object"!=typeof e)throw new TypeError("Unrecognized data format.");this._fromObject(e)}};Ae.fromString=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return new Ae(e)},Ae.fromObject=function(e){return new Ae(e)},Ae.isValid=function(e,t){try{new Ae(e,t)}catch(e){return!1}return!0},Ae.parse=function(e){var t=h.parse(e,!0);if("bitcoincash:"!==t.protocol)throw new TypeError("Invalid bitcoin cash URI");var r=/[^:]*:\/?\/?([^?]*)/.exec(e);return t.query.address=r&&r[1]||void 0,t.query},Ae.Members=["address","amount","message","label","r"],Ae.prototype._fromObject=function(e){if(!J.isValid(e.address))throw new TypeError("Invalid bitcoin address");this.address=new J(e.address),this.network=this.address.network,this.amount=e.amount,Object.keys(e).forEach(t=>{if("address"!==t&&"amount"!==t){if(/^req-/.exec(t)&&-1===this.knownParams.indexOf(t))throw Error("Unknown required argument ".concat(t));(-1<Ae.Members.indexOf(t)?this:this.extras)[t]=e[t]}})},Ae.prototype._parseAmount=function(e){if(e=+e,Number.isNaN(e))throw new TypeError("Invalid amount");return le.fromBTC(e).toSatoshis()},Ae.prototype.toJSON=function(){for(var e=this,r={},i=function(t){var i=Ae.Members[t];1!==Object.keys(e).findIndex(e=>e===i)&&void 0!==e[i]&&(r[i]=e[i].toString())},a=0;a<Ae.Members.length;a+=1)i(a);return t.extend(r,this.extras),r},Ae.prototype.toObject=Ae.prototype.toJSON,Ae.prototype.toString=function(){var e={};return this.amount&&(e.amount=le.fromSatoshis(this.amount).toBTC()),this.message&&(e.message=this.message),this.label&&(e.label=this.label),this.r&&(e.r=this.r),t.extend(e,this.extras),h.format({protocol:"bitcoincash:",host:this.address,query:e})},Ae.prototype.inspect=function(){return"<URI: ".concat(this.toString(),">")};var Te=function e(t){if(!(this instanceof e))return new e(t);Buffer.isBuffer(t)?this.buf=t:"number"==typeof t?this.fromNumber(t):t instanceof i?this.fromBN(t):t&&this.set(t)};Te.prototype.set=function(e){return this.buf=e.buf||this.buf,this},Te.prototype.fromString=function(e){return this.set({buf:Buffer.from(e,"hex")}),this},Te.prototype.toString=function(){return this.buf.toString("hex")},Te.prototype.fromBuffer=function(e){return this.buf=e,this},Te.prototype.fromBufferReader=function(e){return this.buf=e.readVarintBuf(),this},Te.prototype.fromBN=function(e){return this.buf=Y().writeVarintBN(e).concat(),this},Te.prototype.fromNumber=function(e){return this.buf=Y().writeVarintNum(e).concat(),this},Te.prototype.toBuffer=function(){return this.buf},Te.prototype.toBN=function(){return G(this.buf).readVarintBN()},Te.prototype.toNumber=function(){return G(this.buf).readVarintNum()};var xe={};xe.version="v".concat(we),xe.versionGuard=function(){},xe.versionGuard(global._bitcoin),global._bitcoin=xe.version,xe.crypto={},xe.crypto.BN=i,xe.crypto.ECDSA=te,xe.crypto.Hash=P,xe.crypto.Random=M,xe.crypto.Point=j,xe.crypto.Signature=Z,xe.encoding={},xe.encoding.Base58=S,xe.encoding.Base58Check=E,xe.encoding.BufferReader=G,xe.encoding.BufferWriter=Y,xe.encoding.Varint=Te,xe.util={},xe.util.buffer=O,xe.util.js=k,xe.util.preconditions=y,xe.errors=v,xe.Address=J,xe.Block=de,xe.Block.BlockHeader=Q,xe.Block.MerkleBlock=_e,xe.BlockHeader=Q,xe.HDPrivateKey=ye,xe.HDPublicKey=be,xe.MerkleBlock=_e,xe.Message=Se,xe.Mnemonic=ke,xe.Networks=H,xe.Opcode=W,xe.PrivateKey=V,xe.PublicKey=q,xe.Script=X,xe.Script.Interpreter=Oe,xe.Transaction=pe,xe.Transaction.Input=ie,xe.Transaction.Input.MultiSig=ne,xe.Transaction.Input.MultiSigScriptHash=oe,xe.Transaction.Input.PublicKey=se,xe.Transaction.Input.PublicKeyHash=ue,xe.Transaction.Input.ScriptHash=Pe,xe.Transaction.Output=ee,xe.Transaction.OutputId=Be,xe.Transaction.Sighash=re,xe.Transaction.Signature=ae,xe.Transaction.UnspentOutput=he,xe.Unit=le,xe.URI=Ae,xe.deps={},xe.deps.bnjs=i,xe.deps.bs58=a,xe.deps.Buffer=Buffer,xe.deps.elliptic=r,xe.deps._=t,module.exports=xe;